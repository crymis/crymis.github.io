(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Lv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gf={exports:{}},hr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function TC(){if($g)return hr;$g=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:a}}return hr.Fragment=e,hr.jsx=n,hr.jsxs=n,hr}var Zg;function SC(){return Zg||(Zg=1,gf.exports=TC()),gf.exports}var k=SC(),_f={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function CC(){if(jg)return he;jg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function v(I){return I===null||typeof I!="object"?null:(I=E&&I[E]||I["@@iterator"],typeof I=="function"?I:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,x={};function N(I,Y,ae){this.props=I,this.context=Y,this.refs=x,this.updater=ae||C}N.prototype.isReactComponent={},N.prototype.setState=function(I,Y){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Y,"setState")},N.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function O(){}O.prototype=N.prototype;function B(I,Y,ae){this.props=I,this.context=Y,this.refs=x,this.updater=ae||C}var q=B.prototype=new O;q.constructor=B,R(q,N.prototype),q.isPureReactComponent=!0;var Q=Array.isArray,W={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function ne(I,Y,ae,re,Z,Ae){return ae=Ae.ref,{$$typeof:t,type:I,key:Y,ref:ae!==void 0?ae:null,props:Ae}}function Ce(I,Y){return ne(I.type,Y,void 0,void 0,void 0,I.props)}function V(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function $(I){var Y={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ae){return Y[ae]})}var Ee=/\/+/g;function Pe(I,Y){return typeof I=="object"&&I!==null&&I.key!=null?$(""+I.key):Y.toString(36)}function De(){}function J(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(De,De):(I.status="pending",I.then(function(Y){I.status==="pending"&&(I.status="fulfilled",I.value=Y)},function(Y){I.status==="pending"&&(I.status="rejected",I.reason=Y)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function fe(I,Y,ae,re,Z){var Ae=typeof I;(Ae==="undefined"||Ae==="boolean")&&(I=null);var pe=!1;if(I===null)pe=!0;else switch(Ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(I.$$typeof){case t:case e:pe=!0;break;case y:return pe=I._init,fe(pe(I._payload),Y,ae,re,Z)}}if(pe)return Z=Z(I),pe=re===""?"."+Pe(I,0):re,Q(Z)?(ae="",pe!=null&&(ae=pe.replace(Ee,"$&/")+"/"),fe(Z,Y,ae,"",function(Ze){return Ze})):Z!=null&&(V(Z)&&(Z=Ce(Z,ae+(Z.key==null||I&&I.key===Z.key?"":(""+Z.key).replace(Ee,"$&/")+"/")+pe)),Y.push(Z)),1;pe=0;var Tt=re===""?".":re+":";if(Q(I))for(var Me=0;Me<I.length;Me++)re=I[Me],Ae=Tt+Pe(re,Me),pe+=fe(re,Y,ae,Ae,Z);else if(Me=v(I),typeof Me=="function")for(I=Me.call(I),Me=0;!(re=I.next()).done;)re=re.value,Ae=Tt+Pe(re,Me++),pe+=fe(re,Y,ae,Ae,Z);else if(Ae==="object"){if(typeof I.then=="function")return fe(J(I),Y,ae,re,Z);throw Y=String(I),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return pe}function z(I,Y,ae){if(I==null)return I;var re=[],Z=0;return fe(I,re,"","",function(Ae){return Y.call(ae,Ae,Z++)}),re}function se(I){if(I._status===-1){var Y=I._result;Y=Y(),Y.then(function(ae){(I._status===0||I._status===-1)&&(I._status=1,I._result=ae)},function(ae){(I._status===0||I._status===-1)&&(I._status=2,I._result=ae)}),I._status===-1&&(I._status=0,I._result=Y)}if(I._status===1)return I._result.default;throw I._result}var ee=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function oe(){}return he.Children={map:z,forEach:function(I,Y,ae){z(I,function(){Y.apply(this,arguments)},ae)},count:function(I){var Y=0;return z(I,function(){Y++}),Y},toArray:function(I){return z(I,function(Y){return Y})||[]},only:function(I){if(!V(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},he.Component=N,he.Fragment=n,he.Profiler=r,he.PureComponent=B,he.StrictMode=o,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,he.act=function(){throw Error("act(...) is not supported in production builds of React.")},he.cache=function(I){return function(){return I.apply(null,arguments)}},he.cloneElement=function(I,Y,ae){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var re=R({},I.props),Z=I.key,Ae=void 0;if(Y!=null)for(pe in Y.ref!==void 0&&(Ae=void 0),Y.key!==void 0&&(Z=""+Y.key),Y)!G.call(Y,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Y.ref===void 0||(re[pe]=Y[pe]);var pe=arguments.length-2;if(pe===1)re.children=ae;else if(1<pe){for(var Tt=Array(pe),Me=0;Me<pe;Me++)Tt[Me]=arguments[Me+2];re.children=Tt}return ne(I.type,Z,void 0,void 0,Ae,re)},he.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},he.createElement=function(I,Y,ae){var re,Z={},Ae=null;if(Y!=null)for(re in Y.key!==void 0&&(Ae=""+Y.key),Y)G.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Z[re]=Y[re]);var pe=arguments.length-2;if(pe===1)Z.children=ae;else if(1<pe){for(var Tt=Array(pe),Me=0;Me<pe;Me++)Tt[Me]=arguments[Me+2];Z.children=Tt}if(I&&I.defaultProps)for(re in pe=I.defaultProps,pe)Z[re]===void 0&&(Z[re]=pe[re]);return ne(I,Ae,void 0,void 0,null,Z)},he.createRef=function(){return{current:null}},he.forwardRef=function(I){return{$$typeof:h,render:I}},he.isValidElement=V,he.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:se}},he.memo=function(I,Y){return{$$typeof:m,type:I,compare:Y===void 0?null:Y}},he.startTransition=function(I){var Y=W.T,ae={};W.T=ae;try{var re=I(),Z=W.S;Z!==null&&Z(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(oe,ee)}catch(Ae){ee(Ae)}finally{W.T=Y}},he.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},he.use=function(I){return W.H.use(I)},he.useActionState=function(I,Y,ae){return W.H.useActionState(I,Y,ae)},he.useCallback=function(I,Y){return W.H.useCallback(I,Y)},he.useContext=function(I){return W.H.useContext(I)},he.useDebugValue=function(){},he.useDeferredValue=function(I,Y){return W.H.useDeferredValue(I,Y)},he.useEffect=function(I,Y){return W.H.useEffect(I,Y)},he.useId=function(){return W.H.useId()},he.useImperativeHandle=function(I,Y,ae){return W.H.useImperativeHandle(I,Y,ae)},he.useInsertionEffect=function(I,Y){return W.H.useInsertionEffect(I,Y)},he.useLayoutEffect=function(I,Y){return W.H.useLayoutEffect(I,Y)},he.useMemo=function(I,Y){return W.H.useMemo(I,Y)},he.useOptimistic=function(I,Y){return W.H.useOptimistic(I,Y)},he.useReducer=function(I,Y,ae){return W.H.useReducer(I,Y,ae)},he.useRef=function(I){return W.H.useRef(I)},he.useState=function(I){return W.H.useState(I)},he.useSyncExternalStore=function(I,Y,ae){return W.H.useSyncExternalStore(I,Y,ae)},he.useTransition=function(){return W.H.useTransition()},he.version="19.0.0",he}var e_;function Td(){return e_||(e_=1,_f.exports=CC()),_f.exports}var Gt=Td();const AC=Lv(Gt);var yf={exports:{}},pr={},vf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function RC(){return t_||(t_=1,(function(t){function e(z,se){var ee=z.length;z.push(se);e:for(;0<ee;){var oe=ee-1>>>1,I=z[oe];if(0<r(I,se))z[oe]=se,z[ee]=I,ee=oe;else break e}}function n(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var se=z[0],ee=z.pop();if(ee!==se){z[0]=ee;e:for(var oe=0,I=z.length,Y=I>>>1;oe<Y;){var ae=2*(oe+1)-1,re=z[ae],Z=ae+1,Ae=z[Z];if(0>r(re,ee))Z<I&&0>r(Ae,re)?(z[oe]=Ae,z[Z]=ee,oe=Z):(z[oe]=re,z[ae]=ee,oe=ae);else if(Z<I&&0>r(Ae,ee))z[oe]=Ae,z[Z]=ee,oe=Z;else break e}}return se}function r(z,se){var ee=z.sortIndex-se.sortIndex;return ee!==0?ee:z.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],m=[],y=1,E=null,v=3,C=!1,R=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(z){for(var se=n(m);se!==null;){if(se.callback===null)o(m);else if(se.startTime<=z)o(m),se.sortIndex=se.expirationTime,e(g,se);else break;se=n(m)}}function Q(z){if(x=!1,q(z),!R)if(n(g)!==null)R=!0,J();else{var se=n(m);se!==null&&fe(Q,se.startTime-z)}}var W=!1,G=-1,ne=5,Ce=-1;function V(){return!(t.unstable_now()-Ce<ne)}function $(){if(W){var z=t.unstable_now();Ce=z;var se=!0;try{e:{R=!1,x&&(x=!1,O(G),G=-1),C=!0;var ee=v;try{t:{for(q(z),E=n(g);E!==null&&!(E.expirationTime>z&&V());){var oe=E.callback;if(typeof oe=="function"){E.callback=null,v=E.priorityLevel;var I=oe(E.expirationTime<=z);if(z=t.unstable_now(),typeof I=="function"){E.callback=I,q(z),se=!0;break t}E===n(g)&&o(g),q(z)}else o(g);E=n(g)}if(E!==null)se=!0;else{var Y=n(m);Y!==null&&fe(Q,Y.startTime-z),se=!1}}break e}finally{E=null,v=ee,C=!1}se=void 0}}finally{se?Ee():W=!1}}}var Ee;if(typeof B=="function")Ee=function(){B($)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,De=Pe.port2;Pe.port1.onmessage=$,Ee=function(){De.postMessage(null)}}else Ee=function(){N($,0)};function J(){W||(W=!0,Ee())}function fe(z,se){G=N(function(){z(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){R||C||(R=!0,J())},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(g)},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var ee=v;v=se;try{return z()}finally{v=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,se){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ee=v;v=z;try{return se()}finally{v=ee}},t.unstable_scheduleCallback=function(z,se,ee){var oe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ee+I,z={id:y++,callback:se,priorityLevel:z,startTime:ee,expirationTime:I,sortIndex:-1},ee>oe?(z.sortIndex=ee,e(m,z),n(g)===null&&z===n(m)&&(x?(O(G),G=-1):x=!0,fe(Q,ee-oe))):(z.sortIndex=I,e(g,z),R||C||(R=!0,J())),z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(z){var se=v;return function(){var ee=v;v=se;try{return z.apply(this,arguments)}finally{v=ee}}}})(Ef)),Ef}var n_;function IC(){return n_||(n_=1,vf.exports=RC()),vf.exports}var Tf={exports:{}},vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function wC(){if(i_)return vt;i_=1;var t=Td();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,m,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,vt.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(g,m,null,y)},vt.flushSync=function(g){var m=c.T,y=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=m,o.p=y,o.d.f()}},vt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},vt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},vt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,E=h(y,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:v,fetchPriority:C}):y==="script"&&o.d.X(g,{crossOrigin:E,integrity:v,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},vt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},vt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,E=h(y,m.crossOrigin);o.d.L(g,y,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},vt.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},vt.requestFormReset=function(g){o.d.r(g)},vt.unstable_batchedUpdates=function(g,m){return g(m)},vt.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},vt.useFormStatus=function(){return c.H.useHostTransitionStatus()},vt.version="19.0.0",vt}var o_;function NC(){if(o_)return Tf.exports;o_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tf.exports=wC(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function bC(){if(s_)return pr;s_=1;var t=IC(),e=Td(),n=NC();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var a=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),Q=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ne?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case g:return"Fragment";case h:return"Portal";case y:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case N:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case C:return(i.displayName||"Context")+".Provider";case v:return(i._context.displayName||"Context")+".Consumer";case R:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return s=i.displayName||null,s!==null?s:Ce(i.type)||"Memo";case B:s=i._payload,i=i._init;try{return Ce(i(s))}catch{}}return null}var V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=Object.assign,Ee,Pe;function De(i){if(Ee===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Ee=s&&s[1]||"",Pe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+i+Pe}var J=!1;function fe(i,s){if(!i||J)return"";J=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(L){var U=L}Reflect.construct(i,[],F)}else{try{F.call()}catch(L){U=L}i.call(F.prototype)}}else{try{throw Error()}catch(L){U=L}(F=i())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),T=_[0],S=_[1];if(T&&S){var A=T.split(`
`),b=S.split(`
`);for(p=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;p<b.length&&!b[p].includes("DetermineComponentFrameRoot");)p++;if(u===A.length||p===b.length)for(u=A.length-1,p=b.length-1;1<=u&&0<=p&&A[u]!==b[p];)p--;for(;1<=u&&0<=p;u--,p--)if(A[u]!==b[p]){if(u!==1||p!==1)do if(u--,p--,0>p||A[u]!==b[p]){var P=`
`+A[u].replace(" at new "," at ");return i.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",i.displayName)),P}while(1<=u&&0<=p);break}}}finally{J=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?De(l):""}function z(i){switch(i.tag){case 26:case 27:case 5:return De(i.type);case 16:return De("Lazy");case 13:return De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return i=fe(i.type,!1),i;case 11:return i=fe(i.type.render,!1),i;case 1:return i=fe(i.type,!0),i;default:return""}}function se(i){try{var s="";do s+=z(i),i=i.return;while(i);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ee(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function oe(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function I(i){if(ee(i)!==i)throw Error(o(188))}function Y(i){var s=i.alternate;if(!s){if(s=ee(i),s===null)throw Error(o(188));return s!==i?null:i}for(var l=i,u=s;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return I(p),i;if(_===u)return I(p),s;_=_.sibling}throw Error(o(188))}if(l.return!==u.return)l=p,u=_;else{for(var T=!1,S=p.child;S;){if(S===l){T=!0,l=p,u=_;break}if(S===u){T=!0,u=p,l=_;break}S=S.sibling}if(!T){for(S=_.child;S;){if(S===l){T=!0,l=_,u=p;break}if(S===u){T=!0,u=_,l=p;break}S=S.sibling}if(!T)throw Error(o(189))}}if(l.alternate!==u)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?i:s}function ae(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=ae(i),s!==null)return s;i=i.sibling}return null}var re=Array.isArray,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},pe=[],Tt=-1;function Me(i){return{current:i}}function Ze(i){0>Tt||(i.current=pe[Tt],pe[Tt]=null,Tt--)}function qe(i,s){Tt++,pe[Tt]=i.current,i.current=s}var mn=Me(null),gs=Me(null),Qn=Me(null),Yr=Me(null);function Jr(i,s){switch(qe(Qn,s),qe(gs,i),qe(mn,null),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Ig(s):0;break;default:if(i=i===8?s.parentNode:s,s=i.tagName,i=i.namespaceURI)i=Ig(i),s=wg(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ze(mn),qe(mn,s)}function ro(){Ze(mn),Ze(gs),Ze(Qn)}function ru(i){i.memoizedState!==null&&qe(Yr,i);var s=mn.current,l=wg(s,i.type);s!==l&&(qe(gs,i),qe(mn,l))}function Kr(i){gs.current===i&&(Ze(mn),Ze(gs)),Yr.current===i&&(Ze(Yr),ar._currentValue=Ae)}var lu=Object.prototype.hasOwnProperty,au=t.unstable_scheduleCallback,uu=t.unstable_cancelCallback,jE=t.unstable_shouldYield,eT=t.unstable_requestPaint,gn=t.unstable_now,tT=t.unstable_getCurrentPriorityLevel,mh=t.unstable_ImmediatePriority,gh=t.unstable_UserBlockingPriority,Qr=t.unstable_NormalPriority,nT=t.unstable_LowPriority,_h=t.unstable_IdlePriority,iT=t.log,oT=t.unstable_setDisableYieldValue,_s=null,Dt=null;function sT(i){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(_s,i,void 0,(i.current.flags&128)===128)}catch{}}function Wn(i){if(typeof iT=="function"&&oT(i),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(_s,i)}catch{}}var Ut=Math.clz32?Math.clz32:aT,rT=Math.log,lT=Math.LN2;function aT(i){return i>>>=0,i===0?32:31-(rT(i)/lT|0)|0}var Wr=128,Xr=4194304;function wi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $r(i,s){var l=i.pendingLanes;if(l===0)return 0;var u=0,p=i.suspendedLanes,_=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var S=l&134217727;return S!==0?(l=S&~p,l!==0?u=wi(l):(_&=S,_!==0?u=wi(_):i||(T=S&~T,T!==0&&(u=wi(T))))):(S=l&~p,S!==0?u=wi(S):_!==0?u=wi(_):i||(T=l&~T,T!==0&&(u=wi(T)))),u===0?0:s!==0&&s!==u&&(s&p)===0&&(p=u&-u,T=s&-s,p>=T||p===32&&(T&4194176)!==0)?s:u}function ys(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function uT(i,s){switch(i){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yh(){var i=Wr;return Wr<<=1,(Wr&4194176)===0&&(Wr=128),i}function vh(){var i=Xr;return Xr<<=1,(Xr&62914560)===0&&(Xr=4194304),i}function cu(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function vs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function cT(i,s,l,u,p,_){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var S=i.entanglements,A=i.expirationTimes,b=i.hiddenUpdates;for(l=T&~l;0<l;){var P=31-Ut(l),F=1<<P;S[P]=0,A[P]=-1;var U=b[P];if(U!==null)for(b[P]=null,P=0;P<U.length;P++){var L=U[P];L!==null&&(L.lane&=-536870913)}l&=~F}u!==0&&Eh(i,u,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(T&~s))}function Eh(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ut(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|l&4194218}function Th(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var u=31-Ut(l),p=1<<u;p&s|i[u]&s&&(i[u]|=s),l&=~p}}function Sh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ch(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:Yg(i.type))}function fT(i,s){var l=Z.p;try{return Z.p=i,s()}finally{Z.p=l}}var Xn=Math.random().toString(36).slice(2),_t="__reactFiber$"+Xn,wt="__reactProps$"+Xn,lo="__reactContainer$"+Xn,fu="__reactEvents$"+Xn,dT="__reactListeners$"+Xn,hT="__reactHandles$"+Xn,Ah="__reactResources$"+Xn,Es="__reactMarker$"+Xn;function du(i){delete i[_t],delete i[wt],delete i[fu],delete i[dT],delete i[hT]}function Ni(i){var s=i[_t];if(s)return s;for(var l=i.parentNode;l;){if(s=l[lo]||l[_t]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Mg(i);i!==null;){if(l=i[_t])return l;i=Mg(i)}return s}i=l,l=i.parentNode}return null}function ao(i){if(i=i[_t]||i[lo]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Ts(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function uo(i){var s=i[Ah];return s||(s=i[Ah]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ot(i){i[Es]=!0}var Rh=new Set,Ih={};function bi(i,s){co(i,s),co(i+"Capture",s)}function co(i,s){for(Ih[i]=s,i=0;i<s.length;i++)Rh.add(s[i])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wh={},Nh={};function mT(i){return lu.call(Nh,i)?!0:lu.call(wh,i)?!1:pT.test(i)?Nh[i]=!0:(wh[i]=!0,!1)}function Zr(i,s,l){if(mT(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function jr(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function Rn(i,s,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+u)}}function Vt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function bh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gT(i){var s=bh(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,_=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){u=""+T,_.call(this,T)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function el(i){i._valueTracker||(i._valueTracker=gT(i))}function Mh(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return i&&(u=bh(i)?i.checked?"true":"false":i.value),i=u,i!==l?(s.setValue(i),!0):!1}function tl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _T=/[\n"\\]/g;function Ft(i){return i.replace(_T,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function hu(i,s,l,u,p,_,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Vt(s)):i.value!==""+Vt(s)&&(i.value=""+Vt(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?pu(i,T,Vt(s)):l!=null?pu(i,T,Vt(l)):u!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Vt(S):i.removeAttribute("name")}function xh(i,s,l,u,p,_,T,S){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+Vt(l):"",s=s!=null?""+Vt(s):l,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function pu(i,s,l){s==="number"&&tl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function fo(i,s,l,u){if(i=i.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=s.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Vt(l),s=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,u&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function Dh(i,s,l){if(s!=null&&(s=""+Vt(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+Vt(l):""}function Uh(i,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(o(92));if(re(u)){if(1<u.length)throw Error(o(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=Vt(s),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u)}function ho(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var yT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lh(i,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,l):typeof l!="number"||l===0||yT.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function Ph(i,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&l[p]!==u&&Lh(i,p,u)}else for(var _ in s)s.hasOwnProperty(_)&&Lh(i,_,s[_])}function mu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ET=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(i){return ET.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var gu=null;function _u(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var po=null,mo=null;function kh(i){var s=ao(i);if(s&&(i=s.stateNode)){var l=i[wt]||null;e:switch(i=s.stateNode,s.type){case"input":if(hu(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ft(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==i&&u.form===i.form){var p=u[wt]||null;if(!p)throw Error(o(90));hu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===i.form&&Mh(u)}break e;case"textarea":Dh(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&fo(i,!!l.multiple,s,!1)}}}var yu=!1;function Oh(i,s,l){if(yu)return i(s,l);yu=!0;try{var u=i(s);return u}finally{if(yu=!1,(po!==null||mo!==null)&&(Gl(),po&&(s=po,i=mo,mo=po=null,kh(s),i)))for(s=0;s<i.length;s++)kh(i[s])}}function Ss(i,s){var l=i.stateNode;if(l===null)return null;var u=l[wt]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var vu=!1;if(An)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){vu=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{vu=!1}var $n=null,Eu=null,il=null;function Hh(){if(il)return il;var i,s=Eu,l=s.length,u,p="value"in $n?$n.value:$n.textContent,_=p.length;for(i=0;i<l&&s[i]===p[i];i++);var T=l-i;for(u=1;u<=T&&s[l-u]===p[_-u];u++);return il=p.slice(i,1<u?1-u:void 0)}function ol(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function sl(){return!0}function Gh(){return!1}function Nt(i){function s(l,u,p,_,T){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(l=i[S],this[S]=l?l(_):_[S]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?sl:Gh,this.isPropagationStopped=Gh,this}return $(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),s}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=Nt(Mi),As=$({},Mi,{view:0,detail:0}),TT=Nt(As),Tu,Su,Rs,ll=$({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Au,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rs&&(Rs&&i.type==="mousemove"?(Tu=i.screenX-Rs.screenX,Su=i.screenY-Rs.screenY):Su=Tu=0,Rs=i),Tu)},movementY:function(i){return"movementY"in i?i.movementY:Su}}),Vh=Nt(ll),ST=$({},ll,{dataTransfer:0}),CT=Nt(ST),AT=$({},As,{relatedTarget:0}),Cu=Nt(AT),RT=$({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),IT=Nt(RT),wT=$({},Mi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),NT=Nt(wT),bT=$({},Mi,{data:0}),Fh=Nt(bT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=DT[i])?!!s[i]:!1}function Au(){return UT}var LT=$({},As,{key:function(i){if(i.key){var s=MT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ol(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Au,charCode:function(i){return i.type==="keypress"?ol(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ol(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),PT=Nt(LT),kT=$({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=Nt(kT),OT=$({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Au}),HT=Nt(OT),GT=$({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),VT=Nt(GT),FT=$({},ll,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Nt(FT),BT=$({},Mi,{newState:0,oldState:0}),zT=Nt(BT),YT=[9,13,27,32],Ru=An&&"CompositionEvent"in window,Is=null;An&&"documentMode"in document&&(Is=document.documentMode);var JT=An&&"TextEvent"in window&&!Is,Bh=An&&(!Ru||Is&&8<Is&&11>=Is),zh=" ",Yh=!1;function Jh(i,s){switch(i){case"keyup":return YT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var go=!1;function KT(i,s){switch(i){case"compositionend":return Kh(s);case"keypress":return s.which!==32?null:(Yh=!0,zh);case"textInput":return i=s.data,i===zh&&Yh?null:i;default:return null}}function QT(i,s){if(go)return i==="compositionend"||!Ru&&Jh(i,s)?(i=Hh(),il=Eu=$n=null,go=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bh&&s.locale!=="ko"?null:s.data;default:return null}}var WT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!WT[i.type]:s==="textarea"}function Wh(i,s,l,u){po?mo?mo.push(u):mo=[u]:po=u,s=zl(s,"onChange"),0<s.length&&(l=new rl("onChange","change",null,l,u),i.push({event:l,listeners:s}))}var ws=null,Ns=null;function XT(i){Tg(i,0)}function al(i){var s=Ts(i);if(Mh(s))return i}function Xh(i,s){if(i==="change")return s}var $h=!1;if(An){var Iu;if(An){var wu="oninput"in document;if(!wu){var Zh=document.createElement("div");Zh.setAttribute("oninput","return;"),wu=typeof Zh.oninput=="function"}Iu=wu}else Iu=!1;$h=Iu&&(!document.documentMode||9<document.documentMode)}function jh(){ws&&(ws.detachEvent("onpropertychange",ep),Ns=ws=null)}function ep(i){if(i.propertyName==="value"&&al(Ns)){var s=[];Wh(s,Ns,i,_u(i)),Oh(XT,s)}}function $T(i,s,l){i==="focusin"?(jh(),ws=s,Ns=l,ws.attachEvent("onpropertychange",ep)):i==="focusout"&&jh()}function ZT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return al(Ns)}function jT(i,s){if(i==="click")return al(s)}function eS(i,s){if(i==="input"||i==="change")return al(s)}function tS(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Lt=typeof Object.is=="function"?Object.is:tS;function bs(i,s){if(Lt(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!lu.call(s,p)||!Lt(i[p],s[p]))return!1}return!0}function tp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function np(i,s){var l=tp(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=s&&u>=s)return{node:l,offset:s-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=tp(l)}}function ip(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?ip(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function op(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=tl(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=tl(i.document)}return s}function Nu(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function nS(i,s){var l=op(s);s=i.focusedElem;var u=i.selectionRange;if(l!==s&&s&&s.ownerDocument&&ip(s.ownerDocument.documentElement,s)){if(u!==null&&Nu(s)){if(i=u.start,l=u.end,l===void 0&&(l=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(l,s.value.length);else if(l=(i=s.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var p=s.textContent.length,_=Math.min(u.start,p);u=u.end===void 0?_:Math.min(u.end,p),!l.extend&&_>u&&(p=u,u=_,_=p),p=np(s,_);var T=np(s,u);p&&T&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),l.removeAllRanges(),_>u?(l.addRange(i),l.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),l.addRange(i)))}}for(i=[],l=s;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)l=i[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var iS=An&&"documentMode"in document&&11>=document.documentMode,_o=null,bu=null,Ms=null,Mu=!1;function sp(i,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Mu||_o==null||_o!==tl(u)||(u=_o,"selectionStart"in u&&Nu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ms&&bs(Ms,u)||(Ms=u,u=zl(bu,"onSelect"),0<u.length&&(s=new rl("onSelect","select",null,s,l),i.push({event:s,listeners:u}),s.target=_o)))}function xi(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var yo={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionrun:xi("Transition","TransitionRun"),transitionstart:xi("Transition","TransitionStart"),transitioncancel:xi("Transition","TransitionCancel"),transitionend:xi("Transition","TransitionEnd")},xu={},rp={};An&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Di(i){if(xu[i])return xu[i];if(!yo[i])return i;var s=yo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in rp)return xu[i]=s[l];return i}var lp=Di("animationend"),ap=Di("animationiteration"),up=Di("animationstart"),oS=Di("transitionrun"),sS=Di("transitionstart"),rS=Di("transitioncancel"),cp=Di("transitionend"),fp=new Map,dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function tn(i,s){fp.set(i,s),bi(s,[i])}var qt=[],vo=0,Du=0;function ul(){for(var i=vo,s=Du=vo=0;s<i;){var l=qt[s];qt[s++]=null;var u=qt[s];qt[s++]=null;var p=qt[s];qt[s++]=null;var _=qt[s];if(qt[s++]=null,u!==null&&p!==null){var T=u.pending;T===null?p.next=p:(p.next=T.next,T.next=p),u.pending=p}_!==0&&hp(l,p,_)}}function cl(i,s,l,u){qt[vo++]=i,qt[vo++]=s,qt[vo++]=l,qt[vo++]=u,Du|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Uu(i,s,l,u){return cl(i,s,l,u),fl(i)}function Zn(i,s){return cl(i,null,null,s),fl(i)}function hp(i,s,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;p&&s!==null&&i.tag===3&&(_=i.stateNode,p=31-Ut(l),_=_.hiddenUpdates,i=_[p],i===null?_[p]=[s]:i.push(s),s.lane=l|536870912)}function fl(i){if(50<tr)throw tr=0,Gc=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Eo={},pp=new WeakMap;function Bt(i,s){if(typeof i=="object"&&i!==null){var l=pp.get(i);return l!==void 0?l:(s={value:i,source:s,stack:se(s)},pp.set(i,s),s)}return{value:i,source:s,stack:se(s)}}var To=[],So=0,dl=null,hl=0,zt=[],Yt=0,Ui=null,In=1,wn="";function Li(i,s){To[So++]=hl,To[So++]=dl,dl=i,hl=s}function mp(i,s,l){zt[Yt++]=In,zt[Yt++]=wn,zt[Yt++]=Ui,Ui=i;var u=In;i=wn;var p=32-Ut(u)-1;u&=~(1<<p),l+=1;var _=32-Ut(s)+p;if(30<_){var T=p-p%5;_=(u&(1<<T)-1).toString(32),u>>=T,p-=T,In=1<<32-Ut(s)+p|l<<p|u,wn=_+i}else In=1<<_|l<<p|u,wn=i}function Lu(i){i.return!==null&&(Li(i,1),mp(i,1,0))}function Pu(i){for(;i===dl;)dl=To[--So],To[So]=null,hl=To[--So],To[So]=null;for(;i===Ui;)Ui=zt[--Yt],zt[Yt]=null,wn=zt[--Yt],zt[Yt]=null,In=zt[--Yt],zt[Yt]=null}var St=null,pt=null,Ie=!1,nn=null,_n=!1,ku=Error(o(519));function Pi(i){var s=Error(o(418,""));throw Us(Bt(s,i)),ku}function gp(i){var s=i.stateNode,l=i.type,u=i.memoizedProps;switch(s[_t]=i,s[wt]=u,l){case"dialog":Se("cancel",s),Se("close",s);break;case"iframe":case"object":case"embed":Se("load",s);break;case"video":case"audio":for(l=0;l<ir.length;l++)Se(ir[l],s);break;case"source":Se("error",s);break;case"img":case"image":case"link":Se("error",s),Se("load",s);break;case"details":Se("toggle",s);break;case"input":Se("invalid",s),xh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),el(s);break;case"select":Se("invalid",s);break;case"textarea":Se("invalid",s),Uh(s,u.value,u.defaultValue,u.children),el(s)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||Rg(s.textContent,l)?(u.popover!=null&&(Se("beforetoggle",s),Se("toggle",s)),u.onScroll!=null&&Se("scroll",s),u.onScrollEnd!=null&&Se("scrollend",s),u.onClick!=null&&(s.onclick=Yl),s=!0):s=!1,s||Pi(i)}function _p(i){for(St=i.return;St;)switch(St.tag){case 3:case 27:_n=!0;return;case 5:case 13:_n=!1;return;default:St=St.return}}function xs(i){if(i!==St)return!1;if(!Ie)return _p(i),Ie=!0,!1;var s=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||nf(i.type,i.memoizedProps)),l=!l),l&&(s=!0),s&&pt&&Pi(i),_p(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(s===0){pt=sn(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;i=i.nextSibling}pt=null}}else pt=St?sn(i.stateNode.nextSibling):null;return!0}function Ds(){pt=St=null,Ie=!1}function Us(i){nn===null?nn=[i]:nn.push(i)}var Ls=Error(o(460)),yp=Error(o(474)),Ou={then:function(){}};function vp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function pl(){}function Ep(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(pl,pl),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===Ls?Error(o(483)):i;default:if(typeof s.status=="string")s.then(pl,pl);else{if(i=He,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===Ls?Error(o(483)):i}throw Ps=s,Ls}}var Ps=null;function Tp(){if(Ps===null)throw Error(o(459));var i=Ps;return Ps=null,i}var Co=null,ks=0;function ml(i){var s=ks;return ks+=1,Co===null&&(Co=[]),Ep(Co,i,s)}function Os(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function gl(i,s){throw s.$$typeof===a?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Sp(i){var s=i._init;return s(i._payload)}function Cp(i){function s(M,w){if(i){var D=M.deletions;D===null?(M.deletions=[w],M.flags|=16):D.push(w)}}function l(M,w){if(!i)return null;for(;w!==null;)s(M,w),w=w.sibling;return null}function u(M){for(var w=new Map;M!==null;)M.key!==null?w.set(M.key,M):w.set(M.index,M),M=M.sibling;return w}function p(M,w){return M=ci(M,w),M.index=0,M.sibling=null,M}function _(M,w,D){return M.index=D,i?(D=M.alternate,D!==null?(D=D.index,D<w?(M.flags|=33554434,w):D):(M.flags|=33554434,w)):(M.flags|=1048576,w)}function T(M){return i&&M.alternate===null&&(M.flags|=33554434),M}function S(M,w,D,H){return w===null||w.tag!==6?(w=xc(D,M.mode,H),w.return=M,w):(w=p(w,D),w.return=M,w)}function A(M,w,D,H){var j=D.type;return j===g?P(M,w,D.props.children,H,D.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===B&&Sp(j)===w.type)?(w=p(w,D.props),Os(w,D),w.return=M,w):(w=Ll(D.type,D.key,D.props,null,M.mode,H),Os(w,D),w.return=M,w)}function b(M,w,D,H){return w===null||w.tag!==4||w.stateNode.containerInfo!==D.containerInfo||w.stateNode.implementation!==D.implementation?(w=Dc(D,M.mode,H),w.return=M,w):(w=p(w,D.children||[]),w.return=M,w)}function P(M,w,D,H,j){return w===null||w.tag!==7?(w=Yi(D,M.mode,H,j),w.return=M,w):(w=p(w,D),w.return=M,w)}function F(M,w,D){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=xc(""+w,M.mode,D),w.return=M,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case c:return D=Ll(w.type,w.key,w.props,null,M.mode,D),Os(D,w),D.return=M,D;case h:return w=Dc(w,M.mode,D),w.return=M,w;case B:var H=w._init;return w=H(w._payload),F(M,w,D)}if(re(w)||G(w))return w=Yi(w,M.mode,D,null),w.return=M,w;if(typeof w.then=="function")return F(M,ml(w),D);if(w.$$typeof===C)return F(M,xl(M,w),D);gl(M,w)}return null}function U(M,w,D,H){var j=w!==null?w.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return j!==null?null:S(M,w,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case c:return D.key===j?A(M,w,D,H):null;case h:return D.key===j?b(M,w,D,H):null;case B:return j=D._init,D=j(D._payload),U(M,w,D,H)}if(re(D)||G(D))return j!==null?null:P(M,w,D,H,null);if(typeof D.then=="function")return U(M,w,ml(D),H);if(D.$$typeof===C)return U(M,w,xl(M,D),H);gl(M,D)}return null}function L(M,w,D,H,j){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return M=M.get(D)||null,S(w,M,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case c:return M=M.get(H.key===null?D:H.key)||null,A(w,M,H,j);case h:return M=M.get(H.key===null?D:H.key)||null,b(w,M,H,j);case B:var _e=H._init;return H=_e(H._payload),L(M,w,D,H,j)}if(re(H)||G(H))return M=M.get(D)||null,P(w,M,H,j,null);if(typeof H.then=="function")return L(M,w,D,ml(H),j);if(H.$$typeof===C)return L(M,w,D,xl(w,H),j);gl(w,H)}return null}function te(M,w,D,H){for(var j=null,_e=null,ie=w,le=w=0,lt=null;ie!==null&&le<D.length;le++){ie.index>le?(lt=ie,ie=null):lt=ie.sibling;var we=U(M,ie,D[le],H);if(we===null){ie===null&&(ie=lt);break}i&&ie&&we.alternate===null&&s(M,ie),w=_(we,w,le),_e===null?j=we:_e.sibling=we,_e=we,ie=lt}if(le===D.length)return l(M,ie),Ie&&Li(M,le),j;if(ie===null){for(;le<D.length;le++)ie=F(M,D[le],H),ie!==null&&(w=_(ie,w,le),_e===null?j=ie:_e.sibling=ie,_e=ie);return Ie&&Li(M,le),j}for(ie=u(ie);le<D.length;le++)lt=L(ie,M,le,D[le],H),lt!==null&&(i&&lt.alternate!==null&&ie.delete(lt.key===null?le:lt.key),w=_(lt,w,le),_e===null?j=lt:_e.sibling=lt,_e=lt);return i&&ie.forEach(function(_i){return s(M,_i)}),Ie&&Li(M,le),j}function de(M,w,D,H){if(D==null)throw Error(o(151));for(var j=null,_e=null,ie=w,le=w=0,lt=null,we=D.next();ie!==null&&!we.done;le++,we=D.next()){ie.index>le?(lt=ie,ie=null):lt=ie.sibling;var _i=U(M,ie,we.value,H);if(_i===null){ie===null&&(ie=lt);break}i&&ie&&_i.alternate===null&&s(M,ie),w=_(_i,w,le),_e===null?j=_i:_e.sibling=_i,_e=_i,ie=lt}if(we.done)return l(M,ie),Ie&&Li(M,le),j;if(ie===null){for(;!we.done;le++,we=D.next())we=F(M,we.value,H),we!==null&&(w=_(we,w,le),_e===null?j=we:_e.sibling=we,_e=we);return Ie&&Li(M,le),j}for(ie=u(ie);!we.done;le++,we=D.next())we=L(ie,M,le,we.value,H),we!==null&&(i&&we.alternate!==null&&ie.delete(we.key===null?le:we.key),w=_(we,w,le),_e===null?j=we:_e.sibling=we,_e=we);return i&&ie.forEach(function(EC){return s(M,EC)}),Ie&&Li(M,le),j}function We(M,w,D,H){if(typeof D=="object"&&D!==null&&D.type===g&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case c:e:{for(var j=D.key;w!==null;){if(w.key===j){if(j=D.type,j===g){if(w.tag===7){l(M,w.sibling),H=p(w,D.props.children),H.return=M,M=H;break e}}else if(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===B&&Sp(j)===w.type){l(M,w.sibling),H=p(w,D.props),Os(H,D),H.return=M,M=H;break e}l(M,w);break}else s(M,w);w=w.sibling}D.type===g?(H=Yi(D.props.children,M.mode,H,D.key),H.return=M,M=H):(H=Ll(D.type,D.key,D.props,null,M.mode,H),Os(H,D),H.return=M,M=H)}return T(M);case h:e:{for(j=D.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===D.containerInfo&&w.stateNode.implementation===D.implementation){l(M,w.sibling),H=p(w,D.children||[]),H.return=M,M=H;break e}else{l(M,w);break}else s(M,w);w=w.sibling}H=Dc(D,M.mode,H),H.return=M,M=H}return T(M);case B:return j=D._init,D=j(D._payload),We(M,w,D,H)}if(re(D))return te(M,w,D,H);if(G(D)){if(j=G(D),typeof j!="function")throw Error(o(150));return D=j.call(D),de(M,w,D,H)}if(typeof D.then=="function")return We(M,w,ml(D),H);if(D.$$typeof===C)return We(M,w,xl(M,D),H);gl(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,w!==null&&w.tag===6?(l(M,w.sibling),H=p(w,D),H.return=M,M=H):(l(M,w),H=xc(D,M.mode,H),H.return=M,M=H),T(M)):l(M,w)}return function(M,w,D,H){try{ks=0;var j=We(M,w,D,H);return Co=null,j}catch(ie){if(ie===Ls)throw ie;var _e=Wt(29,ie,null,M.mode);return _e.lanes=H,_e.return=M,_e}finally{}}}var ki=Cp(!0),Ap=Cp(!1),Ao=Me(null),_l=Me(0);function Rp(i,s){i=Hn,qe(_l,i),qe(Ao,s),Hn=i|s.baseLanes}function Hu(){qe(_l,Hn),qe(Ao,Ao.current)}function Gu(){Hn=_l.current,Ze(Ao),Ze(_l)}var Jt=Me(null),yn=null;function jn(i){var s=i.alternate;qe(nt,nt.current&1),qe(Jt,i),yn===null&&(s===null||Ao.current!==null||s.memoizedState!==null)&&(yn=i)}function Ip(i){if(i.tag===22){if(qe(nt,nt.current),qe(Jt,i),yn===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(yn=i)}}else ei()}function ei(){qe(nt,nt.current),qe(Jt,Jt.current)}function Nn(i){Ze(Jt),yn===i&&(yn=null),Ze(nt)}var nt=Me(0);function yl(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lS=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},aS=t.unstable_scheduleCallback,uS=t.unstable_NormalPriority,it={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vu(){return{controller:new lS,data:new Map,refCount:0}}function Hs(i){i.refCount--,i.refCount===0&&aS(uS,function(){i.controller.abort()})}var Gs=null,Fu=0,Ro=0,Io=null;function cS(i,s){if(Gs===null){var l=Gs=[];Fu=0,Ro=Kc(),Io={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Fu++,s.then(wp,wp),s}function wp(){if(--Fu===0&&Gs!==null){Io!==null&&(Io.status="fulfilled");var i=Gs;Gs=null,Ro=0,Io=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function fS(i,s){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Np=V.S;V.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&cS(i,s),Np!==null&&Np(i,s)};var Oi=Me(null);function qu(){var i=Oi.current;return i!==null?i:He.pooledCache}function vl(i,s){s===null?qe(Oi,Oi.current):qe(Oi,s.pool)}function bp(){var i=qu();return i===null?null:{parent:it._currentValue,pool:i}}var ti=0,me=null,Ue=null,je=null,El=!1,wo=!1,Hi=!1,Tl=0,Vs=0,No=null,dS=0;function Xe(){throw Error(o(321))}function Bu(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Lt(i[l],s[l]))return!1;return!0}function zu(i,s,l,u,p,_){return ti=_,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=i===null||i.memoizedState===null?Gi:ni,Hi=!1,_=l(u,p),Hi=!1,wo&&(_=xp(s,l,u,p)),Mp(i),_}function Mp(i){V.H=vn;var s=Ue!==null&&Ue.next!==null;if(ti=0,je=Ue=me=null,El=!1,Vs=0,No=null,s)throw Error(o(300));i===null||st||(i=i.dependencies,i!==null&&Ml(i)&&(st=!0))}function xp(i,s,l,u){me=i;var p=0;do{if(wo&&(No=null),Vs=0,wo=!1,25<=p)throw Error(o(301));if(p+=1,je=Ue=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}V.H=Vi,_=s(l,u)}while(wo);return _}function hS(){var i=V.H,s=i.useState()[0];return s=typeof s.then=="function"?Fs(s):s,i=i.useState()[0],(Ue!==null?Ue.memoizedState:null)!==i&&(me.flags|=1024),s}function Yu(){var i=Tl!==0;return Tl=0,i}function Ju(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Ku(i){if(El){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}El=!1}ti=0,je=Ue=me=null,wo=!1,Vs=Tl=0,No=null}function bt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?me.memoizedState=je=i:je=je.next=i,je}function et(){if(Ue===null){var i=me.alternate;i=i!==null?i.memoizedState:null}else i=Ue.next;var s=je===null?me.memoizedState:je.next;if(s!==null)je=s,Ue=i;else{if(i===null)throw me.alternate===null?Error(o(467)):Error(o(310));Ue=i,i={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},je===null?me.memoizedState=je=i:je=je.next=i}return je}var Sl;Sl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Fs(i){var s=Vs;return Vs+=1,No===null&&(No=[]),i=Ep(No,i,s),s=me,(je===null?s.memoizedState:je.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Gi:ni),i}function Cl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Fs(i);if(i.$$typeof===C)return yt(i)}throw Error(o(438,String(i)))}function Qu(i){var s=null,l=me.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Sl(),me.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),u=0;u<i;u++)l[u]=Q;return s.index++,l}function bn(i,s){return typeof s=="function"?s(i):s}function Al(i){var s=et();return Wu(s,Ue,i)}function Wu(i,s,l){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=l;var p=i.baseQueue,_=u.pending;if(_!==null){if(p!==null){var T=p.next;p.next=_.next,_.next=T}s.baseQueue=p=_,u.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{s=p.next;var S=T=null,A=null,b=s,P=!1;do{var F=b.lane&-536870913;if(F!==b.lane?(Re&F)===F:(ti&F)===F){var U=b.revertLane;if(U===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),F===Ro&&(P=!0);else if((ti&U)===U){b=b.next,U===Ro&&(P=!0);continue}else F={lane:0,revertLane:b.revertLane,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null},A===null?(S=A=F,T=_):A=A.next=F,me.lanes|=U,fi|=U;F=b.action,Hi&&l(_,F),_=b.hasEagerState?b.eagerState:l(_,F)}else U={lane:F,revertLane:b.revertLane,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null},A===null?(S=A=U,T=_):A=A.next=U,me.lanes|=F,fi|=F;b=b.next}while(b!==null&&b!==s);if(A===null?T=_:A.next=S,!Lt(_,i.memoizedState)&&(st=!0,P&&(l=Io,l!==null)))throw l;i.memoizedState=_,i.baseState=T,i.baseQueue=A,u.lastRenderedState=_}return p===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Xu(i){var s=et(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var u=l.dispatch,p=l.pending,_=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do _=i(_,T.action),T=T.next;while(T!==p);Lt(_,s.memoizedState)||(st=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,u]}function Dp(i,s,l){var u=me,p=et(),_=Ie;if(_){if(l===void 0)throw Error(o(407));l=l()}else l=s();var T=!Lt((Ue||p).memoizedState,l);if(T&&(p.memoizedState=l,st=!0),p=p.queue,ju(Pp.bind(null,u,p,i),[i]),p.getSnapshot!==s||T||je!==null&&je.memoizedState.tag&1){if(u.flags|=2048,bo(9,Lp.bind(null,u,p,l,s),{destroy:void 0},null),He===null)throw Error(o(349));_||(ti&60)!==0||Up(u,s,l)}return l}function Up(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=me.updateQueue,s===null?(s=Sl(),me.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function Lp(i,s,l,u){s.value=l,s.getSnapshot=u,kp(s)&&Op(i)}function Pp(i,s,l){return l(function(){kp(s)&&Op(i)})}function kp(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Lt(i,l)}catch{return!0}}function Op(i){var s=Zn(i,2);s!==null&&Ct(s,i,2)}function $u(i){var s=bt();if(typeof i=="function"){var l=i;if(i=l(),Hi){Wn(!0);try{l()}finally{Wn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:i},s}function Hp(i,s,l,u){return i.baseState=l,Wu(i,Ue,typeof u=="function"?u:bn)}function pS(i,s,l,u,p){if(wl(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};V.T!==null?l(!0):_.isTransition=!1,u(_),l=s.pending,l===null?(_.next=s.pending=_,Gp(s,_)):(_.next=l.next,s.pending=l.next=_)}}function Gp(i,s){var l=s.action,u=s.payload,p=i.state;if(s.isTransition){var _=V.T,T={};V.T=T;try{var S=l(p,u),A=V.S;A!==null&&A(T,S),Vp(i,s,S)}catch(b){Zu(i,s,b)}finally{V.T=_}}else try{_=l(p,u),Vp(i,s,_)}catch(b){Zu(i,s,b)}}function Vp(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Fp(i,s,u)},function(u){return Zu(i,s,u)}):Fp(i,s,l)}function Fp(i,s,l){s.status="fulfilled",s.value=l,qp(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,Gp(i,l)))}function Zu(i,s,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,qp(s),s=s.next;while(s!==u)}i.action=null}function qp(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Bp(i,s){return s}function zp(i,s){if(Ie){var l=He.formState;if(l!==null){e:{var u=me;if(Ie){if(pt){t:{for(var p=pt,_=_n;p.nodeType!==8;){if(!_){p=null;break t}if(p=sn(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){pt=sn(p.nextSibling),u=p.data==="F!";break e}}Pi(u)}u=!1}u&&(s=l[0])}}return l=bt(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bp,lastRenderedState:s},l.queue=u,l=am.bind(null,me,u),u.dispatch=l,u=$u(!1),_=oc.bind(null,me,!1,u.queue),u=bt(),p={state:s,dispatch:null,action:i,pending:null},u.queue=p,l=pS.bind(null,me,p,_,l),p.dispatch=l,u.memoizedState=i,[s,l,!1]}function Yp(i){var s=et();return Jp(s,Ue,i)}function Jp(i,s,l){s=Wu(i,s,Bp)[0],i=Al(bn)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Fs(s):s;var u=et(),p=u.queue,_=p.dispatch;return l!==u.memoizedState&&(me.flags|=2048,bo(9,mS.bind(null,p,l),{destroy:void 0},null)),[s,_,i]}function mS(i,s){i.action=s}function Kp(i){var s=et(),l=Ue;if(l!==null)return Jp(s,l,i);et(),s=s.memoizedState,l=et();var u=l.queue.dispatch;return l.memoizedState=i,[s,u,!1]}function bo(i,s,l,u){return i={tag:i,create:s,inst:l,deps:u,next:null},s=me.updateQueue,s===null&&(s=Sl(),me.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,s.lastEffect=i),i}function Qp(){return et().memoizedState}function Rl(i,s,l,u){var p=bt();me.flags|=i,p.memoizedState=bo(1|s,l,{destroy:void 0},u===void 0?null:u)}function Il(i,s,l,u){var p=et();u=u===void 0?null:u;var _=p.memoizedState.inst;Ue!==null&&u!==null&&Bu(u,Ue.memoizedState.deps)?p.memoizedState=bo(s,l,_,u):(me.flags|=i,p.memoizedState=bo(1|s,l,_,u))}function Wp(i,s){Rl(8390656,8,i,s)}function ju(i,s){Il(2048,8,i,s)}function Xp(i,s){return Il(4,2,i,s)}function $p(i,s){return Il(4,4,i,s)}function Zp(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function jp(i,s,l){l=l!=null?l.concat([i]):null,Il(4,4,Zp.bind(null,s,i),l)}function ec(){}function em(i,s){var l=et();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Bu(s,u[1])?u[0]:(l.memoizedState=[i,s],i)}function tm(i,s){var l=et();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Bu(s,u[1]))return u[0];if(u=i(),Hi){Wn(!0);try{i()}finally{Wn(!1)}}return l.memoizedState=[u,s],u}function tc(i,s,l){return l===void 0||(ti&1073741824)!==0?i.memoizedState=s:(i.memoizedState=l,i=ig(),me.lanes|=i,fi|=i,l)}function nm(i,s,l,u){return Lt(l,s)?l:Ao.current!==null?(i=tc(i,l,u),Lt(i,s)||(st=!0),i):(ti&42)===0?(st=!0,i.memoizedState=l):(i=ig(),me.lanes|=i,fi|=i,s)}function im(i,s,l,u,p){var _=Z.p;Z.p=_!==0&&8>_?_:8;var T=V.T,S={};V.T=S,oc(i,!1,s,l);try{var A=p(),b=V.S;if(b!==null&&b(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var P=fS(A,u);qs(i,s,P,Ht(i))}else qs(i,s,u,Ht(i))}catch(F){qs(i,s,{then:function(){},status:"rejected",reason:F},Ht())}finally{Z.p=_,V.T=T}}function gS(){}function nc(i,s,l,u){if(i.tag!==5)throw Error(o(476));var p=om(i).queue;im(i,p,s,Ae,l===null?gS:function(){return sm(i),l(u)})}function om(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:Ae},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function sm(i){var s=om(i).next.queue;qs(i,s,{},Ht())}function ic(){return yt(ar)}function rm(){return et().memoizedState}function lm(){return et().memoizedState}function _S(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=Ht();i=si(l);var u=ri(s,i,l);u!==null&&(Ct(u,s,l),Ys(u,s,l)),s={cache:Vu()},i.payload=s;return}s=s.return}}function yS(i,s,l){var u=Ht();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},wl(i)?um(s,l):(l=Uu(i,s,l,u),l!==null&&(Ct(l,i,u),cm(l,s,u)))}function am(i,s,l){var u=Ht();qs(i,s,l,u)}function qs(i,s,l,u){var p={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(wl(i))um(s,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var T=s.lastRenderedState,S=_(T,l);if(p.hasEagerState=!0,p.eagerState=S,Lt(S,T))return cl(i,s,p,0),He===null&&ul(),!1}catch{}finally{}if(l=Uu(i,s,p,u),l!==null)return Ct(l,i,u),cm(l,s,u),!0}return!1}function oc(i,s,l,u){if(u={lane:2,revertLane:Kc(),action:u,hasEagerState:!1,eagerState:null,next:null},wl(i)){if(s)throw Error(o(479))}else s=Uu(i,l,u,2),s!==null&&Ct(s,i,2)}function wl(i){var s=i.alternate;return i===me||s!==null&&s===me}function um(i,s){wo=El=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function cm(i,s,l){if((l&4194176)!==0){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,Th(i,l)}}var vn={readContext:yt,use:Cl,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe};vn.useCacheRefresh=Xe,vn.useMemoCache=Xe,vn.useHostTransitionStatus=Xe,vn.useFormState=Xe,vn.useActionState=Xe,vn.useOptimistic=Xe;var Gi={readContext:yt,use:Cl,useCallback:function(i,s){return bt().memoizedState=[i,s===void 0?null:s],i},useContext:yt,useEffect:Wp,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Rl(4194308,4,Zp.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Rl(4194308,4,i,s)},useInsertionEffect:function(i,s){Rl(4,2,i,s)},useMemo:function(i,s){var l=bt();s=s===void 0?null:s;var u=i();if(Hi){Wn(!0);try{i()}finally{Wn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(i,s,l){var u=bt();if(l!==void 0){var p=l(s);if(Hi){Wn(!0);try{l(s)}finally{Wn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},u.queue=i,i=i.dispatch=yS.bind(null,me,i),[u.memoizedState,i]},useRef:function(i){var s=bt();return i={current:i},s.memoizedState=i},useState:function(i){i=$u(i);var s=i.queue,l=am.bind(null,me,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:ec,useDeferredValue:function(i,s){var l=bt();return tc(l,i,s)},useTransition:function(){var i=$u(!1);return i=im.bind(null,me,i.queue,!0,!1),bt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var u=me,p=bt();if(Ie){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),He===null)throw Error(o(349));(Re&60)!==0||Up(u,s,l)}p.memoizedState=l;var _={value:l,getSnapshot:s};return p.queue=_,Wp(Pp.bind(null,u,_,i),[i]),u.flags|=2048,bo(9,Lp.bind(null,u,_,l,s),{destroy:void 0},null),l},useId:function(){var i=bt(),s=He.identifierPrefix;if(Ie){var l=wn,u=In;l=(u&~(1<<32-Ut(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=Tl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=dS++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},useCacheRefresh:function(){return bt().memoizedState=_S.bind(null,me)}};Gi.useMemoCache=Qu,Gi.useHostTransitionStatus=ic,Gi.useFormState=zp,Gi.useActionState=zp,Gi.useOptimistic=function(i){var s=bt();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=oc.bind(null,me,!0,l),l.dispatch=s,[i,s]};var ni={readContext:yt,use:Cl,useCallback:em,useContext:yt,useEffect:ju,useImperativeHandle:jp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:tm,useReducer:Al,useRef:Qp,useState:function(){return Al(bn)},useDebugValue:ec,useDeferredValue:function(i,s){var l=et();return nm(l,Ue.memoizedState,i,s)},useTransition:function(){var i=Al(bn)[0],s=et().memoizedState;return[typeof i=="boolean"?i:Fs(i),s]},useSyncExternalStore:Dp,useId:rm};ni.useCacheRefresh=lm,ni.useMemoCache=Qu,ni.useHostTransitionStatus=ic,ni.useFormState=Yp,ni.useActionState=Yp,ni.useOptimistic=function(i,s){var l=et();return Hp(l,Ue,i,s)};var Vi={readContext:yt,use:Cl,useCallback:em,useContext:yt,useEffect:ju,useImperativeHandle:jp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:tm,useReducer:Xu,useRef:Qp,useState:function(){return Xu(bn)},useDebugValue:ec,useDeferredValue:function(i,s){var l=et();return Ue===null?tc(l,i,s):nm(l,Ue.memoizedState,i,s)},useTransition:function(){var i=Xu(bn)[0],s=et().memoizedState;return[typeof i=="boolean"?i:Fs(i),s]},useSyncExternalStore:Dp,useId:rm};Vi.useCacheRefresh=lm,Vi.useMemoCache=Qu,Vi.useHostTransitionStatus=ic,Vi.useFormState=Kp,Vi.useActionState=Kp,Vi.useOptimistic=function(i,s){var l=et();return Ue!==null?Hp(l,Ue,i,s):(l.baseState=i,[i,l.queue.dispatch])};function sc(i,s,l,u){s=i.memoizedState,l=l(u,s),l=l==null?s:$({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var rc={isMounted:function(i){return(i=i._reactInternals)?ee(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var u=Ht(),p=si(u);p.payload=s,l!=null&&(p.callback=l),s=ri(i,p,u),s!==null&&(Ct(s,i,u),Ys(s,i,u))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var u=Ht(),p=si(u);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=ri(i,p,u),s!==null&&(Ct(s,i,u),Ys(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=Ht(),u=si(l);u.tag=2,s!=null&&(u.callback=s),s=ri(i,u,l),s!==null&&(Ct(s,i,l),Ys(s,i,l))}};function fm(i,s,l,u,p,_,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,T):s.prototype&&s.prototype.isPureReactComponent?!bs(l,u)||!bs(p,_):!0}function dm(i,s,l,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==i&&rc.enqueueReplaceState(s,s.state,null)}function Fi(i,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(i=i.defaultProps){l===s&&(l=$({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}var Nl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function hm(i){Nl(i)}function pm(i){console.error(i)}function mm(i){Nl(i)}function bl(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function gm(i,s,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function lc(i,s,l){return l=si(l),l.tag=3,l.payload={element:null},l.callback=function(){bl(i,s)},l}function _m(i){return i=si(i),i.tag=3,i}function ym(i,s,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=u.value;i.payload=function(){return p(_)},i.callback=function(){gm(s,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){gm(s,l,u),typeof p!="function"&&(di===null?di=new Set([this]):di.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function vS(i,s,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&zs(s,l,p,!0),l=Jt.current,l!==null){switch(l.tag){case 13:return yn===null?qc():l.alternate===null&&Qe===0&&(Qe=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===Ou?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),zc(i,u,p)),!1;case 22:return l.flags|=65536,u===Ou?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),zc(i,u,p)),!1}throw Error(o(435,l.tag))}return zc(i,u,p),qc(),!1}if(Ie)return s=Jt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==ku&&(i=Error(o(422),{cause:u}),Us(Bt(i,l)))):(u!==ku&&(s=Error(o(423),{cause:u}),Us(Bt(s,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,u=Bt(u,l),p=lc(i.stateNode,u,p),Sc(i,p),Qe!==4&&(Qe=2)),!1;var _=Error(o(520),{cause:u});if(_=Bt(_,l),js===null?js=[_]:js.push(_),Qe!==4&&(Qe=2),s===null)return!0;u=Bt(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=lc(l.stateNode,u,i),Sc(l,i),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(di===null||!di.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=_m(p),ym(p,i,l,u),Sc(l,p),!1}l=l.return}while(l!==null);return!1}var vm=Error(o(461)),st=!1;function mt(i,s,l,u){s.child=i===null?Ap(s,null,l,u):ki(s,i.child,l,u)}function Em(i,s,l,u,p){l=l.render;var _=s.ref;if("ref"in u){var T={};for(var S in u)S!=="ref"&&(T[S]=u[S])}else T=u;return Bi(s),u=zu(i,s,l,T,_,p),S=Yu(),i!==null&&!st?(Ju(i,s,p),Mn(i,s,p)):(Ie&&S&&Lu(s),s.flags|=1,mt(i,s,u,p),s.child)}function Tm(i,s,l,u,p){if(i===null){var _=l.type;return typeof _=="function"&&!Mc(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,Sm(i,s,_,u,p)):(i=Ll(l.type,null,u,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!gc(i,p)){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:bs,l(T,u)&&i.ref===s.ref)return Mn(i,s,p)}return s.flags|=1,i=ci(_,u),i.ref=s.ref,i.return=s,s.child=i}function Sm(i,s,l,u,p){if(i!==null){var _=i.memoizedProps;if(bs(_,u)&&i.ref===s.ref)if(st=!1,s.pendingProps=u=_,gc(i,p))(i.flags&131072)!==0&&(st=!0);else return s.lanes=i.lanes,Mn(i,s,p)}return ac(i,s,l,u,p)}function Cm(i,s,l){var u=s.pendingProps,p=u.children,_=(s.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(Bs(i,s),u.mode==="hidden"||_){if((s.flags&128)!==0){if(u=T!==null?T.baseLanes|l:l,i!==null){for(p=s.child=i.child,_=0;p!==null;)_=_|p.lanes|p.childLanes,p=p.sibling;s.childLanes=_&~u}else s.childLanes=0,s.child=null;return Am(i,s,u,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&vl(s,T!==null?T.cachePool:null),T!==null?Rp(s,T):Hu(),Ip(s);else return s.lanes=s.childLanes=536870912,Am(i,s,T!==null?T.baseLanes|l:l,l)}else T!==null?(vl(s,T.cachePool),Rp(s,T),ei(),s.memoizedState=null):(i!==null&&vl(s,null),Hu(),ei());return mt(i,s,p,l),s.child}function Am(i,s,l,u){var p=qu();return p=p===null?null:{parent:it._currentValue,pool:p},s.memoizedState={baseLanes:l,cachePool:p},i!==null&&vl(s,null),Hu(),Ip(s),i!==null&&zs(i,s,u,!0),null}function Bs(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(i===null||i.ref!==l)&&(s.flags|=2097664)}}function ac(i,s,l,u,p){return Bi(s),l=zu(i,s,l,u,void 0,p),u=Yu(),i!==null&&!st?(Ju(i,s,p),Mn(i,s,p)):(Ie&&u&&Lu(s),s.flags|=1,mt(i,s,l,p),s.child)}function Rm(i,s,l,u,p,_){return Bi(s),s.updateQueue=null,l=xp(s,u,l,p),Mp(i),u=Yu(),i!==null&&!st?(Ju(i,s,_),Mn(i,s,_)):(Ie&&u&&Lu(s),s.flags|=1,mt(i,s,l,_),s.child)}function Im(i,s,l,u,p){if(Bi(s),s.stateNode===null){var _=Eo,T=l.contextType;typeof T=="object"&&T!==null&&(_=yt(T)),_=new l(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=rc,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},Ec(s),T=l.contextType,_.context=typeof T=="object"&&T!==null?yt(T):Eo,_.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(sc(s,l,T,u),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&rc.enqueueReplaceState(_,_.state,null),Ks(s,u,_,p),Js(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var S=s.memoizedProps,A=Fi(l,S);_.props=A;var b=_.context,P=l.contextType;T=Eo,typeof P=="object"&&P!==null&&(T=yt(P));var F=l.getDerivedStateFromProps;P=typeof F=="function"||typeof _.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,P||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S||b!==T)&&dm(s,_,u,T),oi=!1;var U=s.memoizedState;_.state=U,Ks(s,u,_,p),Js(),b=s.memoizedState,S||U!==b||oi?(typeof F=="function"&&(sc(s,l,F,u),b=s.memoizedState),(A=oi||fm(s,l,A,u,U,b,T))?(P||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=b),_.props=u,_.state=b,_.context=T,u=A):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,Tc(i,s),T=s.memoizedProps,P=Fi(l,T),_.props=P,F=s.pendingProps,U=_.context,b=l.contextType,A=Eo,typeof b=="object"&&b!==null&&(A=yt(b)),S=l.getDerivedStateFromProps,(b=typeof S=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==F||U!==A)&&dm(s,_,u,A),oi=!1,U=s.memoizedState,_.state=U,Ks(s,u,_,p),Js();var L=s.memoizedState;T!==F||U!==L||oi||i!==null&&i.dependencies!==null&&Ml(i.dependencies)?(typeof S=="function"&&(sc(s,l,S,u),L=s.memoizedState),(P=oi||fm(s,l,P,u,U,L,A)||i!==null&&i.dependencies!==null&&Ml(i.dependencies))?(b||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,L,A),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,L,A)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=L),_.props=u,_.state=L,_.context=A,u=P):(typeof _.componentDidUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,Bs(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=ki(s,i.child,null,p),s.child=ki(s,null,l,p)):mt(i,s,l,p),s.memoizedState=_.state,i=s.child):i=Mn(i,s,p),i}function wm(i,s,l,u){return Ds(),s.flags|=256,mt(i,s,l,u),s.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(i){return{baseLanes:i,cachePool:bp()}}function fc(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=Xt),i}function Nm(i,s,l){var u=s.pendingProps,p=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=i!==null&&i.memoizedState===null?!1:(nt.current&2)!==0),T&&(p=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ie){if(p?jn(s):ei(),Ie){var S=pt,A;if(A=S){e:{for(A=S,S=_n;A.nodeType!==8;){if(!S){S=null;break e}if(A=sn(A.nextSibling),A===null){S=null;break e}}S=A}S!==null?(s.memoizedState={dehydrated:S,treeContext:Ui!==null?{id:In,overflow:wn}:null,retryLane:536870912},A=Wt(18,null,null,0),A.stateNode=S,A.return=s,s.child=A,St=s,pt=null,A=!0):A=!1}A||Pi(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?s.lanes=16:s.lanes=536870912,null;Nn(s)}return S=u.children,u=u.fallback,p?(ei(),p=s.mode,S=hc({mode:"hidden",children:S},p),u=Yi(u,p,l,null),S.return=s,u.return=s,S.sibling=u,s.child=S,p=s.child,p.memoizedState=cc(l),p.childLanes=fc(i,T,l),s.memoizedState=uc,u):(jn(s),dc(s,S))}if(A=i.memoizedState,A!==null&&(S=A.dehydrated,S!==null)){if(_)s.flags&256?(jn(s),s.flags&=-257,s=pc(i,s,l)):s.memoizedState!==null?(ei(),s.child=i.child,s.flags|=128,s=null):(ei(),p=u.fallback,S=s.mode,u=hc({mode:"visible",children:u.children},S),p=Yi(p,S,l,null),p.flags|=2,u.return=s,p.return=s,u.sibling=p,s.child=u,ki(s,i.child,null,l),u=s.child,u.memoizedState=cc(l),u.childLanes=fc(i,T,l),s.memoizedState=uc,s=p);else if(jn(s),S.data==="$!"){if(T=S.nextSibling&&S.nextSibling.dataset,T)var b=T.dgst;T=b,u=Error(o(419)),u.stack="",u.digest=T,Us({value:u,source:null,stack:null}),s=pc(i,s,l)}else if(st||zs(i,s,l,!1),T=(l&i.childLanes)!==0,st||T){if(T=He,T!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(T.suspendedLanes|l))!==0?0:u,u!==0&&u!==A.retryLane)throw A.retryLane=u,Zn(i,u),Ct(T,i,u),vm}S.data==="$?"||qc(),s=pc(i,s,l)}else S.data==="$?"?(s.flags|=128,s.child=i.child,s=LS.bind(null,i),S._reactRetry=s,s=null):(i=A.treeContext,pt=sn(S.nextSibling),St=s,Ie=!0,nn=null,_n=!1,i!==null&&(zt[Yt++]=In,zt[Yt++]=wn,zt[Yt++]=Ui,In=i.id,wn=i.overflow,Ui=s),s=dc(s,u.children),s.flags|=4096);return s}return p?(ei(),p=u.fallback,S=s.mode,A=i.child,b=A.sibling,u=ci(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&31457280,b!==null?p=ci(b,p):(p=Yi(p,S,l,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,u=p,p=s.child,S=i.child.memoizedState,S===null?S=cc(l):(A=S.cachePool,A!==null?(b=it._currentValue,A=A.parent!==b?{parent:b,pool:b}:A):A=bp(),S={baseLanes:S.baseLanes|l,cachePool:A}),p.memoizedState=S,p.childLanes=fc(i,T,l),s.memoizedState=uc,u):(jn(s),l=i.child,i=l.sibling,l=ci(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=l,s.memoizedState=null,l)}function dc(i,s){return s=hc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function hc(i,s){return eg(i,s,0,null)}function pc(i,s,l){return ki(s,i.child,null,l),i=dc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function bm(i,s,l){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),yc(i.return,s,l)}function mc(i,s,l,u,p){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=l,_.tailMode=p)}function Mm(i,s,l){var u=s.pendingProps,p=u.revealOrder,_=u.tail;if(mt(i,s,u.children,l),u=nt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bm(i,l,s);else if(i.tag===19)bm(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(qe(nt,u),p){case"forwards":for(l=s.child,p=null;l!==null;)i=l.alternate,i!==null&&yl(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),mc(s,!1,p,l,_);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&yl(i)===null){s.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}mc(s,!0,l,null,_);break;case"together":mc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mn(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),fi|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(zs(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,l=ci(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=ci(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function gc(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Ml(i)))}function ES(i,s,l){switch(s.tag){case 3:Jr(s,s.stateNode.containerInfo),ii(s,it,i.memoizedState.cache),Ds();break;case 27:case 5:ru(s);break;case 4:Jr(s,s.stateNode.containerInfo);break;case 10:ii(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(jn(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Nm(i,s,l):(jn(s),i=Mn(i,s,l),i!==null?i.sibling:null);jn(s);break;case 19:var p=(i.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(zs(i,s,l,!1),u=(l&s.childLanes)!==0),p){if(u)return Mm(i,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),qe(nt,nt.current),u)break;return null;case 22:case 23:return s.lanes=0,Cm(i,s,l);case 24:ii(s,it,i.memoizedState.cache)}return Mn(i,s,l)}function xm(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)st=!0;else{if(!gc(i,l)&&(s.flags&128)===0)return st=!1,ES(i,s,l);st=(i.flags&131072)!==0}else st=!1,Ie&&(s.flags&1048576)!==0&&mp(s,hl,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var u=s.elementType,p=u._init;if(u=p(u._payload),s.type=u,typeof u=="function")Mc(u)?(i=Fi(u,i),s.tag=1,s=Im(null,s,u,i,l)):(s.tag=0,s=ac(null,s,u,i,l));else{if(u!=null){if(p=u.$$typeof,p===R){s.tag=11,s=Em(null,s,u,i,l);break e}else if(p===O){s.tag=14,s=Tm(null,s,u,i,l);break e}}throw s=Ce(u)||u,Error(o(306,s,""))}}return s;case 0:return ac(i,s,s.type,s.pendingProps,l);case 1:return u=s.type,p=Fi(u,s.pendingProps),Im(i,s,u,p,l);case 3:e:{if(Jr(s,s.stateNode.containerInfo),i===null)throw Error(o(387));var _=s.pendingProps;p=s.memoizedState,u=p.element,Tc(i,s),Ks(s,_,null,l);var T=s.memoizedState;if(_=T.cache,ii(s,it,_),_!==p.cache&&vc(s,[it],l,!0),Js(),_=T.element,p.isDehydrated)if(p={element:_,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=wm(i,s,_,l);break e}else if(_!==u){u=Bt(Error(o(424)),s),Us(u),s=wm(i,s,_,l);break e}else for(pt=sn(s.stateNode.containerInfo.firstChild),St=s,Ie=!0,nn=null,_n=!0,l=Ap(s,null,_,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ds(),_===u){s=Mn(i,s,l);break e}mt(i,s,_,l)}s=s.child}return s;case 26:return Bs(i,s),i===null?(l=Lg(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ie||(l=s.type,i=s.pendingProps,u=Jl(Qn.current).createElement(l),u[_t]=s,u[wt]=i,gt(u,l,i),ot(u),s.stateNode=u):s.memoizedState=Lg(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ru(s),i===null&&Ie&&(u=s.stateNode=xg(s.type,s.pendingProps,Qn.current),St=s,_n=!0,pt=sn(u.firstChild)),u=s.pendingProps.children,i!==null||Ie?mt(i,s,u,l):s.child=ki(s,null,u,l),Bs(i,s),s.child;case 5:return i===null&&Ie&&((p=u=pt)&&(u=XS(u,s.type,s.pendingProps,_n),u!==null?(s.stateNode=u,St=s,pt=sn(u.firstChild),_n=!1,p=!0):p=!1),p||Pi(s)),ru(s),p=s.type,_=s.pendingProps,T=i!==null?i.memoizedProps:null,u=_.children,nf(p,_)?u=null:T!==null&&nf(p,T)&&(s.flags|=32),s.memoizedState!==null&&(p=zu(i,s,hS,null,null,l),ar._currentValue=p),Bs(i,s),mt(i,s,u,l),s.child;case 6:return i===null&&Ie&&((i=l=pt)&&(l=$S(l,s.pendingProps,_n),l!==null?(s.stateNode=l,St=s,pt=null,i=!0):i=!1),i||Pi(s)),null;case 13:return Nm(i,s,l);case 4:return Jr(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=ki(s,null,u,l):mt(i,s,u,l),s.child;case 11:return Em(i,s,s.type,s.pendingProps,l);case 7:return mt(i,s,s.pendingProps,l),s.child;case 8:return mt(i,s,s.pendingProps.children,l),s.child;case 12:return mt(i,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,ii(s,s.type,u.value),mt(i,s,u.children,l),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,Bi(s),p=yt(p),u=u(p),s.flags|=1,mt(i,s,u,l),s.child;case 14:return Tm(i,s,s.type,s.pendingProps,l);case 15:return Sm(i,s,s.type,s.pendingProps,l);case 19:return Mm(i,s,l);case 22:return Cm(i,s,l);case 24:return Bi(s),u=yt(it),i===null?(p=qu(),p===null&&(p=He,_=Vu(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),s.memoizedState={parent:u,cache:p},Ec(s),ii(s,it,p)):((i.lanes&l)!==0&&(Tc(i,s),Ks(s,null,null,l),Js()),p=i.memoizedState,_=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),ii(s,it,u)):(u=_.cache,ii(s,it,u),u!==p.cache&&vc(s,[it],l,!0))),mt(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}var _c=Me(null),qi=null,xn=null;function ii(i,s,l){qe(_c,s._currentValue),s._currentValue=l}function Dn(i){i._currentValue=_c.current,Ze(_c)}function yc(i,s,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===l)break;i=i.return}}function vc(i,s,l,u){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var T=p.child;_=_.firstContext;e:for(;_!==null;){var S=_;_=p;for(var A=0;A<s.length;A++)if(S.context===s[A]){_.lanes|=l,S=_.alternate,S!==null&&(S.lanes|=l),yc(_.return,l,i),u||(T=null);break e}_=S.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(o(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),yc(T,l,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function zs(i,s,l,u){i=null;for(var p=s,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var S=p.type;Lt(p.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(p===Yr.current){if(T=p.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(ar):i=[ar])}p=p.return}i!==null&&vc(s,i,l,u),s.flags|=262144}function Ml(i){for(i=i.firstContext;i!==null;){if(!Lt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Bi(i){qi=i,xn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yt(i){return Dm(qi,i)}function xl(i,s){return qi===null&&Bi(i),Dm(i,s)}function Dm(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},xn===null){if(i===null)throw Error(o(308));xn=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else xn=xn.next=s;return l}var oi=!1;function Ec(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function si(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ri(i,s,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ze&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=fl(i),hp(i,null,l),s}return cl(i,u,s,l),fl(i)}function Ys(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,Th(i,l)}}function Sc(i,s){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?p=_=s:_=_.next=s}else p=_=s;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Cc=!1;function Js(){if(Cc){var i=Io;if(i!==null)throw i}}function Ks(i,s,l,u){Cc=!1;var p=i.updateQueue;oi=!1;var _=p.firstBaseUpdate,T=p.lastBaseUpdate,S=p.shared.pending;if(S!==null){p.shared.pending=null;var A=S,b=A.next;A.next=null,T===null?_=b:T.next=b,T=A;var P=i.alternate;P!==null&&(P=P.updateQueue,S=P.lastBaseUpdate,S!==T&&(S===null?P.firstBaseUpdate=b:S.next=b,P.lastBaseUpdate=A))}if(_!==null){var F=p.baseState;T=0,P=b=A=null,S=_;do{var U=S.lane&-536870913,L=U!==S.lane;if(L?(Re&U)===U:(u&U)===U){U!==0&&U===Ro&&(Cc=!0),P!==null&&(P=P.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var te=i,de=S;U=s;var We=l;switch(de.tag){case 1:if(te=de.payload,typeof te=="function"){F=te.call(We,F,U);break e}F=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=de.payload,U=typeof te=="function"?te.call(We,F,U):te,U==null)break e;F=$({},F,U);break e;case 2:oi=!0}}U=S.callback,U!==null&&(i.flags|=64,L&&(i.flags|=8192),L=p.callbacks,L===null?p.callbacks=[U]:L.push(U))}else L={lane:U,tag:S.tag,payload:S.payload,callback:S.callback,next:null},P===null?(b=P=L,A=F):P=P.next=L,T|=U;if(S=S.next,S===null){if(S=p.shared.pending,S===null)break;L=S,S=L.next,L.next=null,p.lastBaseUpdate=L,p.shared.pending=null}}while(!0);P===null&&(A=F),p.baseState=A,p.firstBaseUpdate=b,p.lastBaseUpdate=P,_===null&&(p.shared.lanes=0),fi|=T,i.lanes=T,i.memoizedState=F}}function Um(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Lm(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Um(l[i],s)}function Qs(i,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&i)===i){u=void 0;var _=l.create,T=l.inst;u=_(),T.destroy=u}l=l.next}while(l!==p)}}catch(S){ke(s,s.return,S)}}function li(i,s,l){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var _=p.next;u=_;do{if((u.tag&i)===i){var T=u.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,p=s;var A=l;try{S()}catch(b){ke(p,A,b)}}}u=u.next}while(u!==_)}}catch(b){ke(s,s.return,b)}}function Pm(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{Lm(s,l)}catch(u){ke(i,i.return,u)}}}function km(i,s,l){l.props=Fi(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){ke(i,s,u)}}function zi(i,s){try{var l=i.ref;if(l!==null){var u=i.stateNode;switch(i.tag){case 26:case 27:case 5:var p=u;break;default:p=u}typeof l=="function"?i.refCleanup=l(p):l.current=p}}catch(_){ke(i,s,_)}}function Pt(i,s){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){ke(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){ke(i,s,p)}else l.current=null}function Om(i){var s=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){ke(i,i.return,p)}}function Hm(i,s,l){try{var u=i.stateNode;YS(u,i.type,l,s),u[wt]=s}catch(p){ke(i,i.return,p)}}function Gm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Ac(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Rc(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Yl));else if(u!==4&&u!==27&&(i=i.child,i!==null))for(Rc(i,s,l),i=i.sibling;i!==null;)Rc(i,s,l),i=i.sibling}function Dl(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(u!==4&&u!==27&&(i=i.child,i!==null))for(Dl(i,s,l),i=i.sibling;i!==null;)Dl(i,s,l),i=i.sibling}var Un=!1,Ke=!1,Ic=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,rt=null,Fm=!1;function TS(i,s){if(i=i.containerInfo,ef=Zl,i=op(i),Nu(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,S=-1,A=-1,b=0,P=0,F=i,U=null;t:for(;;){for(var L;F!==l||p!==0&&F.nodeType!==3||(S=T+p),F!==_||u!==0&&F.nodeType!==3||(A=T+u),F.nodeType===3&&(T+=F.nodeValue.length),(L=F.firstChild)!==null;)U=F,F=L;for(;;){if(F===i)break t;if(U===l&&++b===p&&(S=T),U===_&&++P===u&&(A=T),(L=F.nextSibling)!==null)break;F=U,U=F.parentNode}F=L}l=S===-1||A===-1?null:{start:S,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(tf={focusedElem:i,selectionRange:l},Zl=!1,rt=s;rt!==null;)if(s=rt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,rt=i;else for(;rt!==null;){switch(s=rt,_=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=s,p=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var te=Fi(l.type,p,l.elementType===l.type);i=u.getSnapshotBeforeUpdate(te,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(de){ke(l,l.return,de)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)rf(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,rt=i;break}rt=s.return}return te=Fm,Fm=!1,te}function qm(i,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Pn(i,l),u&4&&Qs(5,l);break;case 1:if(Pn(i,l),u&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(S){ke(l,l.return,S)}else{var p=Fi(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ke(l,l.return,S)}}u&64&&Pm(l),u&512&&zi(l,l.return);break;case 3:if(Pn(i,l),u&64&&(u=l.updateQueue,u!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Lm(u,i)}catch(S){ke(l,l.return,S)}}break;case 26:Pn(i,l),u&512&&zi(l,l.return);break;case 27:case 5:Pn(i,l),s===null&&u&4&&Om(l),u&512&&zi(l,l.return);break;case 12:Pn(i,l);break;case 13:Pn(i,l),u&4&&Ym(i,l);break;case 22:if(p=l.memoizedState!==null||Un,!p){s=s!==null&&s.memoizedState!==null||Ke;var _=Un,T=Ke;Un=p,(Ke=s)&&!T?ai(i,l,(l.subtreeFlags&8772)!==0):Pn(i,l),Un=_,Ke=T}u&512&&(l.memoizedProps.mode==="manual"?zi(l,l.return):Pt(l,l.return));break;default:Pn(i,l)}}function Bm(i){var s=i.alternate;s!==null&&(i.alternate=null,Bm(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&du(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var tt=null,kt=!1;function Ln(i,s,l){for(l=l.child;l!==null;)zm(i,s,l),l=l.sibling}function zm(i,s,l){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(_s,l)}catch{}switch(l.tag){case 26:Ke||Pt(l,s),Ln(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ke||Pt(l,s);var u=tt,p=kt;for(tt=l.stateNode,Ln(i,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);du(l),tt=u,kt=p;break;case 5:Ke||Pt(l,s);case 6:p=tt;var _=kt;if(tt=null,Ln(i,s,l),tt=p,kt=_,tt!==null)if(kt)try{i=tt,u=l.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)}catch(T){ke(l,s,T)}else try{tt.removeChild(l.stateNode)}catch(T){ke(l,s,T)}break;case 18:tt!==null&&(kt?(s=tt,l=l.stateNode,s.nodeType===8?sf(s.parentNode,l):s.nodeType===1&&sf(s,l),dr(s)):sf(tt,l.stateNode));break;case 4:u=tt,p=kt,tt=l.stateNode.containerInfo,kt=!0,Ln(i,s,l),tt=u,kt=p;break;case 0:case 11:case 14:case 15:Ke||li(2,l,s),Ke||li(4,l,s),Ln(i,s,l);break;case 1:Ke||(Pt(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&km(l,s,u)),Ln(i,s,l);break;case 21:Ln(i,s,l);break;case 22:Ke||Pt(l,s),Ke=(u=Ke)||l.memoizedState!==null,Ln(i,s,l),Ke=u;break;default:Ln(i,s,l)}}function Ym(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{dr(i)}catch(l){ke(s,s.return,l)}}function SS(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Vm),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Vm),s;default:throw Error(o(435,i.tag))}}function wc(i,s){var l=SS(i);s.forEach(function(u){var p=PS.bind(null,i,u);l.has(u)||(l.add(u),u.then(p,p))})}function Kt(i,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],_=i,T=s,S=T;e:for(;S!==null;){switch(S.tag){case 27:case 5:tt=S.stateNode,kt=!1;break e;case 3:tt=S.stateNode.containerInfo,kt=!0;break e;case 4:tt=S.stateNode.containerInfo,kt=!0;break e}S=S.return}if(tt===null)throw Error(o(160));zm(_,T,p),tt=null,kt=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Jm(s,i),s=s.sibling}var on=null;function Jm(i,s){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Kt(s,i),Qt(i),u&4&&(li(3,i,i.return),Qs(3,i),li(5,i,i.return));break;case 1:Kt(s,i),Qt(i),u&512&&(Ke||l===null||Pt(l,l.return)),u&64&&Un&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=on;if(Kt(s,i),Qt(i),u&512&&(Ke||l===null||Pt(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":_=p.getElementsByTagName("title")[0],(!_||_[Es]||_[_t]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(u),p.head.insertBefore(_,p.querySelector("head > title"))),gt(_,u,l),_[_t]=i,ot(_),u=_;break e;case"link":var T=Og("link","href",p).get(u+(l.href||""));if(T){for(var S=0;S<T.length;S++)if(_=T[S],_.getAttribute("href")===(l.href==null?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(S,1);break t}}_=p.createElement(u),gt(_,u,l),p.head.appendChild(_);break;case"meta":if(T=Og("meta","content",p).get(u+(l.content||""))){for(S=0;S<T.length;S++)if(_=T[S],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(S,1);break t}}_=p.createElement(u),gt(_,u,l),p.head.appendChild(_);break;default:throw Error(o(468,u))}_[_t]=i,ot(_),u=_}i.stateNode=u}else Hg(p,i.type,i.stateNode);else i.stateNode=kg(p,u,i.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?Hg(p,i.type,i.stateNode):kg(p,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Hm(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&i.alternate===null){p=i.stateNode,_=i.memoizedProps;try{for(var A=p.firstChild;A;){var b=A.nextSibling,P=A.nodeName;A[Es]||P==="HEAD"||P==="BODY"||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&A.rel.toLowerCase()==="stylesheet"||p.removeChild(A),A=b}for(var F=i.type,U=p.attributes;U.length;)p.removeAttributeNode(U[0]);gt(p,F,_),p[_t]=i,p[wt]=_}catch(te){ke(i,i.return,te)}}case 5:if(Kt(s,i),Qt(i),u&512&&(Ke||l===null||Pt(l,l.return)),i.flags&32){p=i.stateNode;try{ho(p,"")}catch(te){ke(i,i.return,te)}}u&4&&i.stateNode!=null&&(p=i.memoizedProps,Hm(i,p,l!==null?l.memoizedProps:p)),u&1024&&(Ic=!0);break;case 6:if(Kt(s,i),Qt(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(te){ke(i,i.return,te)}}break;case 3:if(Wl=null,p=on,on=Kl(s.containerInfo),Kt(s,i),on=p,Qt(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{dr(s.containerInfo)}catch(te){ke(i,i.return,te)}Ic&&(Ic=!1,Km(i));break;case 4:u=on,on=Kl(i.stateNode.containerInfo),Kt(s,i),Qt(i),on=u;break;case 12:Kt(s,i),Qt(i);break;case 13:Kt(s,i),Qt(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(kc=gn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,wc(i,u)));break;case 22:if(u&512&&(Ke||l===null||Pt(l,l.return)),A=i.memoizedState!==null,b=l!==null&&l.memoizedState!==null,P=Un,F=Ke,Un=P||A,Ke=F||b,Kt(s,i),Ke=F,Un=P,Qt(i),s=i.stateNode,s._current=i,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,u&8192&&(s._visibility=A?s._visibility&-2:s._visibility|1,A&&(s=Un||Ke,l===null||b||s||Mo(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,s=i;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){b=l=s;try{if(p=b.stateNode,A)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=b.stateNode,S=b.memoizedProps.style;var L=S!=null&&S.hasOwnProperty("display")?S.display:null;T.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(te){ke(b,b.return,te)}}}else if(s.tag===6){if(l===null){b=s;try{b.stateNode.nodeValue=A?"":b.memoizedProps}catch(te){ke(b,b.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,wc(i,l))));break;case 19:Kt(s,i),Qt(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,wc(i,u)));break;case 21:break;default:Kt(s,i),Qt(i)}}function Qt(i){var s=i.flags;if(s&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(Gm(l)){var u=l;break e}l=l.return}throw Error(o(160))}switch(u.tag){case 27:var p=u.stateNode,_=Ac(i);Dl(i,_,p);break;case 5:var T=u.stateNode;u.flags&32&&(ho(T,""),u.flags&=-33);var S=Ac(i);Dl(i,S,T);break;case 3:case 4:var A=u.stateNode.containerInfo,b=Ac(i);Rc(i,b,A);break;default:throw Error(o(161))}}}catch(P){ke(i,i.return,P)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Km(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Km(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Pn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qm(i,s.alternate,s),s=s.sibling}function Mo(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:li(4,s,s.return),Mo(s);break;case 1:Pt(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&km(s,s.return,l),Mo(s);break;case 26:case 27:case 5:Pt(s,s.return),Mo(s);break;case 22:Pt(s,s.return),s.memoizedState===null&&Mo(s);break;default:Mo(s)}i=i.sibling}}function ai(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=i,_=s,T=_.flags;switch(_.tag){case 0:case 11:case 15:ai(p,_,l),Qs(4,_);break;case 1:if(ai(p,_,l),u=_,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(b){ke(u,u.return,b)}if(u=_,p=u.updateQueue,p!==null){var S=u.stateNode;try{var A=p.shared.hiddenCallbacks;if(A!==null)for(p.shared.hiddenCallbacks=null,p=0;p<A.length;p++)Um(A[p],S)}catch(b){ke(u,u.return,b)}}l&&T&64&&Pm(_),zi(_,_.return);break;case 26:case 27:case 5:ai(p,_,l),l&&u===null&&T&4&&Om(_),zi(_,_.return);break;case 12:ai(p,_,l);break;case 13:ai(p,_,l),l&&T&4&&Ym(p,_);break;case 22:_.memoizedState===null&&ai(p,_,l),zi(_,_.return);break;default:ai(p,_,l)}s=s.sibling}}function Nc(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Hs(l))}function bc(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hs(i))}function ui(i,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Qm(i,s,l,u),s=s.sibling}function Qm(i,s,l,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:ui(i,s,l,u),p&2048&&Qs(9,s);break;case 3:ui(i,s,l,u),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hs(i)));break;case 12:if(p&2048){ui(i,s,l,u),i=s.stateNode;try{var _=s.memoizedProps,T=_.id,S=_.onPostCommit;typeof S=="function"&&S(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){ke(s,s.return,A)}}else ui(i,s,l,u);break;case 23:break;case 22:_=s.stateNode,s.memoizedState!==null?_._visibility&4?ui(i,s,l,u):Ws(i,s):_._visibility&4?ui(i,s,l,u):(_._visibility|=4,xo(i,s,l,u,(s.subtreeFlags&10256)!==0)),p&2048&&Nc(s.alternate,s);break;case 24:ui(i,s,l,u),p&2048&&bc(s.alternate,s);break;default:ui(i,s,l,u)}}function xo(i,s,l,u,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=i,T=s,S=l,A=u,b=T.flags;switch(T.tag){case 0:case 11:case 15:xo(_,T,S,A,p),Qs(8,T);break;case 23:break;case 22:var P=T.stateNode;T.memoizedState!==null?P._visibility&4?xo(_,T,S,A,p):Ws(_,T):(P._visibility|=4,xo(_,T,S,A,p)),p&&b&2048&&Nc(T.alternate,T);break;case 24:xo(_,T,S,A,p),p&&b&2048&&bc(T.alternate,T);break;default:xo(_,T,S,A,p)}s=s.sibling}}function Ws(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,u=s,p=u.flags;switch(u.tag){case 22:Ws(l,u),p&2048&&Nc(u.alternate,u);break;case 24:Ws(l,u),p&2048&&bc(u.alternate,u);break;default:Ws(l,u)}s=s.sibling}}var Xs=8192;function Do(i){if(i.subtreeFlags&Xs)for(i=i.child;i!==null;)Wm(i),i=i.sibling}function Wm(i){switch(i.tag){case 26:Do(i),i.flags&Xs&&i.memoizedState!==null&&cC(on,i.memoizedState,i.memoizedProps);break;case 5:Do(i);break;case 3:case 4:var s=on;on=Kl(i.stateNode.containerInfo),Do(i),on=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Xs,Xs=16777216,Do(i),Xs=s):Do(i));break;default:Do(i)}}function Xm(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function $s(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];rt=u,Zm(u,i)}Xm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$m(i),i=i.sibling}function $m(i){switch(i.tag){case 0:case 11:case 15:$s(i),i.flags&2048&&li(9,i,i.return);break;case 3:$s(i);break;case 12:$s(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&4&&(i.return===null||i.return.tag!==13)?(s._visibility&=-5,Ul(i)):$s(i);break;default:$s(i)}}function Ul(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];rt=u,Zm(u,i)}Xm(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:li(8,s,s.return),Ul(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,Ul(s));break;default:Ul(s)}i=i.sibling}}function Zm(i,s){for(;rt!==null;){var l=rt;switch(l.tag){case 0:case 11:case 15:li(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hs(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,rt=u;else e:for(l=i;rt!==null;){u=rt;var p=u.sibling,_=u.return;if(Bm(u),u===l){rt=null;break e}if(p!==null){p.return=_,rt=p;break e}rt=_}}}function CS(i,s,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(i,s,l,u){return new CS(i,s,l,u)}function Mc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ci(i,s){var l=i.alternate;return l===null?(l=Wt(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function jm(i,s){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Ll(i,s,l,u,p,_){var T=0;if(u=i,typeof i=="function")Mc(i)&&(T=1);else if(typeof i=="string")T=aC(i,l,mn.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case g:return Yi(l.children,p,_,s);case m:T=8,p|=24;break;case y:return i=Wt(12,l,s,p|2),i.elementType=y,i.lanes=_,i;case x:return i=Wt(13,l,s,p),i.elementType=x,i.lanes=_,i;case N:return i=Wt(19,l,s,p),i.elementType=N,i.lanes=_,i;case q:return eg(l,p,_,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case C:T=10;break e;case v:T=9;break e;case R:T=11;break e;case O:T=14;break e;case B:T=16,u=null;break e}T=29,l=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=Wt(T,l,s,p),s.elementType=i,s.type=u,s.lanes=_,s}function Yi(i,s,l,u){return i=Wt(7,i,u,s),i.lanes=l,i}function eg(i,s,l,u){i=Wt(22,i,u,s),i.elementType=q,i.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=p._current;if(_===null)throw Error(o(456));if((p._pendingVisibility&2)===0){var T=Zn(_,2);T!==null&&(p._pendingVisibility|=2,Ct(T,_,2))}},attach:function(){var _=p._current;if(_===null)throw Error(o(456));if((p._pendingVisibility&2)!==0){var T=Zn(_,2);T!==null&&(p._pendingVisibility&=-3,Ct(T,_,2))}}};return i.stateNode=p,i}function xc(i,s,l){return i=Wt(6,i,null,s),i.lanes=l,i}function Dc(i,s,l){return s=Wt(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function kn(i){i.flags|=4}function tg(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Gg(s)){if(s=Jt.current,s!==null&&((Re&4194176)===Re?yn!==null:(Re&62914560)!==Re&&(Re&536870912)===0||s!==yn))throw Ps=Ou,yp;i.flags|=8192}}function Pl(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?vh():536870912,i.lanes|=s,Lo|=s)}function Zs(i,s){if(!Ie)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Be(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(s)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&31457280,u|=p.flags&31457280,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=u,i.childLanes=l,s}function AS(i,s,l){var u=s.pendingProps;switch(Pu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(s),null;case 1:return Be(s),null;case 3:return l=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Dn(it),ro(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(xs(s)?kn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nn!==null&&(Vc(nn),nn=null))),Be(s),null;case 26:return l=s.memoizedState,i===null?(kn(s),l!==null?(Be(s),tg(s,l)):(Be(s),s.flags&=-16777217)):l?l!==i.memoizedState?(kn(s),Be(s),tg(s,l)):(Be(s),s.flags&=-16777217):(i.memoizedProps!==u&&kn(s),Be(s),s.flags&=-16777217),null;case 27:Kr(s),l=Qn.current;var p=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&kn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Be(s),null}i=mn.current,xs(s)?gp(s):(i=xg(p,u,l),s.stateNode=i,kn(s))}return Be(s),null;case 5:if(Kr(s),l=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&kn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Be(s),null}if(i=mn.current,xs(s))gp(s);else{switch(p=Jl(Qn.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?p.createElement(l,{is:u.is}):p.createElement(l)}}i[_t]=s,i[wt]=u;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=i;e:switch(gt(i,l,u),l){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&kn(s)}}return Be(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&kn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Qn.current,xs(s)){if(i=s.stateNode,l=s.memoizedProps,u=null,p=St,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}i[_t]=s,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Rg(i.nodeValue,l)),i||Pi(s)}else i=Jl(i).createTextNode(u),i[_t]=s,s.stateNode=i}return Be(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=xs(s),u!==null&&u.dehydrated!==null){if(i===null){if(!p)throw Error(o(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[_t]=s}else Ds(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Be(s),p=!1}else nn!==null&&(Vc(nn),nn=null),p=!0;if(!p)return s.flags&256?(Nn(s),s):(Nn(s),null)}if(Nn(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=u!==null,i=i!==null&&i.memoizedState!==null,l){u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var _=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==p&&(u.flags|=2048)}return l!==i&&l&&(s.child.flags|=8192),Pl(s,s.updateQueue),Be(s),null;case 4:return ro(),i===null&&$c(s.stateNode.containerInfo),Be(s),null;case 10:return Dn(s.type),Be(s),null;case 19:if(Ze(nt),p=s.memoizedState,p===null)return Be(s),null;if(u=(s.flags&128)!==0,_=p.rendering,_===null)if(u)Zs(p,!1);else{if(Qe!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=yl(i),_!==null){for(s.flags|=128,Zs(p,!1),i=_.updateQueue,s.updateQueue=i,Pl(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)jm(l,i),l=l.sibling;return qe(nt,nt.current&1|2),s.child}i=i.sibling}p.tail!==null&&gn()>kl&&(s.flags|=128,u=!0,Zs(p,!1),s.lanes=4194304)}else{if(!u)if(i=yl(_),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,Pl(s,i),Zs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ie)return Be(s),null}else 2*gn()-p.renderingStartTime>kl&&l!==536870912&&(s.flags|=128,u=!0,Zs(p,!1),s.lanes=4194304);p.isBackwards?(_.sibling=s.child,s.child=_):(i=p.last,i!==null?i.sibling=_:s.child=_,p.last=_)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=gn(),s.sibling=null,i=nt.current,qe(nt,u?i&1|2:i&1),s):(Be(s),null);case 22:case 23:return Nn(s),Gu(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Be(s),s.subtreeFlags&6&&(s.flags|=8192)):Be(s),l=s.updateQueue,l!==null&&Pl(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),i!==null&&Ze(Oi),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Dn(it),Be(s),null;case 25:return null}throw Error(o(156,s.tag))}function RS(i,s){switch(Pu(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Dn(it),ro(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Kr(s),null;case 13:if(Nn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ds()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return ro(),null;case 10:return Dn(s.type),null;case 22:case 23:return Nn(s),Gu(),i!==null&&Ze(Oi),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Dn(it),null;case 25:return null;default:return null}}function ng(i,s){switch(Pu(s),s.tag){case 3:Dn(it),ro();break;case 26:case 27:case 5:Kr(s);break;case 4:ro();break;case 13:Nn(s);break;case 19:Ze(nt);break;case 10:Dn(s.type);break;case 22:case 23:Nn(s),Gu(),i!==null&&Ze(Oi);break;case 24:Dn(it)}}var IS={getCacheForType:function(i){var s=yt(it),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l}},wS=typeof WeakMap=="function"?WeakMap:Map,ze=0,He=null,Te=null,Re=0,Ge=0,Ot=null,On=!1,Uo=!1,Uc=!1,Hn=0,Qe=0,fi=0,Ji=0,Lc=0,Xt=0,Lo=0,js=null,En=null,Pc=!1,kc=0,kl=1/0,Ol=null,di=null,Hl=!1,Ki=null,er=0,Oc=0,Hc=null,tr=0,Gc=null;function Ht(){if((ze&2)!==0&&Re!==0)return Re&-Re;if(V.T!==null){var i=Ro;return i!==0?i:Kc()}return Ch()}function ig(){Xt===0&&(Xt=(Re&536870912)===0||Ie?yh():536870912);var i=Jt.current;return i!==null&&(i.flags|=32),Xt}function Ct(i,s,l){(i===He&&Ge===2||i.cancelPendingCommit!==null)&&(Po(i,0),Gn(i,Re,Xt,!1)),vs(i,l),((ze&2)===0||i!==He)&&(i===He&&((ze&2)===0&&(Ji|=l),Qe===4&&Gn(i,Re,Xt,!1)),Tn(i))}function og(i,s,l){if((ze&6)!==0)throw Error(o(327));var u=!l&&(s&60)===0&&(s&i.expiredLanes)===0||ys(i,s),p=u?MS(i,s):Bc(i,s,!0),_=u;do{if(p===0){Uo&&!u&&Gn(i,s,0,!1);break}else if(p===6)Gn(i,s,0,!On);else{if(l=i.current.alternate,_&&!NS(l)){p=Bc(i,s,!1),_=!1;continue}if(p===2){if(_=s,i.errorRecoveryDisabledLanes&_)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var S=i;p=js;var A=S.current.memoizedState.isDehydrated;if(A&&(Po(S,T).flags|=256),T=Bc(S,T,!1),T!==2){if(Uc&&!A){S.errorRecoveryDisabledLanes|=_,Ji|=_,p=4;break e}_=En,En=p,_!==null&&Vc(_)}p=T}if(_=!1,p!==2)continue}}if(p===1){Po(i,0),Gn(i,s,0,!0);break}e:{switch(u=i,p){case 0:case 1:throw Error(o(345));case 4:if((s&4194176)===s){Gn(u,s,Xt,!On);break e}break;case 2:En=null;break;case 3:case 5:break;default:throw Error(o(329))}if(u.finishedWork=l,u.finishedLanes=s,(s&62914560)===s&&(_=kc+300-gn(),10<_)){if(Gn(u,s,Xt,!On),$r(u,0)!==0)break e;u.timeoutHandle=Ng(sg.bind(null,u,l,En,Ol,Pc,s,Xt,Ji,Lo,On,2,-0,0),_);break e}sg(u,l,En,Ol,Pc,s,Xt,Ji,Lo,On,0,-0,0)}}break}while(!0);Tn(i)}function Vc(i){En===null?En=i:En.push.apply(En,i)}function sg(i,s,l,u,p,_,T,S,A,b,P,F,U){var L=s.subtreeFlags;if((L&8192||(L&16785408)===16785408)&&(lr={stylesheets:null,count:0,unsuspend:uC},Wm(s),s=fC(),s!==null)){i.cancelPendingCommit=s(dg.bind(null,i,l,u,p,T,S,A,1,F,U)),Gn(i,_,T,!b);return}dg(i,l,u,p,T,S,A,P,F,U)}function NS(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],_=p.getSnapshot;p=p.value;try{if(!Lt(_(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gn(i,s,l,u){s&=~Lc,s&=~Ji,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var p=s;0<p;){var _=31-Ut(p),T=1<<_;u[_]=-1,p&=~T}l!==0&&Eh(i,l,s)}function Gl(){return(ze&6)===0?(nr(0),!1):!0}function Fc(){if(Te!==null){if(Ge===0)var i=Te.return;else i=Te,xn=qi=null,Ku(i),Co=null,ks=0,i=Te;for(;i!==null;)ng(i.alternate,i),i=i.return;Te=null}}function Po(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,KS(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Fc(),He=i,Te=l=ci(i.current,null),Re=s,Ge=0,Ot=null,On=!1,Uo=ys(i,s),Uc=!1,Lo=Xt=Lc=Ji=fi=Qe=0,En=js=null,Pc=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var p=31-Ut(u),_=1<<p;s|=i[p],u&=~_}return Hn=s,ul(),l}function rg(i,s){me=null,V.H=vn,s===Ls?(s=Tp(),Ge=3):s===yp?(s=Tp(),Ge=4):Ge=s===vm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ot=s,Te===null&&(Qe=1,bl(i,Bt(s,i.current)))}function lg(){var i=V.H;return V.H=vn,i===null?vn:i}function ag(){var i=V.A;return V.A=IS,i}function qc(){Qe=4,On||(Re&4194176)!==Re&&Jt.current!==null||(Uo=!0),(fi&134217727)===0&&(Ji&134217727)===0||He===null||Gn(He,Re,Xt,!1)}function Bc(i,s,l){var u=ze;ze|=2;var p=lg(),_=ag();(He!==i||Re!==s)&&(Ol=null,Po(i,s)),s=!1;var T=Qe;e:do try{if(Ge!==0&&Te!==null){var S=Te,A=Ot;switch(Ge){case 8:Fc(),T=6;break e;case 3:case 2:case 6:Jt.current===null&&(s=!0);var b=Ge;if(Ge=0,Ot=null,ko(i,S,A,b),l&&Uo){T=0;break e}break;default:b=Ge,Ge=0,Ot=null,ko(i,S,A,b)}}bS(),T=Qe;break}catch(P){rg(i,P)}while(!0);return s&&i.shellSuspendCounter++,xn=qi=null,ze=u,V.H=p,V.A=_,Te===null&&(He=null,Re=0,ul()),T}function bS(){for(;Te!==null;)ug(Te)}function MS(i,s){var l=ze;ze|=2;var u=lg(),p=ag();He!==i||Re!==s?(Ol=null,kl=gn()+500,Po(i,s)):Uo=ys(i,s);e:do try{if(Ge!==0&&Te!==null){s=Te;var _=Ot;t:switch(Ge){case 1:Ge=0,Ot=null,ko(i,s,_,1);break;case 2:if(vp(_)){Ge=0,Ot=null,cg(s);break}s=function(){Ge===2&&He===i&&(Ge=7),Tn(i)},_.then(s,s);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:vp(_)?(Ge=0,Ot=null,cg(s)):(Ge=0,Ot=null,ko(i,s,_,7));break;case 5:var T=null;switch(Te.tag){case 26:T=Te.memoizedState;case 5:case 27:var S=Te;if(!T||Gg(T)){Ge=0,Ot=null;var A=S.sibling;if(A!==null)Te=A;else{var b=S.return;b!==null?(Te=b,Vl(b)):Te=null}break t}}Ge=0,Ot=null,ko(i,s,_,5);break;case 6:Ge=0,Ot=null,ko(i,s,_,6);break;case 8:Fc(),Qe=6;break e;default:throw Error(o(462))}}xS();break}catch(P){rg(i,P)}while(!0);return xn=qi=null,V.H=u,V.A=p,ze=l,Te!==null?0:(He=null,Re=0,ul(),Qe)}function xS(){for(;Te!==null&&!jE();)ug(Te)}function ug(i){var s=xm(i.alternate,i,Hn);i.memoizedProps=i.pendingProps,s===null?Vl(i):Te=s}function cg(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=Rm(l,s,s.pendingProps,s.type,void 0,Re);break;case 11:s=Rm(l,s,s.pendingProps,s.type.render,s.ref,Re);break;case 5:Ku(s);default:ng(l,s),s=Te=jm(s,Hn),s=xm(l,s,Hn)}i.memoizedProps=i.pendingProps,s===null?Vl(i):Te=s}function ko(i,s,l,u){xn=qi=null,Ku(s),Co=null,ks=0;var p=s.return;try{if(vS(i,p,s,l,Re)){Qe=1,bl(i,Bt(l,i.current)),Te=null;return}}catch(_){if(p!==null)throw Te=p,_;Qe=1,bl(i,Bt(l,i.current)),Te=null;return}s.flags&32768?(Ie||u===1?i=!0:Uo||(Re&536870912)!==0?i=!1:(On=i=!0,(u===2||u===3||u===6)&&(u=Jt.current,u!==null&&u.tag===13&&(u.flags|=16384))),fg(s,i)):Vl(s)}function Vl(i){var s=i;do{if((s.flags&32768)!==0){fg(s,On);return}i=s.return;var l=AS(s.alternate,s,Hn);if(l!==null){Te=l;return}if(s=s.sibling,s!==null){Te=s;return}Te=s=i}while(s!==null);Qe===0&&(Qe=5)}function fg(i,s){do{var l=RS(i.alternate,i);if(l!==null){l.flags&=32767,Te=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){Te=i;return}Te=i=l}while(i!==null);Qe=6,Te=null}function dg(i,s,l,u,p,_,T,S,A,b){var P=V.T,F=Z.p;try{Z.p=2,V.T=null,DS(i,s,l,u,F,p,_,T,S,A,b)}finally{V.T=P,Z.p=F}}function DS(i,s,l,u,p,_,T,S){do Oo();while(Ki!==null);if((ze&6)!==0)throw Error(o(327));var A=i.finishedWork;if(u=i.finishedLanes,A===null)return null;if(i.finishedWork=null,i.finishedLanes=0,A===i.current)throw Error(o(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var b=A.lanes|A.childLanes;if(b|=Du,cT(i,u,b,_,T,S),i===He&&(Te=He=null,Re=0),(A.subtreeFlags&10256)===0&&(A.flags&10256)===0||Hl||(Hl=!0,Oc=b,Hc=l,kS(Qr,function(){return Oo(),null})),l=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||l?(l=V.T,V.T=null,_=Z.p,Z.p=2,T=ze,ze|=4,TS(i,A),Jm(A,i),nS(tf,i.containerInfo),Zl=!!ef,tf=ef=null,i.current=A,qm(i,A.alternate,A),eT(),ze=T,Z.p=_,V.T=l):i.current=A,Hl?(Hl=!1,Ki=i,er=u):hg(i,b),b=i.pendingLanes,b===0&&(di=null),sT(A.stateNode),Tn(i),s!==null)for(p=i.onRecoverableError,A=0;A<s.length;A++)b=s[A],p(b.value,{componentStack:b.stack});return(er&3)!==0&&Oo(),b=i.pendingLanes,(u&4194218)!==0&&(b&42)!==0?i===Gc?tr++:(tr=0,Gc=i):tr=0,nr(0),null}function hg(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Hs(s)))}function Oo(){if(Ki!==null){var i=Ki,s=Oc;Oc=0;var l=Sh(er),u=V.T,p=Z.p;try{if(Z.p=32>l?32:l,V.T=null,Ki===null)var _=!1;else{l=Hc,Hc=null;var T=Ki,S=er;if(Ki=null,er=0,(ze&6)!==0)throw Error(o(331));var A=ze;if(ze|=4,$m(T.current),Qm(T,T.current,S,l),ze=A,nr(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(_s,T)}catch{}_=!0}return _}finally{Z.p=p,V.T=u,hg(i,s)}}return!1}function pg(i,s,l){s=Bt(l,s),s=lc(i.stateNode,s,2),i=ri(i,s,2),i!==null&&(vs(i,2),Tn(i))}function ke(i,s,l){if(i.tag===3)pg(i,i,l);else for(;s!==null;){if(s.tag===3){pg(s,i,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(di===null||!di.has(u))){i=Bt(l,i),l=_m(2),u=ri(s,l,2),u!==null&&(ym(l,u,s,i),vs(u,2),Tn(u));break}}s=s.return}}function zc(i,s,l){var u=i.pingCache;if(u===null){u=i.pingCache=new wS;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(l)||(Uc=!0,p.add(l),i=US.bind(null,i,s,l),s.then(i,i))}function US(i,s,l){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,He===i&&(Re&l)===l&&(Qe===4||Qe===3&&(Re&62914560)===Re&&300>gn()-kc?(ze&2)===0&&Po(i,0):Lc|=l,Lo===Re&&(Lo=0)),Tn(i)}function mg(i,s){s===0&&(s=vh()),i=Zn(i,s),i!==null&&(vs(i,s),Tn(i))}function LS(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),mg(i,l)}function PS(i,s){var l=0;switch(i.tag){case 13:var u=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),mg(i,l)}function kS(i,s){return au(i,s)}var Fl=null,Ho=null,Yc=!1,ql=!1,Jc=!1,Qi=0;function Tn(i){i!==Ho&&i.next===null&&(Ho===null?Fl=Ho=i:Ho=Ho.next=i),ql=!0,Yc||(Yc=!0,HS(OS))}function nr(i,s){if(!Jc&&ql){Jc=!0;do for(var l=!1,u=Fl;u!==null;){if(i!==0){var p=u.pendingLanes;if(p===0)var _=0;else{var T=u.suspendedLanes,S=u.pingedLanes;_=(1<<31-Ut(42|i)+1)-1,_&=p&~(T&~S),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(l=!0,yg(u,_))}else _=Re,_=$r(u,u===He?_:0),(_&3)===0||ys(u,_)||(l=!0,yg(u,_));u=u.next}while(l);Jc=!1}}function OS(){ql=Yc=!1;var i=0;Qi!==0&&(JS()&&(i=Qi),Qi=0);for(var s=gn(),l=null,u=Fl;u!==null;){var p=u.next,_=gg(u,s);_===0?(u.next=null,l===null?Fl=p:l.next=p,p===null&&(Ho=l)):(l=u,(i!==0||(_&3)!==0)&&(ql=!0)),u=p}nr(i)}function gg(i,s){for(var l=i.suspendedLanes,u=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var T=31-Ut(_),S=1<<T,A=p[T];A===-1?((S&l)===0||(S&u)!==0)&&(p[T]=uT(S,s)):A<=s&&(i.expiredLanes|=S),_&=~S}if(s=He,l=Re,l=$r(i,i===s?l:0),u=i.callbackNode,l===0||i===s&&Ge===2||i.cancelPendingCommit!==null)return u!==null&&u!==null&&uu(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||ys(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(u!==null&&uu(u),Sh(l)){case 2:case 8:l=gh;break;case 32:l=Qr;break;case 268435456:l=_h;break;default:l=Qr}return u=_g.bind(null,i),l=au(l,u),i.callbackPriority=s,i.callbackNode=l,s}return u!==null&&u!==null&&uu(u),i.callbackPriority=2,i.callbackNode=null,2}function _g(i,s){var l=i.callbackNode;if(Oo()&&i.callbackNode!==l)return null;var u=Re;return u=$r(i,i===He?u:0),u===0?null:(og(i,u,s),gg(i,gn()),i.callbackNode!=null&&i.callbackNode===l?_g.bind(null,i):null)}function yg(i,s){if(Oo())return null;og(i,s,!0)}function HS(i){QS(function(){(ze&6)!==0?au(mh,i):i()})}function Kc(){return Qi===0&&(Qi=yh()),Qi}function vg(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:nl(""+i)}function Eg(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function GS(i,s,l,u,p){if(s==="submit"&&l&&l.stateNode===p){var _=vg((p[wt]||null).action),T=u.submitter;T&&(s=(s=T[wt]||null)?vg(s.formAction):T.getAttribute("formAction"),s!==null&&(_=s,T=null));var S=new rl("action","action",null,u,p);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qi!==0){var A=T?Eg(p,T):new FormData(p);nc(l,{pending:!0,data:A,method:p.method,action:_},null,A)}}else typeof _=="function"&&(S.preventDefault(),A=T?Eg(p,T):new FormData(p),nc(l,{pending:!0,data:A,method:p.method,action:_},_,A))},currentTarget:p}]})}}for(var Qc=0;Qc<dp.length;Qc++){var Wc=dp[Qc],VS=Wc.toLowerCase(),FS=Wc[0].toUpperCase()+Wc.slice(1);tn(VS,"on"+FS)}tn(lp,"onAnimationEnd"),tn(ap,"onAnimationIteration"),tn(up,"onAnimationStart"),tn("dblclick","onDoubleClick"),tn("focusin","onFocus"),tn("focusout","onBlur"),tn(oS,"onTransitionRun"),tn(sS,"onTransitionStart"),tn(rS,"onTransitionCancel"),tn(cp,"onTransitionEnd"),co("onMouseEnter",["mouseout","mouseover"]),co("onMouseLeave",["mouseout","mouseover"]),co("onPointerEnter",["pointerout","pointerover"]),co("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ir));function Tg(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],p=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var T=u.length-1;0<=T;T--){var S=u[T],A=S.instance,b=S.currentTarget;if(S=S.listener,A!==_&&p.isPropagationStopped())break e;_=S,p.currentTarget=b;try{_(p)}catch(P){Nl(P)}p.currentTarget=null,_=A}else for(T=0;T<u.length;T++){if(S=u[T],A=S.instance,b=S.currentTarget,S=S.listener,A!==_&&p.isPropagationStopped())break e;_=S,p.currentTarget=b;try{_(p)}catch(P){Nl(P)}p.currentTarget=null,_=A}}}}function Se(i,s){var l=s[fu];l===void 0&&(l=s[fu]=new Set);var u=i+"__bubble";l.has(u)||(Sg(s,i,2,!1),l.add(u))}function Xc(i,s,l){var u=0;s&&(u|=4),Sg(l,i,u,s)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function $c(i){if(!i[Bl]){i[Bl]=!0,Rh.forEach(function(l){l!=="selectionchange"&&(qS.has(l)||Xc(l,!1,i),Xc(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Bl]||(s[Bl]=!0,Xc("selectionchange",!1,s))}}function Sg(i,s,l,u){switch(Yg(s)){case 2:var p=pC;break;case 8:p=mC;break;default:p=ff}l=p.bind(null,s,l,i),p=void 0,!vu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?i.addEventListener(s,l,{capture:!0,passive:p}):i.addEventListener(s,l,!0):p!==void 0?i.addEventListener(s,l,{passive:p}):i.addEventListener(s,l,!1)}function Zc(i,s,l,u,p){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var S=u.stateNode.containerInfo;if(S===p||S.nodeType===8&&S.parentNode===p)break;if(T===4)for(T=u.return;T!==null;){var A=T.tag;if((A===3||A===4)&&(A=T.stateNode.containerInfo,A===p||A.nodeType===8&&A.parentNode===p))return;T=T.return}for(;S!==null;){if(T=Ni(S),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){u=_=T;continue e}S=S.parentNode}}u=u.return}Oh(function(){var b=_,P=_u(l),F=[];e:{var U=fp.get(i);if(U!==void 0){var L=rl,te=i;switch(i){case"keypress":if(ol(l)===0)break e;case"keydown":case"keyup":L=PT;break;case"focusin":te="focus",L=Cu;break;case"focusout":te="blur",L=Cu;break;case"beforeblur":case"afterblur":L=Cu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=CT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=HT;break;case lp:case ap:case up:L=IT;break;case cp:L=VT;break;case"scroll":case"scrollend":L=TT;break;case"wheel":L=qT;break;case"copy":case"cut":case"paste":L=NT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=qh;break;case"toggle":case"beforetoggle":L=zT}var de=(s&4)!==0,We=!de&&(i==="scroll"||i==="scrollend"),M=de?U!==null?U+"Capture":null:U;de=[];for(var w=b,D;w!==null;){var H=w;if(D=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||D===null||M===null||(H=Ss(w,M),H!=null&&de.push(or(w,H,D))),We)break;w=w.return}0<de.length&&(U=new L(U,te,null,l,P),F.push({event:U,listeners:de}))}}if((s&7)===0){e:{if(U=i==="mouseover"||i==="pointerover",L=i==="mouseout"||i==="pointerout",U&&l!==gu&&(te=l.relatedTarget||l.fromElement)&&(Ni(te)||te[lo]))break e;if((L||U)&&(U=P.window===P?P:(U=P.ownerDocument)?U.defaultView||U.parentWindow:window,L?(te=l.relatedTarget||l.toElement,L=b,te=te?Ni(te):null,te!==null&&(We=ee(te),de=te.tag,te!==We||de!==5&&de!==27&&de!==6)&&(te=null)):(L=null,te=b),L!==te)){if(de=Vh,H="onMouseLeave",M="onMouseEnter",w="mouse",(i==="pointerout"||i==="pointerover")&&(de=qh,H="onPointerLeave",M="onPointerEnter",w="pointer"),We=L==null?U:Ts(L),D=te==null?U:Ts(te),U=new de(H,w+"leave",L,l,P),U.target=We,U.relatedTarget=D,H=null,Ni(P)===b&&(de=new de(M,w+"enter",te,l,P),de.target=D,de.relatedTarget=We,H=de),We=H,L&&te)t:{for(de=L,M=te,w=0,D=de;D;D=Go(D))w++;for(D=0,H=M;H;H=Go(H))D++;for(;0<w-D;)de=Go(de),w--;for(;0<D-w;)M=Go(M),D--;for(;w--;){if(de===M||M!==null&&de===M.alternate)break t;de=Go(de),M=Go(M)}de=null}else de=null;L!==null&&Cg(F,U,L,de,!1),te!==null&&We!==null&&Cg(F,We,te,de,!0)}}e:{if(U=b?Ts(b):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var j=Xh;else if(Qh(U))if($h)j=eS;else{j=ZT;var _e=$T}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?b&&mu(b.elementType)&&(j=Xh):j=jT;if(j&&(j=j(i,b))){Wh(F,j,l,P);break e}_e&&_e(i,U,b),i==="focusout"&&b&&U.type==="number"&&b.memoizedProps.value!=null&&pu(U,"number",U.value)}switch(_e=b?Ts(b):window,i){case"focusin":(Qh(_e)||_e.contentEditable==="true")&&(_o=_e,bu=b,Ms=null);break;case"focusout":Ms=bu=_o=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,sp(F,l,P);break;case"selectionchange":if(iS)break;case"keydown":case"keyup":sp(F,l,P)}var ie;if(Ru)e:{switch(i){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else go?Jh(i,l)&&(le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(le="onCompositionStart");le&&(Bh&&l.locale!=="ko"&&(go||le!=="onCompositionStart"?le==="onCompositionEnd"&&go&&(ie=Hh()):($n=P,Eu="value"in $n?$n.value:$n.textContent,go=!0)),_e=zl(b,le),0<_e.length&&(le=new Fh(le,i,null,l,P),F.push({event:le,listeners:_e}),ie?le.data=ie:(ie=Kh(l),ie!==null&&(le.data=ie)))),(ie=JT?KT(i,l):QT(i,l))&&(le=zl(b,"onBeforeInput"),0<le.length&&(_e=new Fh("onBeforeInput","beforeinput",null,l,P),F.push({event:_e,listeners:le}),_e.data=ie)),GS(F,i,b,l,P)}Tg(F,s)})}function or(i,s,l){return{instance:i,listener:s,currentTarget:l}}function zl(i,s){for(var l=s+"Capture",u=[];i!==null;){var p=i,_=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Ss(i,l),p!=null&&u.unshift(or(i,p,_)),p=Ss(i,s),p!=null&&u.push(or(i,p,_))),i=i.return}return u}function Go(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Cg(i,s,l,u,p){for(var _=s._reactName,T=[];l!==null&&l!==u;){var S=l,A=S.alternate,b=S.stateNode;if(S=S.tag,A!==null&&A===u)break;S!==5&&S!==26&&S!==27||b===null||(A=b,p?(b=Ss(l,_),b!=null&&T.unshift(or(l,b,A))):p||(b=Ss(l,_),b!=null&&T.push(or(l,b,A)))),l=l.return}T.length!==0&&i.push({event:s,listeners:T})}var BS=/\r\n?/g,zS=/\u0000|\uFFFD/g;function Ag(i){return(typeof i=="string"?i:""+i).replace(BS,`
`).replace(zS,"")}function Rg(i,s){return s=Ag(s),Ag(i)===s}function Yl(){}function Le(i,s,l,u,p,_){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ho(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ho(i,""+u);break;case"className":jr(i,"class",u);break;case"tabIndex":jr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":jr(i,l,u);break;case"style":Ph(i,u,_);break;case"data":if(s!=="object"){jr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=nl(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Le(i,s,"name",p.name,p,null),Le(i,s,"formEncType",p.formEncType,p,null),Le(i,s,"formMethod",p.formMethod,p,null),Le(i,s,"formTarget",p.formTarget,p,null)):(Le(i,s,"encType",p.encType,p,null),Le(i,s,"method",p.method,p,null),Le(i,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=nl(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=Yl);break;case"onScroll":u!=null&&Se("scroll",i);break;case"onScrollEnd":u!=null&&Se("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=nl(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Se("beforetoggle",i),Se("toggle",i),Zr(i,"popover",u);break;case"xlinkActuate":Rn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Rn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Rn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Rn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Rn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Rn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Rn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Rn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Rn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vT.get(l)||l,Zr(i,l,u))}}function jc(i,s,l,u,p,_){switch(l){case"style":Ph(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"children":typeof u=="string"?ho(i,u):(typeof u=="number"||typeof u=="bigint")&&ho(i,""+u);break;case"onScroll":u!=null&&Se("scroll",i);break;case"onScrollEnd":u!=null&&Se("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ih.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),_=i[wt]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(s,_,p),typeof u=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,u,p);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):Zr(i,l,u)}}}function gt(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",i),Se("load",i);var u=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var T=l[_];if(T!=null)switch(_){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Le(i,s,_,T,l,null)}}p&&Le(i,s,"srcSet",l.srcSet,l,null),u&&Le(i,s,"src",l.src,l,null);return;case"input":Se("invalid",i);var S=_=T=p=null,A=null,b=null;for(u in l)if(l.hasOwnProperty(u)){var P=l[u];if(P!=null)switch(u){case"name":p=P;break;case"type":T=P;break;case"checked":A=P;break;case"defaultChecked":b=P;break;case"value":_=P;break;case"defaultValue":S=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,s));break;default:Le(i,s,u,P,l,null)}}xh(i,_,S,A,b,T,p,!1),el(i);return;case"select":Se("invalid",i),u=T=_=null;for(p in l)if(l.hasOwnProperty(p)&&(S=l[p],S!=null))switch(p){case"value":_=S;break;case"defaultValue":T=S;break;case"multiple":u=S;default:Le(i,s,p,S,l,null)}s=_,l=T,i.multiple=!!u,s!=null?fo(i,!!u,s,!1):l!=null&&fo(i,!!u,l,!0);return;case"textarea":Se("invalid",i),_=p=u=null;for(T in l)if(l.hasOwnProperty(T)&&(S=l[T],S!=null))switch(T){case"value":u=S;break;case"defaultValue":p=S;break;case"children":_=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Le(i,s,T,S,l,null)}Uh(i,u,p,_),el(i);return;case"option":for(A in l)if(l.hasOwnProperty(A)&&(u=l[A],u!=null))switch(A){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Le(i,s,A,u,l,null)}return;case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":Se("load",i);break;case"video":case"audio":for(u=0;u<ir.length;u++)Se(ir[u],i);break;case"image":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"embed":case"source":case"link":Se("error",i),Se("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(b in l)if(l.hasOwnProperty(b)&&(u=l[b],u!=null))switch(b){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Le(i,s,b,u,l,null)}return;default:if(mu(s)){for(P in l)l.hasOwnProperty(P)&&(u=l[P],u!==void 0&&jc(i,s,P,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Le(i,s,S,u,l,null))}function YS(i,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,T=null,S=null,A=null,b=null,P=null;for(L in l){var F=l[L];if(l.hasOwnProperty(L)&&F!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":A=F;default:u.hasOwnProperty(L)||Le(i,s,L,null,u,F)}}for(var U in u){var L=u[U];if(F=l[U],u.hasOwnProperty(U)&&(L!=null||F!=null))switch(U){case"type":_=L;break;case"name":p=L;break;case"checked":b=L;break;case"defaultChecked":P=L;break;case"value":T=L;break;case"defaultValue":S=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:L!==F&&Le(i,s,U,L,u,F)}}hu(i,T,S,A,b,P,_,p);return;case"select":L=T=S=U=null;for(_ in l)if(A=l[_],l.hasOwnProperty(_)&&A!=null)switch(_){case"value":break;case"multiple":L=A;default:u.hasOwnProperty(_)||Le(i,s,_,null,u,A)}for(p in u)if(_=u[p],A=l[p],u.hasOwnProperty(p)&&(_!=null||A!=null))switch(p){case"value":U=_;break;case"defaultValue":S=_;break;case"multiple":T=_;default:_!==A&&Le(i,s,p,_,u,A)}s=S,l=T,u=L,U!=null?fo(i,!!l,U,!1):!!u!=!!l&&(s!=null?fo(i,!!l,s,!0):fo(i,!!l,l?[]:"",!1));return;case"textarea":L=U=null;for(S in l)if(p=l[S],l.hasOwnProperty(S)&&p!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Le(i,s,S,null,u,p)}for(T in u)if(p=u[T],_=l[T],u.hasOwnProperty(T)&&(p!=null||_!=null))switch(T){case"value":U=p;break;case"defaultValue":L=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==_&&Le(i,s,T,p,u,_)}Dh(i,U,L);return;case"option":for(var te in l)if(U=l[te],l.hasOwnProperty(te)&&U!=null&&!u.hasOwnProperty(te))switch(te){case"selected":i.selected=!1;break;default:Le(i,s,te,null,u,U)}for(A in u)if(U=u[A],L=l[A],u.hasOwnProperty(A)&&U!==L&&(U!=null||L!=null))switch(A){case"selected":i.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Le(i,s,A,U,u,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)U=l[de],l.hasOwnProperty(de)&&U!=null&&!u.hasOwnProperty(de)&&Le(i,s,de,null,u,U);for(b in u)if(U=u[b],L=l[b],u.hasOwnProperty(b)&&U!==L&&(U!=null||L!=null))switch(b){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(137,s));break;default:Le(i,s,b,U,u,L)}return;default:if(mu(s)){for(var We in l)U=l[We],l.hasOwnProperty(We)&&U!==void 0&&!u.hasOwnProperty(We)&&jc(i,s,We,void 0,u,U);for(P in u)U=u[P],L=l[P],!u.hasOwnProperty(P)||U===L||U===void 0&&L===void 0||jc(i,s,P,U,u,L);return}}for(var M in l)U=l[M],l.hasOwnProperty(M)&&U!=null&&!u.hasOwnProperty(M)&&Le(i,s,M,null,u,U);for(F in u)U=u[F],L=l[F],!u.hasOwnProperty(F)||U===L||U==null&&L==null||Le(i,s,F,U,u,L)}var ef=null,tf=null;function Jl(i){return i.nodeType===9?i:i.ownerDocument}function Ig(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wg(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function nf(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var of=null;function JS(){var i=window.event;return i&&i.type==="popstate"?i===of?!1:(of=i,!0):(of=null,!1)}var Ng=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(i){return bg.resolve(null).then(i).catch(WS)}:Ng;function WS(i){setTimeout(function(){throw i})}function sf(i,s){var l=s,u=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(u===0){i.removeChild(p),dr(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=p}while(l);dr(s)}function rf(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":rf(l),du(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function XS(i,s,l,u){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Es])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=sn(i.nextSibling),i===null)break}return null}function $S(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=sn(i.nextSibling),i===null))return null;return i}function sn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}function Mg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}function xg(i,s,l){switch(s=Jl(l),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}var $t=new Map,Dg=new Set;function Kl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Vn=Z.d;Z.d={f:ZS,r:jS,D:eC,C:tC,L:nC,m:iC,X:sC,S:oC,M:rC};function ZS(){var i=Vn.f(),s=Gl();return i||s}function jS(i){var s=ao(i);s!==null&&s.tag===5&&s.type==="form"?sm(s):Vn.r(i)}var Vo=typeof document>"u"?null:document;function Ug(i,s,l){var u=Vo;if(u&&typeof s=="string"&&s){var p=Ft(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Dg.has(p)||(Dg.add(p),i={rel:i,crossOrigin:l,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),gt(s,"link",i),ot(s),u.head.appendChild(s)))}}function eC(i){Vn.D(i),Ug("dns-prefetch",i,null)}function tC(i,s){Vn.C(i,s),Ug("preconnect",i,s)}function nC(i,s,l){Vn.L(i,s,l);var u=Vo;if(u&&i&&s){var p='link[rel="preload"][as="'+Ft(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Ft(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Ft(l.imageSizes)+'"]')):p+='[href="'+Ft(i)+'"]';var _=p;switch(s){case"style":_=Fo(i);break;case"script":_=qo(i)}$t.has(_)||(i=$({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),$t.set(_,i),u.querySelector(p)!==null||s==="style"&&u.querySelector(sr(_))||s==="script"&&u.querySelector(rr(_))||(s=u.createElement("link"),gt(s,"link",i),ot(s),u.head.appendChild(s)))}}function iC(i,s){Vn.m(i,s);var l=Vo;if(l&&i){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Ft(u)+'"][href="'+Ft(i)+'"]',_=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=qo(i)}if(!$t.has(_)&&(i=$({rel:"modulepreload",href:i},s),$t.set(_,i),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(rr(_)))return}u=l.createElement("link"),gt(u,"link",i),ot(u),l.head.appendChild(u)}}}function oC(i,s,l){Vn.S(i,s,l);var u=Vo;if(u&&i){var p=uo(u).hoistableStyles,_=Fo(i);s=s||"default";var T=p.get(_);if(!T){var S={loading:0,preload:null};if(T=u.querySelector(sr(_)))S.loading=5;else{i=$({rel:"stylesheet",href:i,"data-precedence":s},l),(l=$t.get(_))&&lf(i,l);var A=T=u.createElement("link");ot(A),gt(A,"link",i),A._p=new Promise(function(b,P){A.onload=b,A.onerror=P}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ql(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:S},p.set(_,T)}}}function sC(i,s){Vn.X(i,s);var l=Vo;if(l&&i){var u=uo(l).hoistableScripts,p=qo(i),_=u.get(p);_||(_=l.querySelector(rr(p)),_||(i=$({src:i,async:!0},s),(s=$t.get(p))&&af(i,s),_=l.createElement("script"),ot(_),gt(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(p,_))}}function rC(i,s){Vn.M(i,s);var l=Vo;if(l&&i){var u=uo(l).hoistableScripts,p=qo(i),_=u.get(p);_||(_=l.querySelector(rr(p)),_||(i=$({src:i,async:!0,type:"module"},s),(s=$t.get(p))&&af(i,s),_=l.createElement("script"),ot(_),gt(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(p,_))}}function Lg(i,s,l,u){var p=(p=Qn.current)?Kl(p):null;if(!p)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Fo(l.href),l=uo(p).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Fo(l.href);var _=uo(p).hoistableStyles,T=_.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,T),(_=p.querySelector(sr(i)))&&!_._p&&(T.instance=_,T.state.loading=5),$t.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$t.set(i,l),_||lC(p,i,l,T.state))),s&&u===null)throw Error(o(528,""));return T}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qo(l),l=uo(p).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Fo(i){return'href="'+Ft(i)+'"'}function sr(i){return'link[rel="stylesheet"]['+i+"]"}function Pg(i){return $({},i,{"data-precedence":i.precedence,precedence:null})}function lC(i,s,l,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gt(s,"link",l),ot(s),i.head.appendChild(s))}function qo(i){return'[src="'+Ft(i)+'"]'}function rr(i){return"script[async]"+i}function kg(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Ft(l.href)+'"]');if(u)return s.instance=u,ot(u),u;var p=$({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),ot(u),gt(u,"style",p),Ql(u,l.precedence,i),s.instance=u;case"stylesheet":p=Fo(l.href);var _=i.querySelector(sr(p));if(_)return s.state.loading|=4,s.instance=_,ot(_),_;u=Pg(l),(p=$t.get(p))&&lf(u,p),_=(i.ownerDocument||i).createElement("link"),ot(_);var T=_;return T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),gt(_,"link",u),s.state.loading|=4,Ql(_,l.precedence,i),s.instance=_;case"script":return _=qo(l.src),(p=i.querySelector(rr(_)))?(s.instance=p,ot(p),p):(u=l,(p=$t.get(_))&&(u=$({},l),af(u,p)),i=i.ownerDocument||i,p=i.createElement("script"),ot(p),gt(p,"link",u),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ql(u,l.precedence,i));return s.instance}function Ql(i,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,_=p,T=0;T<u.length;T++){var S=u[T];if(S.dataset.precedence===s)_=S;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function lf(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function af(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Wl=null;function Og(i,s,l){if(Wl===null){var u=new Map,p=Wl=new Map;p.set(l,u)}else p=Wl,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[Es]||_[_t]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(s)||"";T=i+T;var S=u.get(T);S?S.push(_):u.set(T,[_])}}return u}function Hg(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function aC(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Gg(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var lr=null;function uC(){}function cC(i,s,l){if(lr===null)throw Error(o(475));var u=lr;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Fo(l.href),_=i.querySelector(sr(p));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Xl.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=_,ot(_);return}_=i.ownerDocument||i,l=Pg(l),(p=$t.get(p))&&lf(l,p),_=_.createElement("link"),ot(_);var T=_;T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),gt(_,"link",l),s.instance=_}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Xl.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function fC(){if(lr===null)throw Error(o(475));var i=lr;return i.stylesheets&&i.count===0&&uf(i,i.stylesheets),0<i.count?function(s){var l=setTimeout(function(){if(i.stylesheets&&uf(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Xl(){if(this.count--,this.count===0){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var $l=null;function uf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,$l=new Map,s.forEach(dC,i),$l=null,Xl.call(i))}function dC(i,s){if(!(s.state.loading&4)){var l=$l.get(i);if(l)var u=l.get(null);else{l=new Map,$l.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var T=p[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}p=s.instance,T=p.getAttribute("data-precedence"),_=l.get(T)||u,_===u&&l.set(null,p),l.set(T,p),this.count++,u=Xl.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var ar={$$typeof:C,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function hC(i,s,l,u,p,_,T,S){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.hiddenUpdates=cu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Vg(i,s,l,u,p,_,T,S,A,b,P,F){return i=new hC(i,s,l,T,S,A,b,F),s=1,_===!0&&(s|=24),_=Wt(3,null,null,s),i.current=_,_.stateNode=i,s=Vu(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:s},Ec(_),i}function Fg(i){return i?(i=Eo,i):Eo}function qg(i,s,l,u,p,_){p=Fg(p),u.context===null?u.context=p:u.pendingContext=p,u=si(s),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=ri(i,u,s),l!==null&&(Ct(l,i,s),Ys(l,i,s))}function Bg(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function cf(i,s){Bg(i,s),(i=i.alternate)&&Bg(i,s)}function zg(i){if(i.tag===13){var s=Zn(i,67108864);s!==null&&Ct(s,i,67108864),cf(i,67108864)}}var Zl=!0;function pC(i,s,l,u){var p=V.T;V.T=null;var _=Z.p;try{Z.p=2,ff(i,s,l,u)}finally{Z.p=_,V.T=p}}function mC(i,s,l,u){var p=V.T;V.T=null;var _=Z.p;try{Z.p=8,ff(i,s,l,u)}finally{Z.p=_,V.T=p}}function ff(i,s,l,u){if(Zl){var p=df(u);if(p===null)Zc(i,s,u,jl,l),Jg(i,u);else if(_C(p,i,s,l,u))u.stopPropagation();else if(Jg(i,u),s&4&&-1<gC.indexOf(i)){for(;p!==null;){var _=ao(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=wi(_.pendingLanes);if(T!==0){var S=_;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var A=1<<31-Ut(T);S.entanglements[1]|=A,T&=~A}Tn(_),(ze&6)===0&&(kl=gn()+500,nr(0))}}break;case 13:S=Zn(_,2),S!==null&&Ct(S,_,2),Gl(),cf(_,2)}if(_=df(u),_===null&&Zc(i,s,u,jl,l),_===p)break;p=_}p!==null&&u.stopPropagation()}else Zc(i,s,u,null,l)}}function df(i){return i=_u(i),hf(i)}var jl=null;function hf(i){if(jl=null,i=Ni(i),i!==null){var s=ee(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=oe(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return jl=i,null}function Yg(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tT()){case mh:return 2;case gh:return 8;case Qr:case nT:return 32;case _h:return 268435456;default:return 32}default:return 32}}var pf=!1,hi=null,pi=null,mi=null,ur=new Map,cr=new Map,gi=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jg(i,s){switch(i){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":ur.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cr.delete(s.pointerId)}}function fr(i,s,l,u,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[p]},s!==null&&(s=ao(s),s!==null&&zg(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function _C(i,s,l,u,p){switch(s){case"focusin":return hi=fr(hi,i,s,l,u,p),!0;case"dragenter":return pi=fr(pi,i,s,l,u,p),!0;case"mouseover":return mi=fr(mi,i,s,l,u,p),!0;case"pointerover":var _=p.pointerId;return ur.set(_,fr(ur.get(_)||null,i,s,l,u,p)),!0;case"gotpointercapture":return _=p.pointerId,cr.set(_,fr(cr.get(_)||null,i,s,l,u,p)),!0}return!1}function Kg(i){var s=Ni(i.target);if(s!==null){var l=ee(s);if(l!==null){if(s=l.tag,s===13){if(s=oe(l),s!==null){i.blockedOn=s,fT(i.priority,function(){if(l.tag===13){var u=Ht(),p=Zn(l,u);p!==null&&Ct(p,l,u),cf(l,u)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ea(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=df(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);gu=u,l.target.dispatchEvent(u),gu=null}else return s=ao(l),s!==null&&zg(s),i.blockedOn=l,!1;s.shift()}return!0}function Qg(i,s,l){ea(i)&&l.delete(s)}function yC(){pf=!1,hi!==null&&ea(hi)&&(hi=null),pi!==null&&ea(pi)&&(pi=null),mi!==null&&ea(mi)&&(mi=null),ur.forEach(Qg),cr.forEach(Qg)}function ta(i,s){i.blockedOn===s&&(i.blockedOn=null,pf||(pf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yC)))}var na=null;function Wg(i){na!==i&&(na=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){na===i&&(na=null);for(var s=0;s<i.length;s+=3){var l=i[s],u=i[s+1],p=i[s+2];if(typeof u!="function"){if(hf(u||l)===null)continue;break}var _=ao(l);_!==null&&(i.splice(s,3),s-=3,nc(_,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function dr(i){function s(A){return ta(A,i)}hi!==null&&ta(hi,i),pi!==null&&ta(pi,i),mi!==null&&ta(mi,i),ur.forEach(s),cr.forEach(s);for(var l=0;l<gi.length;l++){var u=gi[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<gi.length&&(l=gi[0],l.blockedOn===null);)Kg(l),l.blockedOn===null&&gi.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],_=l[u+1],T=p[wt]||null;if(typeof _=="function")T||Wg(l);else if(T){var S=null;if(_&&_.hasAttribute("formAction")){if(p=_,T=_[wt]||null)S=T.formAction;else if(hf(p)!==null)continue}else S=T.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),Wg(l)}}}function mf(i){this._internalRoot=i}ia.prototype.render=mf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,u=Ht();qg(l,u,i,s,null,null)},ia.prototype.unmount=mf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;i.tag===0&&Oo(),qg(i.current,2,null,i,null,null),Gl(),s[lo]=null}};function ia(i){this._internalRoot=i}ia.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ch();i={blockedOn:null,target:i,priority:s};for(var l=0;l<gi.length&&s!==0&&s<gi[l].priority;l++);gi.splice(l,0,i),l===0&&Kg(i)}};var Xg=e.version;if(Xg!=="19.0.0")throw Error(o(527,Xg,"19.0.0"));Z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=Y(s),i=i!==null?ae(i):null,i=i===null?null:i.stateNode,i};var vC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:V,findFiberByHostInstance:Ni,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{_s=oa.inject(vC),Dt=oa}catch{}}return pr.createRoot=function(i,s){if(!r(i))throw Error(o(299));var l=!1,u="",p=hm,_=pm,T=mm,S=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=Vg(i,1,!1,null,null,l,u,p,_,T,S,null),i[lo]=s.current,$c(i.nodeType===8?i.parentNode:i),new mf(s)},pr.hydrateRoot=function(i,s,l){if(!r(i))throw Error(o(299));var u=!1,p="",_=hm,T=pm,S=mm,A=null,b=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(A=l.unstable_transitionCallbacks),l.formState!==void 0&&(b=l.formState)),s=Vg(i,1,!0,s,l??null,u,p,_,T,S,A,b),s.context=Fg(null),l=s.current,u=Ht(),p=si(u),p.callback=null,ri(l,p,u),s.current.lanes=u,vs(s,u),Tn(s),i[lo]=s.current,$c(i),new ia(s)},pr.version="19.0.0",pr}var r_;function MC(){if(r_)return yf.exports;r_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yf.exports=bC(),yf.exports}var xC=MC();const DC=Lv(xC);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw ls(e)},ls=function(t){return new Error("Firebase Database ("+Pv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},LC=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[o++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],g=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Sd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,g=r+2<t.length,m=g?t[r+2]:0,y=a>>2,E=(a&3)<<4|h>>4;let v=(h&15)<<2|m>>6,C=m&63;g||(C=64,c||(v=64)),o.push(n[y],n[E],n[v],n[C])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const m=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||m==null||E==null)throw new PC;const v=a<<2|h>>4;if(o.push(v),m!==64){const C=h<<4&240|m>>2;if(o.push(C),E!==64){const R=m<<6&192|E;o.push(R)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ov=function(t){const e=kv(t);return Sd.encodeByteArray(e,!0)},ya=function(t){return Ov(t).replace(/\./g,"")},Of=function(t){try{return Sd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){return Hv(void 0,t)}function Hv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OC(n)||(t[n]=Hv(t[n],e[n]));return t}function OC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=()=>HC().__FIREBASE_DEFAULTS__,VC=()=>{if(typeof process>"u"||typeof l_>"u")return;const t=l_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Of(t[1]);return e&&JSON.parse(e)},Gv=()=>{try{return UC()||GC()||VC()||FC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qC=t=>{var e,n;return(n=(e=Gv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},BC=t=>{const e=qC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},Vv=()=>{var t;return(t=Gv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ya(JSON.stringify(n)),ya(JSON.stringify(c)),""].join(".")}const Cr={};function JC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cr))Cr[e]?t.emulator.push(e):t.prod.push(e);return t}function KC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let a_=!1;function QC(t,e){if(typeof window>"u"||typeof document>"u"||!Cd(window.location.host)||Cr[t]===e||Cr[t]||a_)return;Cr[t]=e;function n(v){return`__firebase__banner__${v}`}const o="__firebase__banner",a=JC().prod.length>0;function c(){const v=document.getElementById(o);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function g(v,C){v.setAttribute("width","24"),v.setAttribute("id",C),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{a_=!0,c()},v}function y(v,C){v.setAttribute("id",C),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function E(){const v=KC(o),C=n("text"),R=document.getElementById(C)||document.createElement("span"),x=n("learnmore"),N=document.getElementById(x)||document.createElement("a"),O=n("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const q=v.element;h(q),y(N,x);const Q=m();g(B,O),q.append(B,R,N,Q),document.body.appendChild(q)}a?(R.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(WC())}function XC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $C(){return Pv.NODE_ADMIN===!0}function ZC(){try{return typeof indexedDB=="object"}catch{return!1}}function jC(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="FirebaseError";class Vr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=eA,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qv.prototype.create)}}class qv{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?tA(a,o):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Vr(r,h,o)}}function tA(t,e){return t.replace(nA,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const nA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){return JSON.parse(t)}function ft(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(t){let e={},n={},o={},r="";try{const a=t.split(".");e=br(Of(a[0])||""),n=br(Of(a[1])||""),r=a[2],o=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:o,signature:r}},iA=function(t){const e=Bv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},oA=function(t){const e=Bv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function es(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Hf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e,n){const o={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=e.call(n,t[r],r,t));return o}function Ea(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const a=t[r],c=e[r];if(u_(a)&&u_(c)){if(!Ea(a,c))return!1}else if(a!==c)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function u_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){const e=[];for(const[n,o]of Object.entries(t))Array.isArray(o)?o.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const o=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)o[E]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let E=0;E<16;E++)o[E]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let E=16;E<80;E++){const v=o[E-3]^o[E-8]^o[E-14]^o[E-16];o[E]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,y;for(let E=0;E<80;E++){E<40?E<20?(m=h^a&(c^h),y=1518500249):(m=a^c^h,y=1859775393):E<60?(m=a&c|h&(a|c),y=2400959708):(m=a^c^h,y=3395469782);const v=(r<<5|r>>>27)+m+g+y+o[E]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const o=n-this.blockSize;let r=0;const a=this.buf_;let c=this.inbuf_;for(;r<n;){if(c===0)for(;r<=o;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(a[c]=e.charCodeAt(r),++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}else for(;r<n;)if(a[c]=e[r],++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let o=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[o]=this.chain_[r]>>a&255,++o;return e}}function ts(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);if(r>=55296&&r<=56319){const a=r-55296;o++,K(o<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(o)-56320;r=65536+(a<<10)+c}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Fa=function(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Sn;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cA(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});o.resolve(a)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);o===h&&c.resolve(r)}return r}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const a=this.instances.get(o);return a&&e(a,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:uA(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uA(t){return t===Wi?void 0:t}function cA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const dA={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},hA=Fe.INFO,pA={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},mA=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=pA[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zv{constructor(e){this.name=e,this._logLevel=hA,this._logHandler=mA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const gA=(t,e)=>e.some(n=>t instanceof n);let c_,f_;function _A(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yA(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yv=new WeakMap,Gf=new WeakMap,Jv=new WeakMap,Sf=new WeakMap,Ad=new WeakMap;function vA(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(vi(t.result)),r()},c=()=>{o(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&Yv.set(n,t)}).catch(()=>{}),Ad.set(e,t),e}function EA(t){if(Gf.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Gf.set(t,e)}let Vf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TA(t){Vf=t(Vf)}function SA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Cf(this),e,...n);return Jv.set(o,e.sort?e.sort():[e]),vi(o)}:yA().includes(t)?function(...e){return t.apply(Cf(this),e),vi(Yv.get(this))}:function(...e){return vi(t.apply(Cf(this),e))}}function CA(t){return typeof t=="function"?SA(t):(t instanceof IDBTransaction&&EA(t),gA(t,_A())?new Proxy(t,Vf):t)}function vi(t){if(t instanceof IDBRequest)return vA(t);if(Sf.has(t))return Sf.get(t);const e=CA(t);return e!==t&&(Sf.set(t,e),Ad.set(e,t)),e}const Cf=t=>Ad.get(t);function AA(t,e,{blocked:n,upgrade:o,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=vi(c);return o&&c.addEventListener("upgradeneeded",g=>{o(vi(c.result),g.oldVersion,g.newVersion,vi(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const RA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],Af=new Map;function d_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=IA.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||RA.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),r&&g.done]))[0]};return Af.set(e,a),a}TA(t=>({...t,get:(e,n,o)=>d_(e,n)||t.get(e,n,o),has:(e,n)=>!!d_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NA(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function NA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ff="@firebase/app",h_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new zv("@firebase/app"),bA="@firebase/app-compat",MA="@firebase/analytics-compat",xA="@firebase/analytics",DA="@firebase/app-check-compat",UA="@firebase/app-check",LA="@firebase/auth",PA="@firebase/auth-compat",kA="@firebase/database",OA="@firebase/data-connect",HA="@firebase/database-compat",GA="@firebase/functions",VA="@firebase/functions-compat",FA="@firebase/installations",qA="@firebase/installations-compat",BA="@firebase/messaging",zA="@firebase/messaging-compat",YA="@firebase/performance",JA="@firebase/performance-compat",KA="@firebase/remote-config",QA="@firebase/remote-config-compat",WA="@firebase/storage",XA="@firebase/storage-compat",$A="@firebase/firestore",ZA="@firebase/ai",jA="@firebase/firestore-compat",eR="firebase",tR="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",nR={[Ff]:"fire-core",[bA]:"fire-core-compat",[xA]:"fire-analytics",[MA]:"fire-analytics-compat",[UA]:"fire-app-check",[DA]:"fire-app-check-compat",[LA]:"fire-auth",[PA]:"fire-auth-compat",[kA]:"fire-rtdb",[OA]:"fire-data-connect",[HA]:"fire-rtdb-compat",[GA]:"fire-fn",[VA]:"fire-fn-compat",[FA]:"fire-iid",[qA]:"fire-iid-compat",[BA]:"fire-fcm",[zA]:"fire-fcm-compat",[YA]:"fire-perf",[JA]:"fire-perf-compat",[KA]:"fire-rc",[QA]:"fire-rc-compat",[WA]:"fire-gcs",[XA]:"fire-gcs-compat",[$A]:"fire-fst",[jA]:"fire-fst-compat",[ZA]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new Map,iR=new Map,Bf=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ta(t){const e=t.name;if(Bf.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Bf.set(e,t);for(const n of xr.values())p_(n,t);for(const n of iR.values())p_(n,t);return!0}function oR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sR(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new qv("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=tR;function Kv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:qf,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Ei.create("bad-app-name",{appName:String(r)});if(n||(n=Vv()),!n)throw Ei.create("no-options");const a=xr.get(r);if(a){if(Ea(n,a.options)&&Ea(o,a.config))return a;throw Ei.create("duplicate-app",{appName:r})}const c=new fA(r);for(const g of Bf.values())c.addComponent(g);const h=new lR(n,o,c);return xr.set(r,h),h}function Qv(t=qf){const e=xr.get(t);if(!e&&t===qf&&Vv())return Kv();if(!e)throw Ei.create("no-app",{appName:t});return e}function uR(){return Array.from(xr.values())}function Qo(t,e,n){let o=nR[t]??t;n&&(o+=`-${n}`);const r=o.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(c.join(" "));return}Ta(new Mr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebase-heartbeat-database",fR=1,Dr="firebase-heartbeat-store";let Rf=null;function Wv(){return Rf||(Rf=AA(cR,fR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dr)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),Rf}async function dR(t){try{const n=(await Wv()).transaction(Dr),o=await n.objectStore(Dr).get(Xv(t));return await n.done,o}catch(e){if(e instanceof Vr)Bn.warn(e.message);else{const n=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function m_(t,e){try{const o=(await Wv()).transaction(Dr,"readwrite");await o.objectStore(Dr).put(e,Xv(t)),await o.done}catch(n){if(n instanceof Vr)Bn.warn(n.message);else{const o=Ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(o.message)}}}function Xv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1024,pR=30;class mR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _R(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=g_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>pR){const c=yR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Bn.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g_(),{heartbeatsToSend:o,unsentEntries:r}=gR(this._heartbeatsCache.heartbeats),a=ya(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Bn.warn(n),""}}}function g_(){return new Date().toISOString().substring(0,10)}function gR(t,e=hR){const n=[];let o=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),__(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),__(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZC()?jC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function __(t){return ya(JSON.stringify({version:2,heartbeats:t})).length}function yR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){Ta(new Mr("platform-logger",e=>new wA(e),"PRIVATE")),Ta(new Mr("heartbeat",e=>new mR(e),"PRIVATE")),Qo(Ff,h_,t),Qo(Ff,h_,"esm2020"),Qo("fire-js","")}vR("");var ER="firebase",TR="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(ER,TR,"app");var y_={};const v_="@firebase/database",E_="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $v="";function SR(t){$v=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ft(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:br(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CR(e)}}catch{}return new AR},Zi=Zv("localStorage"),RR=Zv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new zv("@firebase/database"),IR=(function(){let t=1;return function(){return t++}})(),jv=function(t){const e=lA(t),n=new rA;n.update(e);const o=n.digest();return Sd.encodeByteArray(o)},Fr=function(...t){let e="";for(let n=0;n<t.length;n++){const o=t[n];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=Fr.apply(null,o):typeof o=="object"?e+=ft(o):e+=o,e+=" "}return e};let Ar=null,T_=!0;const wR=function(t,e){K(!0,"Can't turn on custom loggers persistently."),Wo.logLevel=Fe.VERBOSE,Ar=Wo.log.bind(Wo)},ct=function(...t){if(T_===!0&&(T_=!1,Ar===null&&RR.get("logging_enabled")===!0&&wR()),Ar){const e=Fr.apply(null,t);Ar(e)}},qr=function(t){return function(...e){ct(t,...e)}},zf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Fr(...t);Wo.error(e)},zn=function(...t){const e=`FIREBASE FATAL ERROR: ${Fr(...t)}`;throw Wo.error(e),new Error(e)},Rt=function(...t){const e="FIREBASE WARNING: "+Fr(...t);Wo.warn(e)},NR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qa=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},bR=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ns="[MIN_NAME]",ji="[MAX_NAME]",io=function(t,e){if(t===e)return 0;if(t===ns||e===ji)return-1;if(e===ns||t===ji)return 1;{const n=S_(t),o=S_(e);return n!==null?o!==null?n-o===0?t.length-e.length:n-o:-1:o!==null?1:t<e?-1:1}},MR=function(t,e){return t===e?0:t<e?-1:1},mr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ft(e))},Rd=function(t){if(typeof t!="object"||t===null)return ft(t);const e=[];for(const o in t)e.push(o);e.sort();let n="{";for(let o=0;o<e.length;o++)o!==0&&(n+=","),n+=ft(e[o]),n+=":",n+=Rd(t[e[o]]);return n+="}",n},e0=function(t,e){const n=t.length;if(n<=e)return[t];const o=[];for(let r=0;r<n;r+=e)r+e>n?o.push(t.substring(r,n)):o.push(t.substring(r,r+e));return o};function dt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const t0=function(t){K(!qa(t),"Invalid JSON number");const e=11,n=52,o=(1<<e-1)-1;let r,a,c,h,g;t===0?(a=0,c=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=h+o,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-o-n))));const m=[];for(g=n;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(r?1:0),m.reverse();const y=m.join("");let E="";for(g=0;g<64;g+=8){let v=parseInt(y.substr(g,8),2).toString(16);v.length===1&&(v="0"+v),E=E+v}return E.toLowerCase()},xR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function UR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const o=new Error(t+" at "+e._path.toString()+": "+n);return o.code=t.toUpperCase(),o}const LR=new RegExp("^-?(0*)\\d{1,10}$"),PR=-2147483648,kR=2147483647,S_=function(t){if(LR.test(t)){const e=Number(t);if(e>=PR&&e<=kR)return e}return null},us=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Rt("Exception was thrown by user callback.",n),e},Math.floor(0))}},OR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,sR(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(o=>this.appCheck=o)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,o){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}}class ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="5",n0="v",i0="s",o0="r",s0="f",r0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,l0="ls",a0="p",Yf="ac",u0="websocket",c0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,o,r,a=!1,c="",h=!1,g=!1,m=null){this.secure=n,this.namespace=o,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function VR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function d0(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let o;if(e===u0)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===c0)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VR(t)&&(n.ns=t.namespace);const r=[];return dt(n,(a,c)=>{r.push(a+"="+c)}),o+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.counters_={}}incrementCounter(e,n=1){Cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return kC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If={},wf={};function wd(t){const e=t.toString();return If[e]||(If[e]=new FR),If[e]}function qR(t,e){const n=t.toString();return wf[n]||(wf[n]=e()),wf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<o.length;++r)o[r]&&us(()=>{this.onMessage_(o[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="start",zR="close",YR="pLPCommand",JR="pRTLPCB",h0="id",p0="pw",m0="ser",KR="cb",QR="seg",WR="ts",XR="d",$R="dframe",g0=1870,_0=30,ZR=g0-_0,jR=25e3,eI=3e4;class Yo{constructor(e,n,o,r,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=o,this.appCheckToken=r,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qr(e),this.stats_=wd(n),this.urlFn=g=>(this.appCheckToken&&(g[Yf]=this.appCheckToken),d0(n,c0,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new BR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(eI)),bR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Nd((...a)=>{const[c,h,g,m,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===C_)this.id=h,this.password=g;else if(c===zR)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const o={};o[C_]="t",o[m0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[KR]=this.scriptTagHolder.uniqueCallbackIdentifier),o[n0]=Id,this.transportSessionId&&(o[i0]=this.transportSessionId),this.lastSessionId&&(o[l0]=this.lastSessionId),this.applicationId&&(o[a0]=this.applicationId),this.appCheckToken&&(o[Yf]=this.appCheckToken),typeof location<"u"&&location.hostname&&r0.test(location.hostname)&&(o[o0]=s0);const r=this.urlFn(o);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yo.forceAllow_=!0}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){return Yo.forceAllow_?!0:!Yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xR()&&!DR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=Ov(n),r=e0(o,ZR);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const o={};o[$R]="t",o[h0]=e,o[p0]=n,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ft(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Nd{constructor(e,n,o,r){this.onDisconnect=o,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=IR(),window[YR+this.uniqueCallbackIdentifier]=e,window[JR+this.uniqueCallbackIdentifier]=n,this.myIFrame=Nd.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ct("frame writing exception"),h.stack&&ct(h.stack),ct(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[h0]=this.myID,e[p0]=this.myPW,e[m0]=this.currentSerial;let n=this.urlFn(e),o="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_0+o.length<=g0;){const c=this.pendingSegs.shift();o=o+"&"+QR+r+"="+c.seg+"&"+WR+r+"="+c.ts+"&"+XR+r+"="+c.d,r++}return n=n+o,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,o){this.pendingSegs.push({seg:e,ts:n,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const o=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(o,Math.floor(jR)),a=()=>{clearTimeout(r),o()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const r=o.readyState;(!r||r==="loaded"||r==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=16384,nI=45e3;let Sa=null;typeof MozWebSocket<"u"?Sa=MozWebSocket:typeof WebSocket<"u"&&(Sa=WebSocket);class ln{constructor(e,n,o,r,a,c,h){this.connId=e,this.applicationId=o,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qr(this.connId),this.stats_=wd(n),this.connURL=ln.connectionURL_(n,c,h,r,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,o,r,a){const c={};return c[n0]=Id,typeof location<"u"&&location.hostname&&r0.test(location.hostname)&&(c[o0]=s0),n&&(c[i0]=n),o&&(c[l0]=o),r&&(c[Yf]=r),a&&(c[a0]=a),d0(e,u0,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zi.set("previous_websocket_failure",!0);try{let o;$C(),this.mySock=new Sa(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const r=o.message||o.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const r=o.message||o.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ln.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&Sa!==null&&!ln.forceDisallow_}static previouslyFailed(){return Zi.isInMemoryStorage||Zi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const o=br(n);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const o=this.extractFrameCount_(n);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const n=ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=e0(n,tI);o.length>1&&this.sendString_(String(o.length));for(let r=0;r<o.length;r++)this.sendString_(o[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(nI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ln.responsesRequiredToBeHealthy=2;ln.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{static get ALL_TRANSPORTS(){return[Yo,ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ln&&ln.isAvailable();let o=n&&!ln.previouslyFailed();if(e.webSocketOnly&&(n||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ln];else{const r=this.transports_=[];for(const a of Ur.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);Ur.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ur.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=6e4,oI=5e3,sI=10*1024,rI=100*1024,Nf="t",A_="d",lI="s",R_="r",aI="e",I_="o",w_="a",N_="n",b_="p",uI="h";class cI{constructor(e,n,o,r,a,c,h,g,m,y){this.id=e,this.repoInfo_=n,this.applicationId_=o,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qr("c:"+this.id+":"),this.transportManager_=new Ur(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,o)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Rr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>sI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nf in e){const n=e[Nf];n===w_?this.upgradeIfSecondaryHealthy_():n===R_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===I_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=mr("t",e),o=mr("d",e);if(n==="c")this.onSecondaryControl_(o);else if(n==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:b_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:w_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:N_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=mr("t",e),o=mr("d",e);n==="c"?this.onControl_(o):n==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=mr(Nf,e);if(A_ in e){const o=e[A_];if(n===uI){const r={...o};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===N_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===lI?this.onConnectionShutdown_(o):n===R_?this.onReset_(o):n===aI?zf("Server Error: "+o):n===I_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,o=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Id!==o&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),Rr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:b_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{put(e,n,o,r){}merge(e,n,o,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,o){}onDisconnectMerge(e,n,o){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let r=0;r<o.length;r++)o[r].callback.apply(o[r].context,n)}}on(e,n,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:o});const r=this.getInitialEvent(e);r&&n.apply(o,r)}off(e,n,o){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===n&&(!o||o===r[a].context)){r.splice(a,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends v0{static getInstance(){return new Ca}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=32,x_=768;class xe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let o=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[o]=this.pieces_[r],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new xe("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Si(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new xe(t.pieces_,e)}function bd(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Lr(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function E0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new xe(e,0)}function Ye(t,e){const n=[];for(let o=t.pieceNum_;o<t.pieces_.length;o++)n.push(t.pieces_[o]);if(e instanceof xe)for(let o=e.pieceNum_;o<e.pieces_.length;o++)n.push(e.pieces_[o]);else{const o=e.split("/");for(let r=0;r<o.length;r++)o[r].length>0&&n.push(o[r])}return new xe(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Mt(t,e){const n=ge(t),o=ge(e);if(n===null)return e;if(n===o)return Mt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function dI(t,e){const n=Lr(t,0),o=Lr(e,0);for(let r=0;r<n.length&&r<o.length;r++){const a=io(n[r],o[r]);if(a!==0)return a}return n.length===o.length?0:n.length<o.length?-1:1}function Md(t,e){if(Si(t)!==Si(e))return!1;for(let n=t.pieceNum_,o=e.pieceNum_;n<=t.pieces_.length;n++,o++)if(t.pieces_[n]!==e.pieces_[o])return!1;return!0}function Zt(t,e){let n=t.pieceNum_,o=e.pieceNum_;if(Si(t)>Si(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[o])return!1;++n,++o}return!0}class hI{constructor(e,n){this.errorPrefix_=n,this.parts_=Lr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Fa(this.parts_[o]);T0(this)}}function pI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fa(e),T0(t)}function mI(t){const e=t.parts_.pop();t.byteLength_-=Fa(e),t.parts_.length>0&&(t.byteLength_-=1)}function T0(t){if(t.byteLength_>x_)throw new Error(t.errorPrefix_+"has a key path longer than "+x_+" bytes ("+t.byteLength_+").");if(t.parts_.length>M_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M_+") or object contains a cycle "+Xi(t))}function Xi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends v0{static getInstance(){return new xd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=1e3,gI=300*1e3,D_=30*1e3,_I=1.3,yI=3e4,vI="server_kill",U_=3;class qn extends y0{constructor(e,n,o,r,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=o,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=qn.nextPersistentConnectionId_++,this.log_=qr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gr,this.maxReconnectDelay_=gI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ca.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,o){const r=++this.requestNumber_,a={r,a:e,b:n};this.log_(ft(a)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[r]=o)}get(e){this.initConnection_();const n=new Sn,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,o,r){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:r,hashFn:n,query:e,tag:o};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(o)})}sendListen_(e){const n=e.query,o=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+o+" for "+r);const a={p:o},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,m=h.s;qn.warnOnListenWarnings_(g,n),(this.listens.get(o)&&this.listens.get(o).get(r))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(o,r),e.onComplete&&e.onComplete(m,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Cn(e,"w")){const o=es(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||oA(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=D_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=iA(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(n,o,r=>{const a=r.s,c=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,o=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,o)})}unlisten(e,n){const o=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+r),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,r)&&this.connected_&&this.sendUnlisten_(o,r,e._queryObject,n)}sendUnlisten_(e,n,o,r){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";r&&(a.q=o,a.t=r),this.sendRequest(c,a)}onDisconnectPut(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:o})}onDisconnectMerge(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:o})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,o,r){const a={p:n,d:o};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{r&&setTimeout(()=>{r(c.s,c.d)},Math.floor(0))})}put(e,n,o,r){this.putInternal("p",e,n,o,r)}merge(e,n,o,r){this.putInternal("m",e,n,o,r)}putInternal(e,n,o,r,a){this.initConnection_();const c={p:n,d:o};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:r}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,o,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,o=>{if(o.s!=="ok"){const a=o.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ft(e));const n=e.r,o=this.requestCBHash_[n];o&&(delete this.requestCBHash_[n],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zf("Unrecognized action received from server: "+ft(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yI&&(this.reconnectDelay_=gr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_I)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+qn.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,o())},m=function(E){K(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(E)};this.realtime_={close:g,sendRequest:m};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,v]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=v&&v.token,h=new cI(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,o,C=>{Rt(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(vI)},a))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&Rt(E),g())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Hf(this.interruptReasons_)&&(this.reconnectDelay_=gr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let o;n?o=n.map(a=>Rd(a)).join("$"):o="default";const r=this.removeListen_(e,o);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const o=new xe(e).toString();let r;if(this.listens.has(o)){const a=this.listens.get(o);r=a.get(n),a.delete(n),a.size===0&&this.listens.delete(o)}else r=void 0;return r}onAuthRevoked_(e,n){ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=U_&&(this.reconnectDelay_=D_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=U_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$v.replace(/\./g,"-")]=1,Fv()?e["framework.cordova"]=1:XC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ca.getInstance().currentlyOnline();return Hf(this.interruptReasons_)&&e}}qn.nextPersistentConnectionId_=0;qn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const o=new ve(ns,e),r=new ve(ns,n);return this.compare(o,r)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa;class S0 extends Ba{static get __EMPTY_NODE(){return sa}static set __EMPTY_NODE(e){sa=e}compare(e,n){return io(e.name,n.name)}isDefinedOn(e){throw ls("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(ji,sa)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,sa)}toString(){return".key"}}const Xo=new S0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,o,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?o(e.key,n):1,r&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ut{constructor(e,n,o,r,a){this.key=e,this.value=n,this.color=o??ut.RED,this.left=r??xt.EMPTY_NODE,this.right=a??xt.EMPTY_NODE}copy(e,n,o,r,a){return new ut(e??this.key,n??this.value,o??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const a=o(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,n,o),null):a===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return xt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let o,r;if(o=this,n(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),n(e,o.key)===0){if(o.right.isEmpty())return xt.EMPTY_NODE;r=o.right.min_(),o=o.copy(r.key,r.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ut.RED=!0;ut.BLACK=!1;class EI{copy(e,n,o,r,a){return this}insert(e,n,o){return new ut(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xt{constructor(e,n=xt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ut.BLACK,null,null))}remove(e){return new xt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ut.BLACK,null,null))}get(e){let n,o=this.root_;for(;!o.isEmpty();){if(n=this.comparator_(e,o.key),n===0)return o.value;n<0?o=o.left:n>0&&(o=o.right)}return null}getPredecessorKey(e){let n,o=this.root_,r=null;for(;!o.isEmpty();)if(n=this.comparator_(e,o.key),n===0){if(o.left.isEmpty())return r?r.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else n<0?o=o.left:n>0&&(r=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ra(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ra(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ra(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ra(this.root_,null,this.comparator_,!0,e)}}xt.EMPTY_NODE=new EI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e){return io(t.name,e.name)}function Dd(t,e){return io(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf;function SI(t){Jf=t}const C0=function(t){return typeof t=="number"?"number:"+t0(t):"string:"+t},A0=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cn(e,".sv"),"Priority must be a string or number.")}else K(t===Jf||t.isEmpty(),"priority of unexpected type.");K(t===Jf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_;class at{static set __childrenNodeConstructor(e){L_=e}static get __childrenNodeConstructor(){return L_}constructor(e,n=at.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),A0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new at(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:at.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:ge(e)===".priority"?this.priorityNode_:at.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:at.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const o=ge(e);return o===null?n:n.isEmpty()&&o!==".priority"?this:(K(o!==".priority"||Si(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,at.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+C0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=t0(this.value_):e+=this.value_,this.lazyHash_=jv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===at.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof at.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,o=typeof this.value_,r=at.VALUE_TYPE_ORDER.indexOf(n),a=at.VALUE_TYPE_ORDER.indexOf(o);return K(r>=0,"Unknown leaf type: "+n),K(a>=0,"Unknown leaf type: "+o),r===a?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}at.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R0,I0;function CI(t){R0=t}function AI(t){I0=t}class RI extends Ba{compare(e,n){const o=e.node.getPriority(),r=n.node.getPriority(),a=o.compareTo(r);return a===0?io(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(ji,new at("[PRIORITY-POST]",I0))}makePost(e,n){const o=R0(e);return new ve(n,new at("[PRIORITY-POST]",o))}toString(){return".priority"}}const Je=new RI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=Math.log(2);class wI{constructor(e){const n=a=>parseInt(Math.log(a)/II,10),o=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=o(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Aa=function(t,e,n,o){t.sort(e);const r=function(g,m){const y=m-g;let E,v;if(y===0)return null;if(y===1)return E=t[g],v=n?n(E):E,new ut(v,E.node,ut.BLACK,null,null);{const C=parseInt(y/2,10)+g,R=r(g,C),x=r(C+1,m);return E=t[C],v=n?n(E):E,new ut(v,E.node,ut.BLACK,R,x)}},a=function(g){let m=null,y=null,E=t.length;const v=function(R,x){const N=E-R,O=E;E-=R;const B=r(N+1,O),q=t[N],Q=n?n(q):q;C(new ut(Q,q.node,x,null,B))},C=function(R){m?(m.left=R,m=R):(y=R,m=R)};for(let R=0;R<g.count;++R){const x=g.nextBitIsOne(),N=Math.pow(2,g.count-(R+1));x?v(N,ut.BLACK):(v(N,ut.BLACK),v(N,ut.RED))}return y},c=new wI(t.length),h=a(c);return new xt(o||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf;const Bo={};class Fn{static get Default(){return K(Bo&&Je,"ChildrenNode.ts has not been loaded"),bf=bf||new Fn({".priority":Bo},{".priority":Je}),bf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=es(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xt?n:null}hasIndex(e){return Cn(this.indexSet_,e.toString())}addIndex(e,n){K(e!==Xo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let r=!1;const a=n.getIterator(ve.Wrap);let c=a.getNext();for(;c;)r=r||e.isDefinedOn(c.node),o.push(c),c=a.getNext();let h;r?h=Aa(o,e.getCompare()):h=Bo;const g=e.toString(),m={...this.indexSet_};m[g]=e;const y={...this.indexes_};return y[g]=h,new Fn(y,m)}addToIndexes(e,n){const o=va(this.indexes_,(r,a)=>{const c=es(this.indexSet_,a);if(K(c,"Missing index implementation for "+a),r===Bo)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(ve.Wrap);let m=g.getNext();for(;m;)m.name!==e.name&&h.push(m),m=g.getNext();return h.push(e),Aa(h,c.getCompare())}else return Bo;else{const h=n.get(e.name);let g=r;return h&&(g=g.remove(new ve(e.name,h))),g.insert(e,e.node)}});return new Fn(o,this.indexSet_)}removeFromIndexes(e,n){const o=va(this.indexes_,r=>{if(r===Bo)return r;{const a=n.get(e.name);return a?r.remove(new ve(e.name,a)):r}});return new Fn(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _r;class ue{static get EMPTY_NODE(){return _r||(_r=new ue(new xt(Dd),null,Fn.Default))}constructor(e,n,o){this.children_=e,this.priorityNode_=n,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&A0(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_r}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_r:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const o=new ve(e,n);let r,a;n.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(o,this.children_));const c=r.isEmpty()?_r:this.priorityNode_;return new ue(r,c,a)}}updateChild(e,n){const o=ge(e);if(o===null)return n;{K(ge(e)!==".priority"||Si(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(o).updateChild(Oe(e),n);return this.updateImmediateChild(o,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let o=0,r=0,a=!0;if(this.forEachChild(Je,(c,h)=>{n[c]=h.val(e),o++,a&&ue.INTEGER_REGEXP_.test(c)?r=Math.max(r,Number(c)):a=!1}),!e&&a&&r<2*o){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+C0(this.getPriority().val())+":"),this.forEachChild(Je,(n,o)=>{const r=o.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":jv(e)}return this.lazyHash_}getPredecessorChildName(e,n,o){const r=this.resolveIndex_(o);if(r){const a=r.getPredecessorKey(new ve(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const o=this.resolveIndex_(e);return o?o.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ve.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Br?-1:0}withIndex(e){if(e===Xo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const o=this.getIterator(Je),r=n.getIterator(Je);let a=o.getNext(),c=r.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=o.getNext(),c=r.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Xo?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class NI extends ue{constructor(){super(new xt(Dd),ue.EMPTY_NODE,Fn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const Br=new NI;Object.defineProperties(ve,{MIN:{value:new ve(ns,ue.EMPTY_NODE)},MAX:{value:new ve(ji,Br)}});S0.__EMPTY_NODE=ue.EMPTY_NODE;at.__childrenNodeConstructor=ue;SI(Br);AI(Br);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=!0;function $e(t,e=null){if(t===null)return ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new at(n,$e(e))}if(!(t instanceof Array)&&bI){const n=[];let o=!1;if(dt(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=$e(h);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),n.push(new ve(c,g)))}}),n.length===0)return ue.EMPTY_NODE;const a=Aa(n,TI,c=>c.name,Dd);if(o){const c=Aa(n,Je.getCompare());return new ue(a,$e(e),new Fn({".priority":c},{".priority":Je}))}else return new ue(a,$e(e),Fn.Default)}else{let n=ue.EMPTY_NODE;return dt(t,(o,r)=>{if(Cn(t,o)&&o.substring(0,1)!=="."){const a=$e(r);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(o,a))}}),n.updatePriority($e(e))}}CI($e);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends Ba{constructor(e){super(),this.indexPath_=e,K(!ye(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const o=this.extractChild(e.node),r=this.extractChild(n.node),a=o.compareTo(r);return a===0?io(e.name,n.name):a}makePost(e,n){const o=$e(e),r=ue.EMPTY_NODE.updateChild(this.indexPath_,o);return new ve(n,r)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,Br);return new ve(ji,e)}toString(){return Lr(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends Ba{compare(e,n){const o=e.node.compareTo(n.node);return o===0?io(e.name,n.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const o=$e(e);return new ve(n,o)}toString(){return".value"}}const DI=new xI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){return{type:"value",snapshotNode:t}}function is(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Pr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function kr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.index_=e}updateChild(e,n,o,r,a,c){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(r).equals(o.getChild(r))&&h.isEmpty()===o.isEmpty()||(c!=null&&(o.isEmpty()?e.hasChild(n)?c.trackChildChange(Pr(n,h)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(is(n,o)):c.trackChildChange(kr(n,o,h))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(n,o).withIndex(this.index_)}updateFullNode(e,n,o){return o!=null&&(e.isLeafNode()||e.forEachChild(Je,(r,a)=>{n.hasChild(r)||o.trackChildChange(Pr(r,a))}),n.isLeafNode()||n.forEachChild(Je,(r,a)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(a)||o.trackChildChange(kr(r,a,c))}else o.trackChildChange(is(r,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.indexedFilter_=new Ud(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Or.getStartPost_(e),this.endPost_=Or.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&o}updateChild(e,n,o,r,a,c){return this.matches(new ve(n,o))||(o=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,o,r,a,c)}updateFullNode(e,n,o){n.isLeafNode()&&(n=ue.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ue.EMPTY_NODE);const a=this;return n.forEachChild(Je,(c,h)=>{a.matches(new ve(c,h))||(r=r.updateImmediateChild(c,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=n=>{const o=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new Or(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,o,r,a,c){return this.rangedFilter_.matches(new ve(n,o))||(o=ue.EMPTY_NODE),e.getImmediateChild(n).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,o,r,a,c):this.fullLimitUpdateChild_(e,n,o,a,c)}updateFullNode(e,n,o){let r;if(n.isLeafNode()||n.isEmpty())r=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ue.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))r=r.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ue.EMPTY_NODE);let a;this.reverse_?a=r.getReverseIterator(this.index_):a=r.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:r=r.updateImmediateChild(h.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,o,r,a){let c;if(this.reverse_){const E=this.index_.getCompare();c=(v,C)=>E(C,v)}else c=this.index_.getCompare();const h=e;K(h.numChildren()===this.limit_,"");const g=new ve(n,o),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),y=this.rangedFilter_.matches(g);if(h.hasChild(n)){const E=h.getImmediateChild(n);let v=r.getChildAfterChild(this.index_,m,this.reverse_);for(;v!=null&&(v.name===n||h.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const C=v==null?1:c(v,g);if(y&&!o.isEmpty()&&C>=0)return a!=null&&a.trackChildChange(kr(n,o,E)),h.updateImmediateChild(n,o);{a!=null&&a.trackChildChange(Pr(n,E));const x=h.updateImmediateChild(n,ue.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(is(v.name,v.node)),x.updateImmediateChild(v.name,v.node)):x}}else return o.isEmpty()?e:y&&c(m,g)>=0?(a!=null&&(a.trackChildChange(Pr(m.name,m.node)),a.trackChildChange(is(n,o))),h.updateImmediateChild(n,o).updateImmediateChild(m.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ns}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ji}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Je}copy(){const e=new Ld;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PI(t){return t.loadsAllData()?new Ud(t.getIndex()):t.hasLimit()?new LI(t):new Or(t)}function P_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Je?n="$priority":t.index_===DI?n="$value":t.index_===Xo?n="$key":(K(t.index_ instanceof MI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ft(n),t.startSet_){const o=t.startAfterSet_?"startAfter":"startAt";e[o]=ft(t.indexStartValue_),t.startNameSet_&&(e[o]+=","+ft(t.indexStartName_))}if(t.endSet_){const o=t.endBeforeSet_?"endBefore":"endAt";e[o]=ft(t.indexEndValue_),t.endNameSet_&&(e[o]+=","+ft(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function k_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Je&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends y0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,o,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=o,this.appCheckTokenProvider_=r,this.log_=qr("p:rest:"),this.listens_={}}listen(e,n,o,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Ra.getListenId_(e,o),h={};this.listens_[c]=h;const g=P_(e._queryParams);this.restRequest_(a+".json",g,(m,y)=>{let E=y;if(m===404&&(E=null,m=null),m===null&&this.onDataUpdate_(a,E,!1,o),es(this.listens_,c)===h){let v;m?m===401?v="permission_denied":v="rest_error:"+m:v="ok",r(v,null)}})}unlisten(e,n){const o=Ra.getListenId_(e,n);delete this.listens_[o]}get(e){const n=P_(e._queryParams),o=e._path.toString(),r=new Sn;return this.restRequest_(o+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(o,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},o){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(n.auth=r.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sA(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(o&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=br(h.responseText)}catch{Rt("Failed to parse JSON response for "+c+": "+h.responseText)}o(null,g)}else h.status!==401&&h.status!==404&&Rt("Got unsuccessful REST response for "+c+" Status: "+h.status),o(h.status);o=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(){return{value:null,children:new Map}}function cs(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const o=ge(e);t.children.has(o)||t.children.set(o,Ia());const r=t.children.get(o);e=Oe(e),cs(r,e,n)}}function Kf(t,e){if(ye(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Je,(o,r)=>{cs(t,new xe(o),r)}),Kf(t,e)}}else if(t.children.size>0){const n=ge(e);return e=Oe(e),t.children.has(n)&&Kf(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Qf(t,e,n){t.value!==null?n(e,t.value):OI(t,(o,r)=>{const a=new xe(e.toString()+"/"+o);Qf(r,a,n)})}function OI(t,e){t.children.forEach((n,o)=>{e(o,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&dt(this.last_,(o,r)=>{n[o]=n[o]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=10*1e3,GI=30*1e3,VI=300*1e3;class FI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new HI(e);const o=O_+(GI-O_)*Math.random();Rr(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),n={};let o=!1;dt(e,(r,a)=>{a>0&&Cn(this.statsToReport_,r)&&(n[r]=a,o=!0)}),o&&this.server_.reportStats(n),Rr(this.reportStats_.bind(this),Math.floor(Math.random()*2*VI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(an||(an={}));function Pd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Od(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,o){this.path=e,this.affectedTree=n,this.revert=o,this.type=an.ACK_USER_WRITE,this.source=Pd()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new xe(e));return new wa(be(),n,this.revert)}}else return K(ge(this.path)===e,"operationForChild called for unrelated child."),new wa(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){this.source=e,this.path=n,this.type=an.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new Hr(this.source,be()):new Hr(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,o){this.source=e,this.path=n,this.snap=o,this.type=an.OVERWRITE}operationForChild(e){return ye(this.path)?new eo(this.source,be(),this.snap.getImmediateChild(e)):new eo(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,o){this.source=e,this.path=n,this.children=o,this.type=an.MERGE}operationForChild(e){if(ye(this.path)){const n=this.children.subtree(new xe(e));return n.isEmpty()?null:n.value?new eo(this.source,be(),n.value):new os(this.source,be(),n)}else return K(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new os(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,o){this.node_=e,this.fullyInitialized_=n,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function BI(t,e,n,o){const r=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(UI(c.childName,c.snapshotNode))}),yr(t,r,"child_removed",e,o,n),yr(t,r,"child_added",e,o,n),yr(t,r,"child_moved",a,o,n),yr(t,r,"child_changed",e,o,n),yr(t,r,"value",e,o,n),r}function yr(t,e,n,o,r,a){const c=o.filter(h=>h.type===n);c.sort((h,g)=>YI(t,h,g)),c.forEach(h=>{const g=zI(t,h,a);r.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(g,t.query_))})})}function zI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YI(t,e,n){if(e.childName==null||n.childName==null)throw ls("Should only compare child_ events.");const o=new ve(e.childName,e.snapshotNode),r=new ve(n.childName,n.snapshotNode);return t.index_.compare(o,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t,e){return{eventCache:t,serverCache:e}}function Ir(t,e,n,o){return za(new to(e,n,o),t.serverCache)}function N0(t,e,n,o){return za(t.eventCache,new to(e,n,o))}function Wf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function no(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf;const JI=()=>(Mf||(Mf=new xt(MR)),Mf);class Ve{static fromObject(e){let n=new Ve(null);return dt(e,(o,r)=>{n=n.set(new xe(o),r)}),n}constructor(e,n=JI()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(ye(e))return null;{const o=ge(e),r=this.children.get(o);if(r!==null){const a=r.findRootMostMatchingPathAndValue(Oe(e),n);return a!=null?{path:Ye(new xe(o),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const n=ge(e),o=this.children.get(n);return o!==null?o.subtree(Oe(e)):new Ve(null)}}set(e,n){if(ye(e))return new Ve(n,this.children);{const o=ge(e),a=(this.children.get(o)||new Ve(null)).set(Oe(e),n),c=this.children.insert(o,a);return new Ve(this.value,c)}}remove(e){if(ye(e))return this.children.isEmpty()?new Ve(null):new Ve(null,this.children);{const n=ge(e),o=this.children.get(n);if(o){const r=o.remove(Oe(e));let a;return r.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,r),this.value===null&&a.isEmpty()?new Ve(null):new Ve(this.value,a)}else return this}}get(e){if(ye(e))return this.value;{const n=ge(e),o=this.children.get(n);return o?o.get(Oe(e)):null}}setTree(e,n){if(ye(e))return n;{const o=ge(e),a=(this.children.get(o)||new Ve(null)).setTree(Oe(e),n);let c;return a.isEmpty()?c=this.children.remove(o):c=this.children.insert(o,a),new Ve(this.value,c)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const o={};return this.children.inorderTraversal((r,a)=>{o[r]=a.fold_(Ye(e,r),n)}),n(e,this.value,o)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,o){const r=this.value?o(n,this.value):!1;if(r)return r;if(ye(e))return null;{const a=ge(e),c=this.children.get(a);return c?c.findOnPath_(Oe(e),Ye(n,a),o):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,o){if(ye(e))return this;{this.value&&o(n,this.value);const r=ge(e),a=this.children.get(r);return a?a.foreachOnPath_(Oe(e),Ye(n,r),o):new Ve(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((o,r)=>{r.foreach_(Ye(e,o),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,o)=>{o.value&&e(n,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.writeTree_=e}static empty(){return new cn(new Ve(null))}}function wr(t,e,n){if(ye(e))return new cn(new Ve(n));{const o=t.writeTree_.findRootMostValueAndPath(e);if(o!=null){const r=o.path;let a=o.value;const c=Mt(r,e);return a=a.updateChild(c,n),new cn(t.writeTree_.set(r,a))}else{const r=new Ve(n),a=t.writeTree_.setTree(e,r);return new cn(a)}}}function Xf(t,e,n){let o=t;return dt(n,(r,a)=>{o=wr(o,Ye(e,r),a)}),o}function H_(t,e){if(ye(e))return cn.empty();{const n=t.writeTree_.setTree(e,new Ve(null));return new cn(n)}}function $f(t,e){return oo(t,e)!=null}function oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Mt(n.path,e)):null}function G_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Je,(o,r)=>{e.push(new ve(o,r))}):t.writeTree_.children.inorderTraversal((o,r)=>{r.value!=null&&e.push(new ve(o,r.value))}),e}function Ti(t,e){if(ye(e))return t;{const n=oo(t,e);return n!=null?new cn(new Ve(n)):new cn(t.writeTree_.subtree(e))}}function Zf(t){return t.writeTree_.isEmpty()}function ss(t,e){return b0(be(),t.writeTree_,e)}function b0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let o=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(K(a.value!==null,"Priority writes must always be leaf nodes"),o=a.value):n=b0(Ye(t,r),a,n)}),!n.getChild(t).isEmpty()&&o!==null&&(n=n.updateChild(Ye(t,".priority"),o)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e){return U0(e,t)}function KI(t,e,n,o,r){K(o>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:o,visible:r}),r&&(t.visibleWrites=wr(t.visibleWrites,e,n)),t.lastWriteId=o}function QI(t,e,n,o){K(o>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:o,visible:!0}),t.visibleWrites=Xf(t.visibleWrites,e,n),t.lastWriteId=o}function WI(t,e){for(let n=0;n<t.allWrites.length;n++){const o=t.allWrites[n];if(o.writeId===e)return o}return null}function XI(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const o=t.allWrites[n];t.allWrites.splice(n,1);let r=o.visible,a=!1,c=t.allWrites.length-1;for(;r&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&$I(h,o.path)?r=!1:Zt(o.path,h.path)&&(a=!0)),c--}if(r){if(a)return ZI(t),!0;if(o.snap)t.visibleWrites=H_(t.visibleWrites,o.path);else{const h=o.children;dt(h,g=>{t.visibleWrites=H_(t.visibleWrites,Ye(o.path,g))})}return!0}else return!1}function $I(t,e){if(t.snap)return Zt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Zt(Ye(t.path,n),e))return!0;return!1}function ZI(t){t.visibleWrites=M0(t.allWrites,jI,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jI(t){return t.visible}function M0(t,e,n){let o=cn.empty();for(let r=0;r<t.length;++r){const a=t[r];if(e(a)){const c=a.path;let h;if(a.snap)Zt(n,c)?(h=Mt(n,c),o=wr(o,h,a.snap)):Zt(c,n)&&(h=Mt(c,n),o=wr(o,be(),a.snap.getChild(h)));else if(a.children){if(Zt(n,c))h=Mt(n,c),o=Xf(o,h,a.children);else if(Zt(c,n))if(h=Mt(c,n),ye(h))o=Xf(o,be(),a.children);else{const g=es(a.children,ge(h));if(g){const m=g.getChild(Oe(h));o=wr(o,be(),m)}}}else throw ls("WriteRecord should have .snap or .children")}}return o}function x0(t,e,n,o,r){if(!o&&!r){const a=oo(t.visibleWrites,e);if(a!=null)return a;{const c=Ti(t.visibleWrites,e);if(Zf(c))return n;if(n==null&&!$f(c,be()))return null;{const h=n||ue.EMPTY_NODE;return ss(c,h)}}}else{const a=Ti(t.visibleWrites,e);if(!r&&Zf(a))return n;if(!r&&n==null&&!$f(a,be()))return null;{const c=function(m){return(m.visible||r)&&(!o||!~o.indexOf(m.writeId))&&(Zt(m.path,e)||Zt(e,m.path))},h=M0(t.allWrites,c,e),g=n||ue.EMPTY_NODE;return ss(h,g)}}}function ew(t,e,n){let o=ue.EMPTY_NODE;const r=oo(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Je,(a,c)=>{o=o.updateImmediateChild(a,c)}),o;if(n){const a=Ti(t.visibleWrites,e);return n.forEachChild(Je,(c,h)=>{const g=ss(Ti(a,new xe(c)),h);o=o.updateImmediateChild(c,g)}),G_(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}else{const a=Ti(t.visibleWrites,e);return G_(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}}function tw(t,e,n,o,r){K(o||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ye(e,n);if($f(t.visibleWrites,a))return null;{const c=Ti(t.visibleWrites,a);return Zf(c)?r.getChild(n):ss(c,r.getChild(n))}}function nw(t,e,n,o){const r=Ye(e,n),a=oo(t.visibleWrites,r);if(a!=null)return a;if(o.isCompleteForChild(n)){const c=Ti(t.visibleWrites,r);return ss(c,o.getNode().getImmediateChild(n))}else return null}function iw(t,e){return oo(t.visibleWrites,e)}function ow(t,e,n,o,r,a,c){let h;const g=Ti(t.visibleWrites,e),m=oo(g,be());if(m!=null)h=m;else if(n!=null)h=ss(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const y=[],E=c.getCompare(),v=a?h.getReverseIteratorFrom(o,c):h.getIteratorFrom(o,c);let C=v.getNext();for(;C&&y.length<r;)E(C,o)!==0&&y.push(C),C=v.getNext();return y}else return[]}function sw(){return{visibleWrites:cn.empty(),allWrites:[],lastWriteId:-1}}function Na(t,e,n,o){return x0(t.writeTree,t.treePath,e,n,o)}function Gd(t,e){return ew(t.writeTree,t.treePath,e)}function V_(t,e,n,o){return tw(t.writeTree,t.treePath,e,n,o)}function ba(t,e){return iw(t.writeTree,Ye(t.treePath,e))}function rw(t,e,n,o,r,a){return ow(t.writeTree,t.treePath,e,n,o,r,a)}function Vd(t,e,n){return nw(t.writeTree,t.treePath,e,n)}function D0(t,e){return U0(Ye(t.treePath,e),t.writeTree)}function U0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,o=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(o!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(o);if(r){const a=r.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(o,kr(o,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(o);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(o,Pr(o,r.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(o,is(o,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(o,kr(o,e.snapshotNode,r.oldSnap));else throw ls("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{getCompleteChild(e){return null}getChildAfterChild(e,n,o){return null}}const L0=new aw;class Fd{constructor(e,n,o=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=o}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new to(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vd(this.writes_,e,o)}}getChildAfterChild(e,n,o){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:no(this.viewCache_),a=rw(this.writes_,r,n,1,o,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){return{filter:t}}function cw(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fw(t,e,n,o,r){const a=new lw;let c,h;if(n.type===an.OVERWRITE){const m=n;m.source.fromUser?c=jf(t,e,m.path,m.snap,o,r,a):(K(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!ye(m.path),c=Ma(t,e,m.path,m.snap,o,r,h,a))}else if(n.type===an.MERGE){const m=n;m.source.fromUser?c=hw(t,e,m.path,m.children,o,r,a):(K(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),c=ed(t,e,m.path,m.children,o,r,h,a))}else if(n.type===an.ACK_USER_WRITE){const m=n;m.revert?c=gw(t,e,m.path,o,r,a):c=pw(t,e,m.path,m.affectedTree,o,r,a)}else if(n.type===an.LISTEN_COMPLETE)c=mw(t,e,n.path,o,a);else throw ls("Unknown operation type: "+n.type);const g=a.getChanges();return dw(e,c,g),{viewCache:c,changes:g}}function dw(t,e,n){const o=e.eventCache;if(o.isFullyInitialized()){const r=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=Wf(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&n.push(w0(Wf(e)))}}function P0(t,e,n,o,r,a){const c=e.eventCache;if(ba(o,n)!=null)return e;{let h,g;if(ye(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=no(e),y=m instanceof ue?m:ue.EMPTY_NODE,E=Gd(o,y);h=t.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const m=Na(o,no(e));h=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=ge(n);if(m===".priority"){K(Si(n)===1,"Can't have a priority with additional path components");const y=c.getNode();g=e.serverCache.getNode();const E=V_(o,n,y,g);E!=null?h=t.filter.updatePriority(y,E):h=c.getNode()}else{const y=Oe(n);let E;if(c.isCompleteForChild(m)){g=e.serverCache.getNode();const v=V_(o,n,c.getNode(),g);v!=null?E=c.getNode().getImmediateChild(m).updateChild(y,v):E=c.getNode().getImmediateChild(m)}else E=Vd(o,m,e.serverCache);E!=null?h=t.filter.updateChild(c.getNode(),m,E,y,r,a):h=c.getNode()}}return Ir(e,h,c.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Ma(t,e,n,o,r,a,c,h){const g=e.serverCache;let m;const y=c?t.filter:t.filter.getIndexedFilter();if(ye(n))m=y.updateFullNode(g.getNode(),o,null);else if(y.filtersNodes()&&!g.isFiltered()){const C=g.getNode().updateChild(n,o);m=y.updateFullNode(g.getNode(),C,null)}else{const C=ge(n);if(!g.isCompleteForPath(n)&&Si(n)>1)return e;const R=Oe(n),N=g.getNode().getImmediateChild(C).updateChild(R,o);C===".priority"?m=y.updatePriority(g.getNode(),N):m=y.updateChild(g.getNode(),C,N,R,L0,null)}const E=N0(e,m,g.isFullyInitialized()||ye(n),y.filtersNodes()),v=new Fd(r,E,a);return P0(t,E,n,r,v,h)}function jf(t,e,n,o,r,a,c){const h=e.eventCache;let g,m;const y=new Fd(r,e,a);if(ye(n))m=t.filter.updateFullNode(e.eventCache.getNode(),o,c),g=Ir(e,m,!0,t.filter.filtersNodes());else{const E=ge(n);if(E===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),o),g=Ir(e,m,h.isFullyInitialized(),h.isFiltered());else{const v=Oe(n),C=h.getNode().getImmediateChild(E);let R;if(ye(v))R=o;else{const x=y.getCompleteChild(E);x!=null?bd(v)===".priority"&&x.getChild(E0(v)).isEmpty()?R=x:R=x.updateChild(v,o):R=ue.EMPTY_NODE}if(C.equals(R))g=e;else{const x=t.filter.updateChild(h.getNode(),E,R,v,y,c);g=Ir(e,x,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function F_(t,e){return t.eventCache.isCompleteForChild(e)}function hw(t,e,n,o,r,a,c){let h=e;return o.foreach((g,m)=>{const y=Ye(n,g);F_(e,ge(y))&&(h=jf(t,h,y,m,r,a,c))}),o.foreach((g,m)=>{const y=Ye(n,g);F_(e,ge(y))||(h=jf(t,h,y,m,r,a,c))}),h}function q_(t,e,n){return n.foreach((o,r)=>{e=e.updateChild(o,r)}),e}function ed(t,e,n,o,r,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,m;ye(n)?m=o:m=new Ve(null).setTree(n,o);const y=e.serverCache.getNode();return m.children.inorderTraversal((E,v)=>{if(y.hasChild(E)){const C=e.serverCache.getNode().getImmediateChild(E),R=q_(t,C,v);g=Ma(t,g,new xe(E),R,r,a,c,h)}}),m.children.inorderTraversal((E,v)=>{const C=!e.serverCache.isCompleteForChild(E)&&v.value===null;if(!y.hasChild(E)&&!C){const R=e.serverCache.getNode().getImmediateChild(E),x=q_(t,R,v);g=Ma(t,g,new xe(E),x,r,a,c,h)}}),g}function pw(t,e,n,o,r,a,c){if(ba(r,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(o.value!=null){if(ye(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return Ma(t,e,n,g.getNode().getChild(n),r,a,h,c);if(ye(n)){let m=new Ve(null);return g.getNode().forEachChild(Xo,(y,E)=>{m=m.set(new xe(y),E)}),ed(t,e,n,m,r,a,h,c)}else return e}else{let m=new Ve(null);return o.foreach((y,E)=>{const v=Ye(n,y);g.isCompleteForPath(v)&&(m=m.set(y,g.getNode().getChild(v)))}),ed(t,e,n,m,r,a,h,c)}}function mw(t,e,n,o,r){const a=e.serverCache,c=N0(e,a.getNode(),a.isFullyInitialized()||ye(n),a.isFiltered());return P0(t,c,n,o,L0,r)}function gw(t,e,n,o,r,a){let c;if(ba(o,n)!=null)return e;{const h=new Fd(o,e,r),g=e.eventCache.getNode();let m;if(ye(n)||ge(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Na(o,no(e));else{const E=e.serverCache.getNode();K(E instanceof ue,"serverChildren would be complete if leaf node"),y=Gd(o,E)}y=y,m=t.filter.updateFullNode(g,y,a)}else{const y=ge(n);let E=Vd(o,y,e.serverCache);E==null&&e.serverCache.isCompleteForChild(y)&&(E=g.getImmediateChild(y)),E!=null?m=t.filter.updateChild(g,y,E,Oe(n),h,a):e.eventCache.getNode().hasChild(y)?m=t.filter.updateChild(g,y,ue.EMPTY_NODE,Oe(n),h,a):m=g,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Na(o,no(e)),c.isLeafNode()&&(m=t.filter.updateFullNode(m,c,a)))}return c=e.serverCache.isFullyInitialized()||ba(o,be())!=null,Ir(e,m,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,r=new Ud(o.getIndex()),a=PI(o);this.processor_=uw(a);const c=n.serverCache,h=n.eventCache,g=r.updateFullNode(ue.EMPTY_NODE,c.getNode(),null),m=a.updateFullNode(ue.EMPTY_NODE,h.getNode(),null),y=new to(g,c.isFullyInitialized(),r.filtersNodes()),E=new to(m,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=za(E,y),this.eventGenerator_=new qI(this.query_)}get query(){return this.query_}}function yw(t){return t.viewCache_.serverCache.getNode()}function vw(t,e){const n=no(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function B_(t){return t.eventRegistrations_.length===0}function Ew(t,e){t.eventRegistrations_.push(e)}function z_(t,e,n){const o=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,r);c&&o.push(c)})}if(e){let r=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))r.push(c);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return o}function Y_(t,e,n,o){e.type===an.MERGE&&e.source.queryId!==null&&(K(no(t.viewCache_),"We should always have a full cache before handling merges"),K(Wf(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,a=fw(t.processor_,r,e,n,o);return cw(t.processor_,a.viewCache),K(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,k0(t,a.changes,a.viewCache.eventCache.getNode(),null)}function Tw(t,e){const n=t.viewCache_.eventCache,o=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Je,(a,c)=>{o.push(is(a,c))}),n.isFullyInitialized()&&o.push(w0(n.getNode())),k0(t,o,n.getNode(),e)}function k0(t,e,n,o){const r=o?[o]:t.eventRegistrations_;return BI(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa;class Sw{constructor(){this.views=new Map}}function Cw(t){K(!xa,"__referenceConstructor has already been defined"),xa=t}function Aw(){return K(xa,"Reference.ts has not been loaded"),xa}function Rw(t){return t.views.size===0}function qd(t,e,n,o){const r=e.source.queryId;if(r!==null){const a=t.views.get(r);return K(a!=null,"SyncTree gave us an op for an invalid query."),Y_(a,e,n,o)}else{let a=[];for(const c of t.views.values())a=a.concat(Y_(c,e,n,o));return a}}function Iw(t,e,n,o,r){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let h=Na(n,r?o:null),g=!1;h?g=!0:o instanceof ue?(h=Gd(n,o),g=!1):(h=ue.EMPTY_NODE,g=!1);const m=za(new to(h,g,!1),new to(o,r,!1));return new _w(e,m)}return c}function ww(t,e,n,o,r,a){const c=Iw(t,e,o,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),Ew(c,n),Tw(c,n)}function Nw(t,e,n,o){const r=e._queryIdentifier,a=[];let c=[];const h=Ci(t);if(r==="default")for(const[g,m]of t.views.entries())c=c.concat(z_(m,n,o)),B_(m)&&(t.views.delete(g),m.query._queryParams.loadsAllData()||a.push(m.query));else{const g=t.views.get(r);g&&(c=c.concat(z_(g,n,o)),B_(g)&&(t.views.delete(r),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Ci(t)&&a.push(new(Aw())(e._repo,e._path)),{removed:a,events:c}}function O0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $o(t,e){let n=null;for(const o of t.views.values())n=n||vw(o,e);return n}function H0(t,e){if(e._queryParams.loadsAllData())return Ya(t);{const o=e._queryIdentifier;return t.views.get(o)}}function G0(t,e){return H0(t,e)!=null}function Ci(t){return Ya(t)!=null}function Ya(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da;function bw(t){K(!Da,"__referenceConstructor has already been defined"),Da=t}function Mw(){return K(Da,"Reference.ts has not been loaded"),Da}let xw=1;class J_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=sw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V0(t,e,n,o,r){return KI(t.pendingWriteTree_,e,n,o,r),r?fs(t,new eo(Pd(),e,n)):[]}function Dw(t,e,n,o){QI(t.pendingWriteTree_,e,n,o);const r=Ve.fromObject(n);return fs(t,new os(Pd(),e,r))}function yi(t,e,n=!1){const o=WI(t.pendingWriteTree_,e);if(XI(t.pendingWriteTree_,e)){let a=new Ve(null);return o.snap!=null?a=a.set(be(),!0):dt(o.children,c=>{a=a.set(new xe(c),!0)}),fs(t,new wa(o.path,a,n))}else return[]}function Ja(t,e,n){return fs(t,new eo(kd(),e,n))}function Uw(t,e,n){const o=Ve.fromObject(n);return fs(t,new os(kd(),e,o))}function Lw(t,e){return fs(t,new Hr(kd(),e))}function Pw(t,e,n){const o=zd(t,n);if(o){const r=Yd(o),a=r.path,c=r.queryId,h=Mt(a,e),g=new Hr(Od(c),h);return Jd(t,a,g)}else return[]}function td(t,e,n,o,r=!1){const a=e._path,c=t.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||G0(c,e))){const g=Nw(c,e,n,o);Rw(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const m=g.removed;if(h=g.events,!r){const y=m.findIndex(v=>v._queryParams.loadsAllData())!==-1,E=t.syncPointTree_.findOnPath(a,(v,C)=>Ci(C));if(y&&!E){const v=t.syncPointTree_.subtree(a);if(!v.isEmpty()){const C=Hw(v);for(let R=0;R<C.length;++R){const x=C[R],N=x.query,O=B0(t,x);t.listenProvider_.startListening(Nr(N),Ua(t,N),O.hashFn,O.onComplete)}}}!E&&m.length>0&&!o&&(y?t.listenProvider_.stopListening(Nr(e),null):m.forEach(v=>{const C=t.queryToTagMap.get(Ka(v));t.listenProvider_.stopListening(Nr(v),C)}))}Gw(t,m)}return h}function kw(t,e,n,o){const r=zd(t,o);if(r!=null){const a=Yd(r),c=a.path,h=a.queryId,g=Mt(c,e),m=new eo(Od(h),g,n);return Jd(t,c,m)}else return[]}function Ow(t,e,n,o){const r=zd(t,o);if(r){const a=Yd(r),c=a.path,h=a.queryId,g=Mt(c,e),m=Ve.fromObject(n),y=new os(Od(h),g,m);return Jd(t,c,y)}else return[]}function K_(t,e,n,o=!1){const r=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(r,(v,C)=>{const R=Mt(v,r);a=a||$o(C,R),c=c||Ci(C)});let h=t.syncPointTree_.get(r);h?(c=c||Ci(h),a=a||$o(h,be())):(h=new Sw,t.syncPointTree_=t.syncPointTree_.set(r,h));let g;a!=null?g=!0:(g=!1,a=ue.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((C,R)=>{const x=$o(R,be());x&&(a=a.updateImmediateChild(C,x))}));const m=G0(h,e);if(!m&&!e._queryParams.loadsAllData()){const v=Ka(e);K(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const C=Vw();t.queryToTagMap.set(v,C),t.tagToQueryMap.set(C,v)}const y=Hd(t.pendingWriteTree_,r);let E=ww(h,e,n,y,a,g);if(!m&&!c&&!o){const v=H0(h,e);E=E.concat(Fw(t,e,v))}return E}function Bd(t,e,n){const r=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=Mt(c,e),m=$o(h,g);if(m)return m});return x0(r,e,a,n,!0)}function fs(t,e){return F0(e,t.syncPointTree_,null,Hd(t.pendingWriteTree_,be()))}function F0(t,e,n,o){if(ye(t.path))return q0(t,e,n,o);{const r=e.get(be());n==null&&r!=null&&(n=$o(r,be()));let a=[];const c=ge(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const m=n?n.getImmediateChild(c):null,y=D0(o,c);a=a.concat(F0(h,g,m,y))}return r&&(a=a.concat(qd(r,t,o,n))),a}}function q0(t,e,n,o){const r=e.get(be());n==null&&r!=null&&(n=$o(r,be()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,m=D0(o,c),y=t.operationForChild(c);y&&(a=a.concat(q0(y,h,g,m)))}),r&&(a=a.concat(qd(r,t,o,n))),a}function B0(t,e){const n=e.query,o=Ua(t,n);return{hashFn:()=>(yw(e)||ue.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return o?Pw(t,n._path,o):Lw(t,n._path);{const a=UR(r,n);return td(t,n,null,a)}}}}function Ua(t,e){const n=Ka(e);return t.queryToTagMap.get(n)}function Ka(t){return t._path.toString()+"$"+t._queryIdentifier}function zd(t,e){return t.tagToQueryMap.get(e)}function Yd(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new xe(t.substr(0,e))}}function Jd(t,e,n){const o=t.syncPointTree_.get(e);K(o,"Missing sync point for query tag that we're tracking");const r=Hd(t.pendingWriteTree_,e);return qd(o,n,r,null)}function Hw(t){return t.fold((e,n,o)=>{if(n&&Ci(n))return[Ya(n)];{let r=[];return n&&(r=O0(n)),dt(o,(a,c)=>{r=r.concat(c)}),r}})}function Nr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Mw())(t._repo,t._path):t}function Gw(t,e){for(let n=0;n<e.length;++n){const o=e[n];if(!o._queryParams.loadsAllData()){const r=Ka(o),a=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(a)}}}function Vw(){return xw++}function Fw(t,e,n){const o=e._path,r=Ua(t,e),a=B0(t,n),c=t.listenProvider_.startListening(Nr(e),r,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(o);if(r)K(!Ci(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((m,y,E)=>{if(!ye(m)&&y&&Ci(y))return[Ya(y).query];{let v=[];return y&&(v=v.concat(O0(y).map(C=>C.query))),dt(E,(C,R)=>{v=v.concat(R)}),v}});for(let m=0;m<g.length;++m){const y=g[m];t.listenProvider_.stopListening(Nr(y),Ua(t,y))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Kd(n)}node(){return this.node_}}class Qd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ye(this.path_,e);return new Qd(this.syncTree_,n)}node(){return Bd(this.syncTree_,this.path_)}}const qw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Q_=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Bw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return zw(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Bw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},zw=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const o=t.increment;typeof o!="number"&&K(!1,"Unexpected increment value: "+o);const r=e.node();if(K(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return o;const c=r.getValue();return typeof c!="number"?o:c+o},z0=function(t,e,n,o){return Wd(e,new Qd(n,t),o)},Y0=function(t,e,n){return Wd(t,new Kd(e),n)};function Wd(t,e,n){const o=t.getPriority().val(),r=Q_(o,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=Q_(c.getValue(),e,n);return h!==c.getValue()||r!==c.getPriority().val()?new at(h,$e(r)):t}else{const c=t;return a=c,r!==c.getPriority().val()&&(a=a.updatePriority(new at(r))),c.forEachChild(Je,(h,g)=>{const m=Wd(g,e.getImmediateChild(h),n);m!==g&&(a=a.updateImmediateChild(h,m))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e="",n=null,o={children:{},childCount:0}){this.name=e,this.parent=n,this.node=o}}function $d(t,e){let n=e instanceof xe?e:new xe(e),o=t,r=ge(n);for(;r!==null;){const a=es(o.node.children,r)||{children:{},childCount:0};o=new Xd(r,o,a),n=Oe(n),r=ge(n)}return o}function ds(t){return t.node.value}function J0(t,e){t.node.value=e,nd(t)}function K0(t){return t.node.childCount>0}function Yw(t){return ds(t)===void 0&&!K0(t)}function Qa(t,e){dt(t.node.children,(n,o)=>{e(new Xd(n,t,o))})}function Q0(t,e,n,o){n&&e(t),Qa(t,r=>{Q0(r,e,!0)})}function Jw(t,e,n){let o=t.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function zr(t){return new xe(t.parent===null?t.name:zr(t.parent)+"/"+t.name)}function nd(t){t.parent!==null&&Kw(t.parent,t.name,t)}function Kw(t,e,n){const o=Yw(n),r=Cn(t.node.children,e);o&&r?(delete t.node.children[e],t.node.childCount--,nd(t)):!o&&!r&&(t.node.children[e]=n.node,t.node.childCount++,nd(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=/[\[\].#$\/\u0000-\u001F\u007F]/,Ww=/[\[\].#$\u0000-\u001F\u007F]/,xf=10*1024*1024,Zd=function(t){return typeof t=="string"&&t.length!==0&&!Qw.test(t)},W0=function(t){return typeof t=="string"&&t.length!==0&&!Ww.test(t)},Xw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),W0(t)},X0=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!qa(t)||t&&typeof t=="object"&&Cn(t,".sv")},id=function(t,e,n,o){Wa(ts(t,"value"),e,n)},Wa=function(t,e,n){const o=n instanceof xe?new hI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xi(o));if(typeof e=="function")throw new Error(t+"contains a function "+Xi(o)+" with contents = "+e.toString());if(qa(e))throw new Error(t+"contains "+e.toString()+" "+Xi(o));if(typeof e=="string"&&e.length>xf/3&&Fa(e)>xf)throw new Error(t+"contains a string greater than "+xf+" utf8 bytes "+Xi(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(dt(e,(c,h)=>{if(c===".value")r=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Zd(c)))throw new Error(t+" contains an invalid key ("+c+") "+Xi(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pI(o,c),Wa(t,h,o),mI(o)}),r&&a)throw new Error(t+' contains ".value" child '+Xi(o)+" in addition to actual children.")}},$w=function(t,e){let n,o;for(n=0;n<e.length;n++){o=e[n];const a=Lr(o);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!Zd(a[c]))throw new Error(t+"contains an invalid key ("+a[c]+") in path "+o.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(dI);let r=null;for(n=0;n<e.length;n++){if(o=e[n],r!==null&&Zt(r,o))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+o.toString());r=o}},$0=function(t,e,n,o){const r=ts(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];dt(e,(c,h)=>{const g=new xe(c);if(Wa(r,h,Ye(n,g)),bd(g)===".priority"&&!X0(h))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),$w(r,a)},Zw=function(t,e,n){if(qa(e))throw new Error(ts(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!X0(e))throw new Error(ts(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Z0=function(t,e,n,o){if(!W0(n))throw new Error(ts(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jw=function(t,e,n,o){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Z0(t,e,n)},Tr=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},eN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xw(n))throw new Error(ts(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xa(t,e){let n=null;for(let o=0;o<e.length;o++){const r=e[o],a=r.getPath();n!==null&&!Md(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(r)}n&&t.eventLists_.push(n)}function j0(t,e,n){Xa(t,n),eE(t,o=>Md(o,e))}function hn(t,e,n){Xa(t,n),eE(t,o=>Zt(o,e)||Zt(e,o))}function eE(t,e){t.recursionDepth_++;let n=!0;for(let o=0;o<t.eventLists_.length;o++){const r=t.eventLists_[o];if(r){const a=r.path;e(a)?(nN(t.eventLists_[o]),t.eventLists_[o]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function nN(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const o=n.getEventRunner();Ar&&ct("event: "+n.toString()),us(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="repo_interrupt",oN=25;class sN{constructor(e,n,o,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=o,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ia(),this.transactionQueueTree_=new Xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rN(t,e,n){if(t.stats_=wd(t.repoInfo_),t.forceRestClient_||OR())t.server_=new Ra(t.repoInfo_,(o,r,a,c)=>{W_(t,o,r,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>X_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ft(n)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new qn(t.repoInfo_,e,(o,r,a,c)=>{W_(t,o,r,a,c)},o=>{X_(t,o)},o=>{aN(t,o)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(o=>{t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(o=>{t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=qR(t.repoInfo_,()=>new FI(t.stats_,t.server_)),t.infoData_=new kI,t.infoSyncTree_=new J_({startListening:(o,r,a,c)=>{let h=[];const g=t.infoData_.getNode(o._path);return g.isEmpty()||(h=Ja(t.infoSyncTree_,o._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),jd(t,"connected",!1),t.serverSyncTree_=new J_({startListening:(o,r,a,c)=>(t.server_.listen(o,a,r,(h,g)=>{const m=c(h,g);hn(t.eventQueue_,o._path,m)}),[]),stopListening:(o,r)=>{t.server_.unlisten(o,r)}})}function lN(t){const n=t.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $a(t){return qw({timestamp:lN(t)})}function W_(t,e,n,o,r){t.dataUpdateCount++;const a=new xe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(r)if(o){const g=va(n,m=>$e(m));c=Ow(t.serverSyncTree_,a,g,r)}else{const g=$e(n);c=kw(t.serverSyncTree_,a,g,r)}else if(o){const g=va(n,m=>$e(m));c=Uw(t.serverSyncTree_,a,g)}else{const g=$e(n);c=Ja(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=rs(t,a)),hn(t.eventQueue_,h,c)}function X_(t,e){jd(t,"connected",e),e===!1&&fN(t)}function aN(t,e){dt(e,(n,o)=>{jd(t,n,o)})}function jd(t,e,n){const o=new xe("/.info/"+e),r=$e(n);t.infoData_.updateSnapshot(o,r);const a=Ja(t.infoSyncTree_,o,r);hn(t.eventQueue_,o,a)}function eh(t){return t.nextWriteId_++}function uN(t,e,n,o,r){Za(t,"set",{path:e.toString(),value:n,priority:o});const a=$a(t),c=$e(n,o),h=Bd(t.serverSyncTree_,e),g=Y0(c,h,a),m=eh(t),y=V0(t.serverSyncTree_,e,g,m,!0);Xa(t.eventQueue_,y),t.server_.put(e.toString(),c.val(!0),(v,C)=>{const R=v==="ok";R||Rt("set at "+e+" failed: "+v);const x=yi(t.serverSyncTree_,m,!R);hn(t.eventQueue_,e,x),Ai(t,r,v,C)});const E=nh(t,e);rs(t,E),hn(t.eventQueue_,E,[])}function cN(t,e,n,o){Za(t,"update",{path:e.toString(),value:n});let r=!0;const a=$a(t),c={};if(dt(n,(h,g)=>{r=!1,c[h]=z0(Ye(e,h),$e(g),t.serverSyncTree_,a)}),r)ct("update() called with empty data.  Don't do anything."),Ai(t,o,"ok",void 0);else{const h=eh(t),g=Dw(t.serverSyncTree_,e,c,h);Xa(t.eventQueue_,g),t.server_.merge(e.toString(),n,(m,y)=>{const E=m==="ok";E||Rt("update at "+e+" failed: "+m);const v=yi(t.serverSyncTree_,h,!E),C=v.length>0?rs(t,e):e;hn(t.eventQueue_,C,v),Ai(t,o,m,y)}),dt(n,m=>{const y=nh(t,Ye(e,m));rs(t,y)}),hn(t.eventQueue_,e,[])}}function fN(t){Za(t,"onDisconnectEvents");const e=$a(t),n=Ia();Qf(t.onDisconnect_,be(),(r,a)=>{const c=z0(r,a,t.serverSyncTree_,e);cs(n,r,c)});let o=[];Qf(n,be(),(r,a)=>{o=o.concat(Ja(t.serverSyncTree_,r,a));const c=nh(t,r);rs(t,c)}),t.onDisconnect_=Ia(),hn(t.eventQueue_,be(),o)}function dN(t,e,n){t.server_.onDisconnectCancel(e.toString(),(o,r)=>{o==="ok"&&Kf(t.onDisconnect_,e),Ai(t,n,o,r)})}function $_(t,e,n,o){const r=$e(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(a,c)=>{a==="ok"&&cs(t.onDisconnect_,e,r),Ai(t,o,a,c)})}function hN(t,e,n,o,r){const a=$e(n,o);t.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{c==="ok"&&cs(t.onDisconnect_,e,a),Ai(t,r,c,h)})}function pN(t,e,n,o){if(Hf(n)){ct("onDisconnect().update() called with empty data.  Don't do anything."),Ai(t,o,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,a)=>{r==="ok"&&dt(n,(c,h)=>{const g=$e(h);cs(t.onDisconnect_,Ye(e,c),g)}),Ai(t,o,r,a)})}function mN(t,e,n){let o;ge(e._path)===".info"?o=K_(t.infoSyncTree_,e,n):o=K_(t.serverSyncTree_,e,n),j0(t.eventQueue_,e._path,o)}function gN(t,e,n){let o;ge(e._path)===".info"?o=td(t.infoSyncTree_,e,n):o=td(t.serverSyncTree_,e,n),j0(t.eventQueue_,e._path,o)}function _N(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iN)}function Za(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ct(n,...e)}function Ai(t,e,n,o){e&&us(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let a=r;o&&(a+=": "+o);const c=new Error(a);c.code=r,e(c)}})}function tE(t,e,n){return Bd(t.serverSyncTree_,e,n)||ue.EMPTY_NODE}function th(t,e=t.transactionQueueTree_){if(e||ja(t,e),ds(e)){const n=iE(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&yN(t,zr(e),n)}else K0(e)&&Qa(e,n=>{th(t,n)})}function yN(t,e,n){const o=n.map(m=>m.currentWriteId),r=tE(t,e,o);let a=r;const c=r.hash();for(let m=0;m<n.length;m++){const y=n[m];K(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=Mt(e,y.path);a=a.updateChild(E,y.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,m=>{Za(t,"transaction put response",{path:g.toString(),status:m});let y=[];if(m==="ok"){const E=[];for(let v=0;v<n.length;v++)n[v].status=2,y=y.concat(yi(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&E.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();ja(t,$d(t.transactionQueueTree_,e)),th(t,t.transactionQueueTree_),hn(t.eventQueue_,e,y);for(let v=0;v<E.length;v++)us(E[v])}else{if(m==="datastale")for(let E=0;E<n.length;E++)n[E].status===3?n[E].status=4:n[E].status=0;else{Rt("transaction at "+g.toString()+" failed: "+m);for(let E=0;E<n.length;E++)n[E].status=4,n[E].abortReason=m}rs(t,e)}},c)}function rs(t,e){const n=nE(t,e),o=zr(n),r=iE(t,n);return vN(t,r,o),o}function vN(t,e,n){if(e.length===0)return;const o=[];let r=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],m=Mt(n,g.path);let y=!1,E;if(K(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)y=!0,E=g.abortReason,r=r.concat(yi(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=oN)y=!0,E="maxretry",r=r.concat(yi(t.serverSyncTree_,g.currentWriteId,!0));else{const v=tE(t,g.path,c);g.currentInputSnapshot=v;const C=e[h].update(v.val());if(C!==void 0){Wa("transaction failed: Data returned ",C,g.path);let R=$e(C);typeof C=="object"&&C!=null&&Cn(C,".priority")||(R=R.updatePriority(v.getPriority()));const N=g.currentWriteId,O=$a(t),B=Y0(R,v,O);g.currentOutputSnapshotRaw=R,g.currentOutputSnapshotResolved=B,g.currentWriteId=eh(t),c.splice(c.indexOf(N),1),r=r.concat(V0(t.serverSyncTree_,g.path,B,g.currentWriteId,g.applyLocally)),r=r.concat(yi(t.serverSyncTree_,N,!0))}else y=!0,E="nodata",r=r.concat(yi(t.serverSyncTree_,g.currentWriteId,!0))}hn(t.eventQueue_,n,r),r=[],y&&(e[h].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(E==="nodata"?o.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):o.push(()=>e[h].onComplete(new Error(E),!1,null))))}ja(t,t.transactionQueueTree_);for(let h=0;h<o.length;h++)us(o[h]);th(t,t.transactionQueueTree_)}function nE(t,e){let n,o=t.transactionQueueTree_;for(n=ge(e);n!==null&&ds(o)===void 0;)o=$d(o,n),e=Oe(e),n=ge(e);return o}function iE(t,e){const n=[];return oE(t,e,n),n.sort((o,r)=>o.order-r.order),n}function oE(t,e,n){const o=ds(e);if(o)for(let r=0;r<o.length;r++)n.push(o[r]);Qa(e,r=>{oE(t,r,n)})}function ja(t,e){const n=ds(e);if(n){let o=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[o]=n[r],o++);n.length=o,J0(e,n.length>0?n:void 0)}Qa(e,o=>{ja(t,o)})}function nh(t,e){const n=zr(nE(t,e)),o=$d(t.transactionQueueTree_,e);return Jw(o,r=>{Df(t,r)}),Df(t,o),Q0(o,r=>{Df(t,r)}),n}function Df(t,e){const n=ds(e);if(n){const o=[];let r=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(K(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(K(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),r=r.concat(yi(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&o.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?J0(e,void 0):n.length=a+1,hn(t.eventQueue_,zr(e),r);for(let c=0;c<o.length;c++)us(o[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){let e="";const n=t.split("/");for(let o=0;o<n.length;o++)if(n[o].length>0){let r=n[o];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function TN(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const o=n.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Rt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Z_=function(t,e){const n=SN(t),o=n.namespace;n.domain==="firebase.com"&&zn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&n.domain!=="localhost"&&zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||NR();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new f0(n.host,n.secure,o,r,e,"",o!==n.subdomain),path:new xe(n.pathString)}},SN=function(t){let e="",n="",o="",r="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(h=t.substring(0,m-1),t=t.substring(m+2));let y=t.indexOf("/");y===-1&&(y=t.length);let E=t.indexOf("?");E===-1&&(E=t.length),e=t.substring(0,Math.min(y,E)),y<E&&(r=EN(t.substring(y,E)));const v=TN(t.substring(Math.min(t.length,E)));m=e.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(m+1),10)):m=e.length;const C=e.slice(0,m);if(C.toLowerCase()==="localhost")n="localhost";else if(C.split(".").length<=2)n=C;else{const R=e.indexOf(".");o=e.substring(0,R).toLowerCase(),n=e.substring(R+1),a=o}"ns"in v&&(a=v.ns)}return{host:e,port:g,domain:n,subdomain:o,secure:c,scheme:h,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,o,r){this.eventType=e,this.eventRegistration=n,this.snapshot=o,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ft(this.snapshot.exportVal())}}class AN{constructor(e,n,o){this.eventRegistration=e,this.error=n,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Sn;return dN(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Tr("OnDisconnect.remove",this._path);const e=new Sn;return $_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Tr("OnDisconnect.set",this._path),id("OnDisconnect.set",e,this._path);const n=new Sn;return $_(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Tr("OnDisconnect.setWithPriority",this._path),id("OnDisconnect.setWithPriority",e,this._path),Zw("OnDisconnect.setWithPriority",n);const o=new Sn;return hN(this._repo,this._path,e,n,o.wrapCallback(()=>{})),o.promise}update(e){Tr("OnDisconnect.update",this._path),$0("OnDisconnect.update",e,this._path);const n=new Sn;return pN(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,o,r){this._repo=e,this._path=n,this._queryParams=o,this._orderByCalled=r}get key(){return ye(this._path)?null:bd(this._path)}get ref(){return new Ri(this._repo,this._path)}get _queryIdentifier(){const e=k_(this._queryParams),n=Rd(e);return n==="{}"?"default":n}get _queryObject(){return k_(this._queryParams)}isEqual(e){if(e=as(e),!(e instanceof ih))return!1;const n=this._repo===e._repo,o=Md(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&o&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+fI(this._path)}}class Ri extends ih{constructor(e,n){super(e,n,new Ld,!1)}get parent(){const e=E0(this._path);return e===null?null:new Ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class La{constructor(e,n,o){this._node=e,this.ref=n,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new xe(e),o=od(this.ref,e);return new La(this._node.getChild(n),o,Je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,r)=>e(new La(r,od(this.ref,o),Je)))}hasChild(e){const n=new xe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function la(t,e){return t=as(t),t._checkNotDeleted("ref"),e!==void 0?od(t._root,e):t._root}function od(t,e){return t=as(t),ge(t._path)===null?jw("child","path",e):Z0("child","path",e),new Ri(t._repo,Ye(t._path,e))}function j_(t){return t=as(t),new IN(t._repo,t._path)}function Uf(t,e){t=as(t),Tr("set",t._path),id("set",e,t._path);const n=new Sn;return uN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ey(t,e){$0("update",e,t._path);const n=new Sn;return cN(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class oh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const o=n._queryParams.getIndex();return new CN("value",this,new La(e.snapshotNode,new Ri(n._repo,n._path),o))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AN(this,e,n):null}matches(e){return e instanceof oh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function wN(t,e,n,o,r){const a=new RN(n,void 0),c=new oh(a);return mN(t._repo,t,c),()=>gN(t._repo,t,c)}function NN(t,e,n,o){return wN(t,"value",e)}Cw(Ri);bw(Ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FIREBASE_DATABASE_EMULATOR_HOST",sd={};let MN=!1;function xN(t,e,n,o){const r=e.lastIndexOf(":"),a=e.substring(0,r),c=Cd(a);t.repoInfo_=new f0(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),o&&(t.authTokenProvider_=o)}function DN(t,e,n,o,r){let a=o||t.options.databaseURL;a===void 0&&(t.options.projectId||zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=Z_(a,r),h=c.repoInfo,g;typeof process<"u"&&y_&&(g=y_[bN]),g?(a=`http://${g}?ns=${h.namespace}`,c=Z_(a,r),h=c.repoInfo):c.repoInfo.secure;const m=new GR(t.name,t.options,e);eN("Invalid Firebase Database URL",c),ye(c.path)||zn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=LN(h,t,m,new HR(t,n));return new PN(y,t)}function UN(t,e){const n=sd[e];(!n||n[t.key]!==t)&&zn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),_N(t),delete n[t.key]}function LN(t,e,n,o){let r=sd[e.name];r||(r={},sd[e.name]=r);let a=r[t.toURLString()];return a&&zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new sN(t,MN,n,o),r[t.toURLString()]=a,a}class PN{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zn("Cannot call "+e+" on a deleted database.")}}function kN(t=Qv(),e){const n=oR(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const o=BC("database");o&&ON(n,...o)}return n}function ON(t,e,n,o={}){t=as(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Ea(o,a.repoInfo_.emulatorOptions))return;zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new ma(ma.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:YC(o.mockUserToken,t.app.options.projectId);c=new ma(h)}Cd(e)&&(zC(e),QC("Database",!0)),xN(a,r,o,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){SR(aR),Ta(new Mr("database",(e,{instanceIdentifier:n})=>{const o=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return DN(o,r,a,n)},"PUBLIC").setMultipleInstances(!0)),Qo(v_,E_,t),Qo(v_,E_,"esm2020")}qn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};HN();const rn=[{id:"grape",name:"Grape",emoji:"",value:1,description:"Trivial, quick, and requires minimal thought  a no-brainer.",color:"bg-purple-100 text-purple-600 border-purple-200"},{id:"apple",name:"Apple",emoji:"",value:2,description:"Familiar task, but might take a bit of time. You know what's involved, but there may be nuances.",color:"bg-green-100 text-green-600 border-green-200"},{id:"cherry",name:"Cherry",emoji:"",value:3,description:"Relatively easy but may have a pesky pit in the middle. Most is known, but some unknowns to consider.",color:"bg-red-100 text-red-600 border-red-200"},{id:"pineapple",name:"Pineapple",emoji:"",value:5,description:"Requires exploration. Not an everyday occurrence; aspects of the task to figure out.",color:"bg-yellow-100 text-yellow-700 border-yellow-200"},{id:"watermelon",name:"Watermelon",emoji:"",value:8,description:"The wild card. Multiple challenges and uncertainties. Might need a metaphorical machete.",color:"bg-red-50 text-red-700 border-red-200"},{id:"tomato",name:"Tomato",emoji:"",value:0,description:"Does not belong in the salad. Inadequate info or requires further breakdown before estimation.",color:"bg-orange-100 text-orange-700 border-orange-200"},{id:"avocado",name:"Avocado",emoji:"",value:0,description:"Tricky and go bad fast. Difficult to scope due to unpredictable nature or fixed-time chores.",color:"bg-emerald-100 text-emerald-800 border-emerald-200"}],GN=({fruit:t,isSelected:e,onSelect:n,disabled:o})=>k.jsxs("button",{onClick:()=>!o&&n(t.id),disabled:o,className:`
        relative flex flex-col items-center justify-center p-4 rounded-2xl border-2 transition-all duration-300
        w-28 h-40 md:w-32 md:h-48
        ${e?"scale-110 -translate-y-4 border-yellow-400 shadow-xl ring-4 ring-yellow-200 z-10":"border-white bg-white shadow-md hover:shadow-lg hover:-translate-y-2"}
        ${o?"opacity-80 cursor-not-allowed":"cursor-pointer"}
      `,children:[k.jsx("div",{className:"text-5xl md:text-6xl mb-4",children:t.emoji}),k.jsx("div",{className:"text-sm md:text-base font-bold text-gray-700 text-center px-1 leading-tight",children:t.name}),e&&k.jsx("div",{className:"absolute -top-3 -right-3 bg-yellow-400 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-md animate-bounce",children:k.jsx("i",{className:"fas fa-check text-sm"})})]}),VN=({participants:t,isRevealed:e})=>k.jsxs("div",{className:"flex flex-col gap-4",children:[k.jsxs("h3",{className:"text-lg font-bold text-gray-700 flex items-center gap-2",children:[k.jsx("i",{className:"fas fa-users text-blue-500"}),"The Salad Bowl"]}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-3",children:t.map(n=>{const o=rn.find(r=>r.id===n.vote);return k.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("img",{src:n.avatar,alt:n.name,className:"w-10 h-10 rounded-full border-2 border-gray-100"}),k.jsxs("div",{children:[k.jsxs("div",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[n.name,n.isAI&&k.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-1 rounded uppercase tracking-tighter",children:"AI"})]}),k.jsx("div",{className:"text-xs text-gray-400",children:n.vote?"Ready":"Thinking..."})]})]}),k.jsx("div",{className:"flex items-center justify-center",children:n.vote?e?k.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl shadow-inner ${o==null?void 0:o.color}`,children:o==null?void 0:o.emoji}):k.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center text-white animate-pulse",children:k.jsx("i",{className:"fas fa-leaf"})}):k.jsx("div",{className:"w-12 h-12 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg flex items-center justify-center text-gray-300",children:k.jsx("i",{className:"fas fa-clock text-xs"})})})]},n.id)})})]}),FN=Object.prototype.toString,qN=t=>FN.call(t)==="[object Error]",BN=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function zN(t){if(!(t&&qN(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:o}=t;return n==="Load failed"?o===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:BN.has(n)}function YN(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function aa(t,e,{min:n=0,allowInfinity:o=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class sE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function JN(t,e){const n=Math.max(1,t+1),o=e.randomize?Math.random()+1:1;let r=Math.round(o*e.minTimeout*e.factor**(n-1));return r=Math.min(r,e.maxTimeout),r}function ty(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function KN({error:t,attemptNumber:e,retriesConsumed:n,startTime:o,options:r}){var C,R,x,N;const a=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(a instanceof sE)throw a.originalError;const c=Number.isFinite(r.retries)?Math.max(0,r.retries-n):r.retries,h=r.maxRetryTime??Number.POSITIVE_INFINITY,g=Object.freeze({error:a,attemptNumber:e,retriesLeft:c,retriesConsumed:n});if(await r.onFailedAttempt(g),ty(o,h)<=0)throw a;const m=await r.shouldConsumeRetry(g),y=ty(o,h);if(y<=0||c<=0)throw a;if(a instanceof TypeError&&!zN(a)){if(m)throw a;return(C=r.signal)==null||C.throwIfAborted(),!1}if(!await r.shouldRetry(g))throw a;if(!m)return(R=r.signal)==null||R.throwIfAborted(),!1;const E=JN(n,r),v=Math.min(E,y);return(x=r.signal)==null||x.throwIfAborted(),v>0&&await new Promise((O,B)=>{var W,G;const q=()=>{var ne;clearTimeout(Q),(ne=r.signal)==null||ne.removeEventListener("abort",q),B(r.signal.reason)},Q=setTimeout(()=>{var ne;(ne=r.signal)==null||ne.removeEventListener("abort",q),O()},v);r.unref&&((W=Q.unref)==null||W.call(Q)),(G=r.signal)==null||G.addEventListener("abort",q,{once:!0})}),(N=r.signal)==null||N.throwIfAborted(),!0}async function QN(t,e={}){var a,c,h;if(e={...e},YN(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),aa("factor",e.factor,{min:0,allowInfinity:!1}),aa("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),aa("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),aa("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let n=0,o=0;const r=performance.now();for(;!Number.isFinite(e.retries)||o<=e.retries;){n++;try{(c=e.signal)==null||c.throwIfAborted();const g=await t(n);return(h=e.signal)==null||h.throwIfAborted(),g}catch(g){await KN({error:g,attemptNumber:n,retriesConsumed:o,startTime:r,options:e})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var WN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let XN,$N;function ZN(){return{geminiUrl:XN,vertexUrl:$N}}function jN(t,e,n,o){var r,a;if(!(t!=null&&t.baseUrl)){const c=ZN();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jn{}function X(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let m=0;m<g.length;m++){const y=g[m];d(y,e.slice(a+1),n[m])}else for(const m of g)d(m,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];d(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>f(h,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function eb(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),a=o.split("."),c=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const m=a[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}rd(t,r,a,0,c)}}function rd(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])rd(g,e,n,o+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,y]of Object.entries(g)){const E=[];for(const v of n.slice(o))v==="*"?E.push(m):E.push(v);d(c,E,y)}for(const m of h)delete c[m]}}else{const c=t;a in c&&rd(c[a],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tb(t){const e={},n=f(t,["operationName"]);n!=null&&d(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function nb(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],ob(c)),e}function ib(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],sb(c)),e}function ob(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>rb(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function sb(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>lb(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function rb(t){const e={},n=f(t,["video"]);return n!=null&&d(e,["video"],hb(n)),e}function lb(t){const e={},n=f(t,["_self"]);return n!=null&&d(e,["video"],pb(n)),e}function ab(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function ub(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function cb(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],fb(c)),e}function fb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function rE(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],db(c)),e}function db(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function hb(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],sh(o));const r=f(t,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function pb(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],sh(o));const r=f(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ny;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ny||(ny={}));var iy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(iy||(iy={}));var oy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(oy||(oy={}));var un;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(un||(un={}));var sy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sy||(sy={}));var ry;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ry||(ry={}));var ly;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ly||(ly={}));var ay;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ay||(ay={}));var uy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(uy||(uy={}));var cy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cy||(cy={}));var fy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(fy||(fy={}));var dy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(dy||(dy={}));var hy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hy||(hy={}));var py;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(py||(py={}));var my;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(my||(my={}));var gy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(gy||(gy={}));var _y;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_y||(_y={}));var yy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yy||(yy={}));var vy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vy||(vy={}));var Ey;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ey||(Ey={}));var Ty;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ty||(Ty={}));var Pa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Pa||(Pa={}));var Sy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Sy||(Sy={}));var Cy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cy||(Cy={}));var Ay;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ay||(Ay={}));var ld;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ld||(ld={}));var Ry;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ry||(Ry={}));var Iy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Iy||(Iy={}));var ad;(function(t){t.COLLECTION="COLLECTION"})(ad||(ad={}));var wy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(wy||(wy={}));var Ny;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ny||(Ny={}));var by;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(by||(by={}));var My;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(My||(My={}));var xy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(xy||(xy={}));var Dy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dy||(Dy={}));var Uy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Uy||(Uy={}));var Ly;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ly||(Ly={}));var Py;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Py||(Py={}));var ky;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ky||(ky={}));var Oy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Oy||(Oy={}));var Hy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Hy||(Hy={}));var Gy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Gy||(Gy={}));var Vy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Vy||(Vy={}));var Fy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Fy||(Fy={}));var qy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qy||(qy={}));var By;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(By||(By={}));var zy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zy||(zy={}));var Yy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Yy||(Yy={}));var Jy;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Jy||(Jy={}));var Ky;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Ky||(Ky={}));var Qy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Qy||(Qy={}));var Wy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Wy||(Wy={}));var Xy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Xy||(Xy={}));var $y;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($y||($y={}));var Zy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zy||(Zy={}));var jy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(jy||(jy={}));var Jo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Jo||(Jo={}));class ud{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class vr{get text(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const E=[];for(const v of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[C,R]of Object.entries(v))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(R!==null||R!==void 0)&&E.push(C);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;y=!0,m+=v.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[v,C]of Object.entries(E))v!=="inlineData"&&(C!==null||C!==void 0)&&y.push(v);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,r,a,c,h,g,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,r,a,c,h,g,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class ev{}class tv{}class mb{}class gb{}class _b{}class yb{}class nv{}class iv{}class ov{}class vb{}class ka{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ka;let r;const a=e;return n?r=ib(a):r=nb(a),Object.assign(o,r),o}}class sv{}class rv{}class lv{}class av{}class Eb{}class Tb{}class Sb{}class rh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new rh,a=cb(e);return Object.assign(o,a),o}}class Cb{}class Ab{}class Rb{}class Ib{}class uv{}class wb{get text(){var e,n,o;let r="",a=!1;const c=[];for(const h of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,o;let r="";const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Nb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class lh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new lh,a=rE(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ne(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function lE(t,e){const n=Ne(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function aE(t){return Array.isArray(t)?t.map(e=>Oa(e)):[Oa(t)]}function Oa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function uE(t){const e=Oa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cE(t){const e=Oa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>cv(e)):[cv(t)]}function cd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function fv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function dv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Et(t){if(t==null)throw new Error("ContentUnion is required");return cd(t)?t:{role:"user",parts:fE(t)}}function ah(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Et(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Et(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Et(n)):[Et(e)]}function jt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(fv(t)||dv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Et(t)]}const e=[],n=[],o=cd(t[0]);for(const r of t){const a=cd(r);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(fv(r)||dv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:fE(n)}),e}function bb(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(un).includes(n[0].toUpperCase())?n[0].toUpperCase():un.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(un).includes(o.toUpperCase())?o.toUpperCase():un.TYPE_UNSPECIFIED})}}function Zo(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&bb(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(un).includes(h.toUpperCase())?h.toUpperCase():un.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Zo(h);else if(o.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(Zo(m))}e[c]=g}else if(r.includes(c)){const g={};for(const[m,y]of Object.entries(h))g[m]=Zo(y);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function uh(t){return Zo(t)}function ch(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function hs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zo(e.response));return t}function ps(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Mb(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Kn(t,e){if(typeof e!="string")throw new Error("name must be a string");return Mb(t,e,"cachedContents")}function dE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ii(t){return sh(t)}function xb(t){return t!=null&&typeof t=="object"&&"name"in t}function Db(t){return t!=null&&typeof t=="object"&&"video"in t}function Ub(t){return t!=null&&typeof t=="object"&&"uri"in t}function hE(t){var e;let n;if(xb(t)&&(n=t.name),!(Ub(t)&&(n=t.uri,n===void 0))&&!(Db(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function pE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mE(t){for(const e of["models","tunedModels","publisherModels"])if(Lb(t,e))return t[e];return[]}function Lb(t,e){return t!==null&&typeof t=="object"&&e in t}function Pb(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function kb(t,e={}){const n=[],o=new Set;for(const r of t){const a=r.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=Pb(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function gE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Ob(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _E(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ms(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hb(t){const e={},n=f(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>yM(c))),d(e,["inlinedResponses"],a)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["inlinedEmbedContentResponses"],a)}return e}function Gb(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function Vb(t){const e={},n=f(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ga(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&d(e,["state"],yE(r));const a=f(t,["metadata","createTime"]);a!=null&&d(e,["createTime"],a);const c=f(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const g=f(t,["metadata","model"]);g!=null&&d(e,["model"],g);const m=f(t,["metadata","output"]);return m!=null&&d(e,["dest"],Hb(_E(m))),e}function fd(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(t,["state"]);r!=null&&d(e,["state"],yE(r));const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(e,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(e,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const y=f(t,["model"]);y!=null&&d(e,["model"],y);const E=f(t,["inputConfig"]);E!=null&&d(e,["src"],Fb(E));const v=f(t,["outputConfig"]);v!=null&&d(e,["dest"],Gb(_E(v)));const C=f(t,["completionStats"]);return C!=null&&d(e,["completionStats"],C),e}function Fb(t){const e={},n=f(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function qb(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&d(n,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>_M(t,c))),d(n,["requests","requests"],a)}return n}function Bb(t){const e={},n=f(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function zb(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Yb(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function Jb(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function Kb(t){const e={},n=f(t,["content"]);n!=null&&d(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],Qb(o));const r=f(t,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const y=f(t,["safetyRatings"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(C=>C)),d(e,["safetyRatings"],v)}const E=f(t,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function Qb(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function vE(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>RM(a))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function Wb(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Xb(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],Vb(Ob(r))),n}function hv(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ne(t,o));const r=f(e,["src"]);r!=null&&d(n,["batch","inputConfig"],qb(t,gE(t,r)));const a=f(e,["config"]);return a!=null&&Wb(a,n),n}function $b(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],Ne(t,o));const r=f(e,["src"]);r!=null&&d(n,["inputConfig"],Bb(gE(t,r)));const a=f(e,["config"]);return a!=null&&Xb(a,n),n}function Zb(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),n}function jb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ne(t,o));const r=f(e,["src"]);r!=null&&d(n,["batch","inputConfig"],rM(t,r));const a=f(e,["config"]);return a!=null&&Zb(a,n),n}function eM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function tM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function nM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function iM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function oM(t,e){const n={},o=f(e,["contents"]);if(o!=null){let a=ah(t,o);Array.isArray(a)&&(a=a.map(c=>c)),d(n,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(d(n,["_self"],sM(r,n)),eb(n,{"requests[].*":"requests[].request.*"})),n}function sM(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rM(t,e){const n={},o=f(e,["fileName"]);o!=null&&d(n,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&d(n,["requests"],oM(t,r)),n}function lM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function aM(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uM(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cM(t,e,n){const o={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],vE(Et(r)));const a=f(e,["temperature"]);a!=null&&d(o,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const y=f(e,["stopSequences"]);y!=null&&d(o,["stopSequences"],y);const E=f(e,["responseLogprobs"]);E!=null&&d(o,["responseLogprobs"],E);const v=f(e,["logprobs"]);v!=null&&d(o,["logprobs"],v);const C=f(e,["presencePenalty"]);C!=null&&d(o,["presencePenalty"],C);const R=f(e,["frequencyPenalty"]);R!=null&&d(o,["frequencyPenalty"],R);const x=f(e,["seed"]);x!=null&&d(o,["seed"],x);const N=f(e,["responseMimeType"]);N!=null&&d(o,["responseMimeType"],N);const O=f(e,["responseSchema"]);O!=null&&d(o,["responseSchema"],uh(O));const B=f(e,["responseJsonSchema"]);if(B!=null&&d(o,["responseJsonSchema"],B),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=f(e,["safetySettings"]);if(n!==void 0&&q!=null){let De=q;Array.isArray(De)&&(De=De.map(J=>IM(J))),d(n,["safetySettings"],De)}const Q=f(e,["tools"]);if(n!==void 0&&Q!=null){let De=ps(Q);Array.isArray(De)&&(De=De.map(J=>NM(hs(J)))),d(n,["tools"],De)}const W=f(e,["toolConfig"]);if(n!==void 0&&W!=null&&d(n,["toolConfig"],wM(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=f(e,["cachedContent"]);n!==void 0&&G!=null&&d(n,["cachedContent"],Kn(t,G));const ne=f(e,["responseModalities"]);ne!=null&&d(o,["responseModalities"],ne);const Ce=f(e,["mediaResolution"]);Ce!=null&&d(o,["mediaResolution"],Ce);const V=f(e,["speechConfig"]);if(V!=null&&d(o,["speechConfig"],ch(V)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=f(e,["thinkingConfig"]);$!=null&&d(o,["thinkingConfig"],$);const Ee=f(e,["imageConfig"]);Ee!=null&&d(o,["imageConfig"],gM(Ee));const Pe=f(e,["enableEnhancedCivicAnswers"]);if(Pe!=null&&d(o,["enableEnhancedCivicAnswers"],Pe),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function fM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>Kb(m))),d(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function dM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function hM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],ms(t,o)),n}function pM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function mM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function gM(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _M(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["request","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let h=jt(r);Array.isArray(h)&&(h=h.map(g=>vE(g))),d(n,["request","contents"],h)}const a=f(e,["metadata"]);a!=null&&d(n,["metadata"],a);const c=f(e,["config"]);return c!=null&&d(n,["request","generationConfig"],cM(t,c,f(n,["request"],{}))),n}function yM(t){const e={},n=f(t,["response"]);n!=null&&d(e,["response"],fM(n));const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["error"]);return r!=null&&d(e,["error"],r),e}function vM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function EM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const a=f(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),n}function TM(t){const e={},n=f(t,["config"]);return n!=null&&vM(n,e),e}function SM(t){const e={},n=f(t,["config"]);return n!=null&&EM(n,e),e}function CM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>ga(c))),d(e,["batchJobs"],a)}return e}function AM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>fd(c))),d(e,["batchJobs"],a)}return e}function RM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],lM(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],aM(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],zb(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const y=f(t,["thought"]);y!=null&&d(e,["thought"],y);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const v=f(t,["videoMetadata"]);return v!=null&&d(e,["videoMetadata"],v),e}function IM(t){const e={},n=f(t,["category"]);if(n!=null&&d(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function wM(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],uM(o)),e}function NM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),d(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],pM(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],mM(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Yn||(Yn={}));class so{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bM extends Jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Yn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=hv(this.apiClient,e),o=n._url,r=X("{model}:batchGenerateContent",o),h=n.batch.inputConfig.requests,g=h.requests,m=[];for(const y of g){const E=Object.assign({},y);if(E.systemInstruction){const v=E.systemInstruction;delete E.systemInstruction;const C=E.request;C.systemInstruction=v,E.request=C}m.push(E)}return h.requests=m,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=$b(this.apiClient,e);return h=X("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>fd(y))}else{const m=hv(this.apiClient,e);return h=X("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>ga(y))}}async createEmbeddingsInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jb(this.apiClient,e);return a=X("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>ga(g))}}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=hM(this.apiClient,e);return h=X("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>fd(y))}else{const m=dM(this.apiClient,e);return h=X("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>ga(y))}}async cancel(e){var n,o,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=Jb(this.apiClient,e);c=X("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=Yb(this.apiClient,e);c=X("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=SM(e);return h=X("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=AM(y),v=new uv;return Object.assign(v,E),v})}else{const m=TM(e);return h=X("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=CM(y),v=new uv;return Object.assign(v,E),v})}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=tM(this.apiClient,e);return h=X("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>iM(y))}else{const m=eM(this.apiClient,e);return h=X("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>nM(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MM(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function pv(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>jM(a))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function xM(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=jt(c);Array.isArray(y)&&(y=y.map(E=>pv(E))),d(e,["contents"],y)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],pv(Et(h)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(E=>tx(E))),d(e,["tools"],y)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],ex(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function DM(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let E=jt(c);Array.isArray(E)&&(E=E.map(v=>v)),d(e,["contents"],E)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],Et(h));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(v=>nx(v))),d(e,["tools"],E)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&d(e,["encryption_spec","kmsKeyName"],y),n}function UM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],lE(t,o));const r=f(e,["config"]);return r!=null&&xM(r,n),n}function LM(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],lE(t,o));const r=f(e,["config"]);return r!=null&&DM(r,n),n}function PM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Kn(t,o)),n}function kM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Kn(t,o)),n}function OM(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function HM(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function GM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function VM(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FM(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qM(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["parameters"]);r!=null&&d(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function BM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Kn(t,o)),n}function zM(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Kn(t,o)),n}function YM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function JM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function KM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function QM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function WM(t){const e={},n=f(t,["config"]);return n!=null&&KM(n,e),e}function XM(t){const e={},n=f(t,["config"]);return n!=null&&QM(n,e),e}function $M(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function ZM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function jM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],GM(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],VM(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],MM(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const y=f(t,["thought"]);y!=null&&d(e,["thought"],y);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const v=f(t,["videoMetadata"]);return v!=null&&d(e,["videoMetadata"],v),e}function ex(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],FM(o)),e}function tx(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),d(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],YM(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],JM(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function nx(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(v=>qM(v))),d(e,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&d(e,["urlContext"],y),e}function ix(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function ox(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),n}function sx(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],Kn(t,o));const r=f(e,["config"]);return r!=null&&ix(r,n),n}function rx(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],Kn(t,o));const r=f(e,["config"]);return r!=null&&ox(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lx extends Jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Yn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=LM(this.apiClient,e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=UM(this.apiClient,e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=zM(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=BM(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=kM(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=HM(y),v=new lv;return Object.assign(v,E),v})}else{const m=PM(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=OM(y),v=new lv;return Object.assign(v,E),v})}}async update(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=rx(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=sx(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=XM(e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=ZM(y),v=new av;return Object.assign(v,E),v})}else{const m=WM(e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=$M(y),v=new av;return Object.assign(v,E),v})}}}function Ha(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function mv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(t){return this instanceof ce?(this.v=t,this):new ce(t)}function fn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(C){return function(R){return Promise.resolve(R).then(C,E)}}function h(C,R){o[C]&&(r[C]=function(x){return new Promise(function(N,O){a.push([C,x,N,O])>1||g(C,x)})},R&&(r[C]=R(r[C])))}function g(C,R){try{m(o[C](R))}catch(x){v(a[0][3],x)}}function m(C){C.value instanceof ce?Promise.resolve(C.value.v).then(y,E):v(a[0][2],C)}function y(C){g("next",C)}function E(C){g("throw",C)}function v(C,R){C(R),a.shift(),a.length&&g(a[0][0],a[0][1])}}function dn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mv=="function"?mv(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),r(h,g,c.done,c.value)})}}function r(a,c,h,g){Promise.resolve(g).then(function(m){a({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ax(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:EE(n)}function EE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ux(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let a=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),a&&!EE(t[o])&&(a=!1),o++;a?e.push(...r):e.pop()}return e}class cx{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new fx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fx{constructor(e,n,o,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),ux(a)}async sendMessage(e){var n;await this.sendPromise;const o=Et(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await r,m=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,y=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let v=[];y!=null&&(v=(h=y.slice(E))!==null&&h!==void 0?h:[]);const C=m?[m]:[];this.recordHistory(o,C,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Et(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?gv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return fn(this,arguments,function*(){var r,a,c,h,g,m;const y=[];try{for(var E=!0,v=dn(e),C;C=yield ce(v.next()),r=C.done,!r;E=!0){h=C.value,E=!1;const R=h;if(ax(R)){const x=(m=(g=R.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;x!==void 0&&y.push(x)}yield yield ce(R)}}catch(R){a={error:R}}finally{try{!E&&!r&&(c=v.return)&&(yield ce(c.call(v)))}finally{if(a)throw a.error}}this.recordHistory(n,y)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...gv(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dx(t){const e={},n=f(t,["file"]);return n!=null&&d(e,["file"],n),e}function hx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function px(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],hE(n)),e}function mx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function gx(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],hE(n)),e}function _x(t){const e={},n=f(t,["uris"]);return n!=null&&d(e,["uris"],n),e}function yx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function vx(t){const e={},n=f(t,["config"]);return n!=null&&yx(n,e),e}function Ex(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["files"],a)}return e}function Tx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),d(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sx extends Jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Yn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vx(e);return a=X("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=Ex(g),y=new Cb;return Object.assign(y,m),y})}}async createInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dx(e);return a=X("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=hx(g),y=new Ab;return Object.assign(y,m),y})}}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gx(e);return a=X("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=px(e);return a=X("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=mx(g),y=new Rb;return Object.assign(y,m),y})}}async registerFilesInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_x(e);return a=X("files:register",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Tx(g),y=new Ib;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _a(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Cx(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Gx(a))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function Ax(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Rx(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ix(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const r=f(t,["parameters"]);r!=null&&d(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function wx(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&d(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const y=f(t,["mediaResolution"]);y!=null&&d(e,["mediaResolution"],y);const E=f(t,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const v=f(t,["responseLogprobs"]);v!=null&&d(e,["responseLogprobs"],v);const C=f(t,["responseMimeType"]);C!=null&&d(e,["responseMimeType"],C);const R=f(t,["responseModalities"]);R!=null&&d(e,["responseModalities"],R);const x=f(t,["responseSchema"]);x!=null&&d(e,["responseSchema"],x);const N=f(t,["routingConfig"]);N!=null&&d(e,["routingConfig"],N);const O=f(t,["seed"]);O!=null&&d(e,["seed"],O);const B=f(t,["speechConfig"]);B!=null&&d(e,["speechConfig"],B);const q=f(t,["stopSequences"]);q!=null&&d(e,["stopSequences"],q);const Q=f(t,["temperature"]);Q!=null&&d(e,["temperature"],Q);const W=f(t,["thinkingConfig"]);W!=null&&d(e,["thinkingConfig"],W);const G=f(t,["topK"]);G!=null&&d(e,["topK"],G);const ne=f(t,["topP"]);if(ne!=null&&d(e,["topP"],ne),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Nx(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function bx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Mx(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],fh(E));const v=f(t,["thinkingConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","thinkingConfig"],v);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],C);const R=f(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],Cx(Et(R)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let G=ps(x);Array.isArray(G)&&(G=G.map(ne=>Fx(hs(ne)))),d(e,["setup","tools"],G)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],Vx(N));const O=f(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","inputAudioTranscription"],O);const B=f(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&d(e,["setup","outputAudioTranscription"],B);const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&d(e,["setup","realtimeInputConfig"],q);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&d(e,["setup","contextWindowCompression"],Q);const W=f(t,["proactivity"]);if(e!==void 0&&W!=null&&d(e,["setup","proactivity"],W),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xx(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],wx(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],fh(E));const v=f(t,["thinkingConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","thinkingConfig"],v);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],C);const R=f(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],Et(R));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let ne=ps(x);Array.isArray(ne)&&(ne=ne.map(Ce=>qx(hs(Ce)))),d(e,["setup","tools"],ne)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],N);const O=f(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","inputAudioTranscription"],O);const B=f(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&d(e,["setup","outputAudioTranscription"],B);const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&d(e,["setup","realtimeInputConfig"],q);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&d(e,["setup","contextWindowCompression"],Q);const W=f(t,["proactivity"]);e!==void 0&&W!=null&&d(e,["setup","proactivity"],W);const G=f(t,["explicitVadSignal"]);return e!==void 0&&G!=null&&d(e,["setup","explicitVadSignal"],G),n}function Dx(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],Mx(r,n)),n}function Ux(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],xx(r,n)),n}function Lx(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function Px(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["weightedPrompts"],o)}return e}function kx(t){const e={},n=f(t,["media"]);if(n!=null){let m=aE(n);Array.isArray(m)&&(m=m.map(y=>_a(y))),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],_a(cE(o)));const r=f(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&d(e,["video"],_a(uE(a)));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function Ox(t){const e={},n=f(t,["media"]);if(n!=null){let m=aE(n);Array.isArray(m)&&(m=m.map(y=>y)),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],cE(o));const r=f(t,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&d(e,["video"],uE(a));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function Hx(t){const e={},n=f(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&d(e,["toolCall"],r);const a=f(t,["toolCallCancellation"]);a!=null&&d(e,["toolCallCancellation"],a);const c=f(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],Bx(c));const h=f(t,["goAway"]);h!=null&&d(e,["goAway"],h);const g=f(t,["sessionResumptionUpdate"]);g!=null&&d(e,["sessionResumptionUpdate"],g);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const y=f(t,["voiceActivity"]);return y!=null&&d(e,["voiceActivity"],zx(y)),e}function Gx(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],Ax(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],Rx(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],_a(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const y=f(t,["thought"]);y!=null&&d(e,["thought"],y);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const v=f(t,["videoMetadata"]);return v!=null&&d(e,["videoMetadata"],v),e}function Vx(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fx(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),d(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],Nx(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],bx(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function qx(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(v=>Ix(v))),d(e,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&d(e,["urlContext"],y),e}function Bx(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&d(e,["toolUsePromptTokenCount"],a);const c=f(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const g=f(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(R=>R)),d(e,["promptTokensDetails"],C)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(R=>R)),d(e,["cacheTokensDetails"],C)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(R=>R)),d(e,["responseTokensDetails"],C)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(R=>R)),d(e,["toolUsePromptTokensDetails"],C)}const v=f(t,["trafficType"]);return v!=null&&d(e,["trafficType"],v),e}function zx(t){const e={},n=f(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yx(t,e){const n={},o=f(t,["data"]);if(o!=null&&d(n,["data"],o),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Jx(t,e){const n={},o=f(t,["content"]);o!=null&&d(n,["content"],o);const r=f(t,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],Kx(r));const a=f(t,["tokenCount"]);a!=null&&d(n,["tokenCount"],a);const c=f(t,["finishReason"]);c!=null&&d(n,["finishReason"],c);const h=f(t,["avgLogprobs"]);h!=null&&d(n,["avgLogprobs"],h);const g=f(t,["groundingMetadata"]);g!=null&&d(n,["groundingMetadata"],g);const m=f(t,["index"]);m!=null&&d(n,["index"],m);const y=f(t,["logprobsResult"]);y!=null&&d(n,["logprobsResult"],y);const E=f(t,["safetyRatings"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(R=>R)),d(n,["safetyRatings"],C)}const v=f(t,["urlContextMetadata"]);return v!=null&&d(n,["urlContextMetadata"],v),n}function Kx(t,e){const n={},o=f(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),d(n,["citations"],r)}return n}function Qx(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let c=jt(a);Array.isArray(c)&&(c=c.map(h=>h)),d(o,["contents"],c)}return o}function Wx(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(n,["tokensInfo"],a)}return n}function Xx(t,e){const n={},o=f(t,["values"]);o!=null&&d(n,["values"],o);const r=f(t,["statistics"]);return r!=null&&d(n,["statistics"],$x(r)),n}function $x(t,e){const n={},o=f(t,["truncated"]);o!=null&&d(n,["truncated"],o);const r=f(t,["token_count"]);return r!=null&&d(n,["tokenCount"],r),n}function eu(t,e){const n={},o=f(t,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>r1(c))),d(n,["parts"],a)}const r=f(t,["role"]);return r!=null&&d(n,["role"],r),n}function Zx(t,e){const n={},o=f(t,["controlType"]);o!=null&&d(n,["controlType"],o);const r=f(t,["enableControlImageComputation"]);return r!=null&&d(n,["computeControl"],r),n}function jx(t,e){const n={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function eD(t,e,n){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],Et(r));const a=f(t,["tools"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>AE(g))),d(e,["tools"],h)}const c=f(t,["generationConfig"]);return e!==void 0&&c!=null&&d(e,["generationConfig"],YD(c)),o}function tD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let h=jt(a);Array.isArray(h)&&(h=h.map(g=>eu(g))),d(o,["contents"],h)}const c=f(e,["config"]);return c!=null&&jx(c),o}function nD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let h=jt(a);Array.isArray(h)&&(h=h.map(g=>g)),d(o,["contents"],h)}const c=f(e,["config"]);return c!=null&&eD(c,o),o}function iD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["totalTokens"]);r!=null&&d(n,["totalTokens"],r);const a=f(t,["cachedContentTokenCount"]);return a!=null&&d(n,["cachedContentTokenCount"],a),n}function oD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["totalTokens"]);return r!=null&&d(n,["totalTokens"],r),n}function sD(t,e,n){const o={},r=f(e,["model"]);return r!=null&&d(o,["_url","name"],Ne(t,r)),o}function rD(t,e,n){const o={},r=f(e,["model"]);return r!=null&&d(o,["_url","name"],Ne(t,r)),o}function lD(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function aD(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function uD(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const a=f(t,["negativePrompt"]);e!==void 0&&a!=null&&d(e,["parameters","negativePrompt"],a);const c=f(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&d(e,["parameters","personGeneration"],E);const v=f(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&d(e,["parameters","includeSafetyAttributes"],v);const C=f(t,["includeRaiReason"]);e!==void 0&&C!=null&&d(e,["parameters","includeRaiReason"],C);const R=f(t,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const x=f(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const N=f(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const O=f(t,["addWatermark"]);e!==void 0&&O!=null&&d(e,["parameters","addWatermark"],O);const B=f(t,["labels"]);e!==void 0&&B!=null&&d(e,["labels"],B);const q=f(t,["editMode"]);e!==void 0&&q!=null&&d(e,["parameters","editMode"],q);const Q=f(t,["baseSteps"]);return e!==void 0&&Q!=null&&d(e,["parameters","editConfig","baseSteps"],Q),o}function cD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["prompt"]);a!=null&&d(o,["instances[0]","prompt"],a);const c=f(e,["referenceImages"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>d1(m))),d(o,["instances[0]","referenceImages"],g)}const h=f(e,["config"]);return h!=null&&uD(h,o),o}function fD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>tu(c))),d(n,["generatedImages"],a)}return n}function dD(t,e,n){const o={},r=f(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const a=f(t,["title"]);e!==void 0&&a!=null&&d(e,["requests[]","title"],a);const c=f(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function hD(t,e,n){const o={},r=f(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const a=f(t,["title"]);e!==void 0&&a!=null&&d(e,["instances[]","title"],a);const c=f(t,["outputDimensionality"]);e!==void 0&&c!=null&&d(e,["parameters","outputDimensionality"],c);const h=f(t,["mimeType"]);e!==void 0&&h!=null&&d(e,["instances[]","mimeType"],h);const g=f(t,["autoTruncate"]);return e!==void 0&&g!=null&&d(e,["parameters","autoTruncate"],g),o}function pD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let g=ah(t,a);Array.isArray(g)&&(g=g.map(m=>m)),d(o,["requests[]","content"],g)}const c=f(e,["config"]);c!=null&&dD(c,o);const h=f(e,["model"]);return h!==void 0&&d(o,["requests[]","model"],Ne(t,h)),o}function mD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let h=ah(t,a);Array.isArray(h)&&(h=h.map(g=>g)),d(o,["instances[]","content"],h)}const c=f(e,["config"]);return c!=null&&hD(c,o),o}function gD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(n,["embeddings"],c)}const a=f(t,["metadata"]);return a!=null&&d(n,["metadata"],a),n}function _D(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>Xx(h))),d(n,["embeddings"],c)}const a=f(t,["metadata"]);return a!=null&&d(n,["metadata"],a),n}function yD(t,e){const n={},o=f(t,["endpoint"]);o!=null&&d(n,["name"],o);const r=f(t,["deployedModelId"]);return r!=null&&d(n,["deployedModelId"],r),n}function vD(t,e){const n={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["fileUri"]);o!=null&&d(n,["fileUri"],o);const r=f(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function ED(t,e){const n={},o=f(t,["id"]);o!=null&&d(n,["id"],o);const r=f(t,["args"]);r!=null&&d(n,["args"],r);const a=f(t,["name"]);if(a!=null&&d(n,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function TD(t,e){const n={},o=f(t,["allowedFunctionNames"]);o!=null&&d(n,["allowedFunctionNames"],o);const r=f(t,["mode"]);if(r!=null&&d(n,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function SD(t,e){const n={},o=f(t,["description"]);o!=null&&d(n,["description"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const a=f(t,["parameters"]);a!=null&&d(n,["parameters"],a);const c=f(t,["parametersJsonSchema"]);c!=null&&d(n,["parametersJsonSchema"],c);const h=f(t,["response"]);h!=null&&d(n,["response"],h);const g=f(t,["responseJsonSchema"]);if(g!=null&&d(n,["responseJsonSchema"],g),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function CD(t,e,n,o){const r={},a=f(e,["systemInstruction"]);n!==void 0&&a!=null&&d(n,["systemInstruction"],eu(Et(a)));const c=f(e,["temperature"]);c!=null&&d(r,["temperature"],c);const h=f(e,["topP"]);h!=null&&d(r,["topP"],h);const g=f(e,["topK"]);g!=null&&d(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const y=f(e,["maxOutputTokens"]);y!=null&&d(r,["maxOutputTokens"],y);const E=f(e,["stopSequences"]);E!=null&&d(r,["stopSequences"],E);const v=f(e,["responseLogprobs"]);v!=null&&d(r,["responseLogprobs"],v);const C=f(e,["logprobs"]);C!=null&&d(r,["logprobs"],C);const R=f(e,["presencePenalty"]);R!=null&&d(r,["presencePenalty"],R);const x=f(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const N=f(e,["seed"]);N!=null&&d(r,["seed"],N);const O=f(e,["responseMimeType"]);O!=null&&d(r,["responseMimeType"],O);const B=f(e,["responseSchema"]);B!=null&&d(r,["responseSchema"],uh(B));const q=f(e,["responseJsonSchema"]);if(q!=null&&d(r,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(n!==void 0&&Q!=null){let J=Q;Array.isArray(J)&&(J=J.map(fe=>h1(fe))),d(n,["safetySettings"],J)}const W=f(e,["tools"]);if(n!==void 0&&W!=null){let J=ps(W);Array.isArray(J)&&(J=J.map(fe=>E1(hs(fe)))),d(n,["tools"],J)}const G=f(e,["toolConfig"]);if(n!==void 0&&G!=null&&d(n,["toolConfig"],v1(G)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ne=f(e,["cachedContent"]);n!==void 0&&ne!=null&&d(n,["cachedContent"],Kn(t,ne));const Ce=f(e,["responseModalities"]);Ce!=null&&d(r,["responseModalities"],Ce);const V=f(e,["mediaResolution"]);V!=null&&d(r,["mediaResolution"],V);const $=f(e,["speechConfig"]);if($!=null&&d(r,["speechConfig"],ch($)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ee=f(e,["thinkingConfig"]);Ee!=null&&d(r,["thinkingConfig"],Ee);const Pe=f(e,["imageConfig"]);Pe!=null&&d(r,["imageConfig"],XD(Pe));const De=f(e,["enableEnhancedCivicAnswers"]);if(De!=null&&d(r,["enableEnhancedCivicAnswers"],De),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function AD(t,e,n,o){const r={},a=f(e,["systemInstruction"]);n!==void 0&&a!=null&&d(n,["systemInstruction"],Et(a));const c=f(e,["temperature"]);c!=null&&d(r,["temperature"],c);const h=f(e,["topP"]);h!=null&&d(r,["topP"],h);const g=f(e,["topK"]);g!=null&&d(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const y=f(e,["maxOutputTokens"]);y!=null&&d(r,["maxOutputTokens"],y);const E=f(e,["stopSequences"]);E!=null&&d(r,["stopSequences"],E);const v=f(e,["responseLogprobs"]);v!=null&&d(r,["responseLogprobs"],v);const C=f(e,["logprobs"]);C!=null&&d(r,["logprobs"],C);const R=f(e,["presencePenalty"]);R!=null&&d(r,["presencePenalty"],R);const x=f(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const N=f(e,["seed"]);N!=null&&d(r,["seed"],N);const O=f(e,["responseMimeType"]);O!=null&&d(r,["responseMimeType"],O);const B=f(e,["responseSchema"]);B!=null&&d(r,["responseSchema"],uh(B));const q=f(e,["responseJsonSchema"]);q!=null&&d(r,["responseJsonSchema"],q);const Q=f(e,["routingConfig"]);Q!=null&&d(r,["routingConfig"],Q);const W=f(e,["modelSelectionConfig"]);W!=null&&d(r,["modelConfig"],W);const G=f(e,["safetySettings"]);if(n!==void 0&&G!=null){let ee=G;Array.isArray(ee)&&(ee=ee.map(oe=>oe)),d(n,["safetySettings"],ee)}const ne=f(e,["tools"]);if(n!==void 0&&ne!=null){let ee=ps(ne);Array.isArray(ee)&&(ee=ee.map(oe=>AE(hs(oe)))),d(n,["tools"],ee)}const Ce=f(e,["toolConfig"]);n!==void 0&&Ce!=null&&d(n,["toolConfig"],Ce);const V=f(e,["labels"]);n!==void 0&&V!=null&&d(n,["labels"],V);const $=f(e,["cachedContent"]);n!==void 0&&$!=null&&d(n,["cachedContent"],Kn(t,$));const Ee=f(e,["responseModalities"]);Ee!=null&&d(r,["responseModalities"],Ee);const Pe=f(e,["mediaResolution"]);Pe!=null&&d(r,["mediaResolution"],Pe);const De=f(e,["speechConfig"]);De!=null&&d(r,["speechConfig"],ch(De));const J=f(e,["audioTimestamp"]);J!=null&&d(r,["audioTimestamp"],J);const fe=f(e,["thinkingConfig"]);fe!=null&&d(r,["thinkingConfig"],fe);const z=f(e,["imageConfig"]);if(z!=null&&d(r,["imageConfig"],$D(z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const se=f(e,["modelArmorConfig"]);return n!==void 0&&se!=null&&d(n,["modelArmorConfig"],se),r}function _v(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let h=jt(a);Array.isArray(h)&&(h=h.map(g=>eu(g))),d(o,["contents"],h)}const c=f(e,["config"]);return c!=null&&d(o,["generationConfig"],CD(t,c,o)),o}function yv(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["contents"]);if(a!=null){let h=jt(a);Array.isArray(h)&&(h=h.map(g=>g)),d(o,["contents"],h)}const c=f(e,["config"]);return c!=null&&d(o,["generationConfig"],AD(t,c,o)),o}function vv(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(y=>Jx(y))),d(n,["candidates"],m)}const a=f(t,["modelVersion"]);a!=null&&d(n,["modelVersion"],a);const c=f(t,["promptFeedback"]);c!=null&&d(n,["promptFeedback"],c);const h=f(t,["responseId"]);h!=null&&d(n,["responseId"],h);const g=f(t,["usageMetadata"]);return g!=null&&d(n,["usageMetadata"],g),n}function Ev(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["candidates"]);if(r!=null){let y=r;Array.isArray(y)&&(y=y.map(E=>E)),d(n,["candidates"],y)}const a=f(t,["createTime"]);a!=null&&d(n,["createTime"],a);const c=f(t,["modelVersion"]);c!=null&&d(n,["modelVersion"],c);const h=f(t,["promptFeedback"]);h!=null&&d(n,["promptFeedback"],h);const g=f(t,["responseId"]);g!=null&&d(n,["responseId"],g);const m=f(t,["usageMetadata"]);return m!=null&&d(n,["usageMetadata"],m),n}function RD(t,e,n){const o={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const c=f(t,["guidanceScale"]);if(e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const m=f(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const y=f(t,["includeRaiReason"]);e!==void 0&&y!=null&&d(e,["parameters","includeRaiReason"],y);const E=f(t,["language"]);e!==void 0&&E!=null&&d(e,["parameters","language"],E);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const C=f(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&d(e,["parameters","outputOptions","compressionQuality"],C),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(t,["imageSize"]);if(e!==void 0&&R!=null&&d(e,["parameters","sampleImageSize"],R),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function ID(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const a=f(t,["negativePrompt"]);e!==void 0&&a!=null&&d(e,["parameters","negativePrompt"],a);const c=f(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&d(e,["parameters","personGeneration"],E);const v=f(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&d(e,["parameters","includeSafetyAttributes"],v);const C=f(t,["includeRaiReason"]);e!==void 0&&C!=null&&d(e,["parameters","includeRaiReason"],C);const R=f(t,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const x=f(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const N=f(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const O=f(t,["addWatermark"]);e!==void 0&&O!=null&&d(e,["parameters","addWatermark"],O);const B=f(t,["labels"]);e!==void 0&&B!=null&&d(e,["labels"],B);const q=f(t,["imageSize"]);e!==void 0&&q!=null&&d(e,["parameters","sampleImageSize"],q);const Q=f(t,["enhancePrompt"]);return e!==void 0&&Q!=null&&d(e,["parameters","enhancePrompt"],Q),o}function wD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["prompt"]);a!=null&&d(o,["instances[0]","prompt"],a);const c=f(e,["config"]);return c!=null&&RD(c,o),o}function ND(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["prompt"]);a!=null&&d(o,["instances[0]","prompt"],a);const c=f(e,["config"]);return c!=null&&ID(c,o),o}function bD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>FD(h))),d(n,["generatedImages"],c)}const a=f(t,["positivePromptSafetyAttributes"]);return a!=null&&d(n,["positivePromptSafetyAttributes"],SE(a)),n}function MD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>tu(h))),d(n,["generatedImages"],c)}const a=f(t,["positivePromptSafetyAttributes"]);return a!=null&&d(n,["positivePromptSafetyAttributes"],CE(a)),n}function xD(t,e,n){const o={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(t,["durationSeconds"]);if(e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["resolution"]);e!==void 0&&h!=null&&d(e,["parameters","resolution"],h);const g=f(t,["personGeneration"]);if(e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const y=f(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&d(e,["parameters","enhancePrompt"],y),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(t,["lastFrame"]);e!==void 0&&E!=null&&d(e,["instances[0]","lastFrame"],nu(E));const v=f(t,["referenceImages"]);if(e!==void 0&&v!=null){let C=v;Array.isArray(C)&&(C=C.map(R=>U1(R))),d(e,["instances[0]","referenceImages"],C)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function DD(t,e,n){const o={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const c=f(t,["fps"]);e!==void 0&&c!=null&&d(e,["parameters","fps"],c);const h=f(t,["durationSeconds"]);e!==void 0&&h!=null&&d(e,["parameters","durationSeconds"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const m=f(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const y=f(t,["resolution"]);e!==void 0&&y!=null&&d(e,["parameters","resolution"],y);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&d(e,["parameters","personGeneration"],E);const v=f(t,["pubsubTopic"]);e!==void 0&&v!=null&&d(e,["parameters","pubsubTopic"],v);const C=f(t,["negativePrompt"]);e!==void 0&&C!=null&&d(e,["parameters","negativePrompt"],C);const R=f(t,["enhancePrompt"]);e!==void 0&&R!=null&&d(e,["parameters","enhancePrompt"],R);const x=f(t,["generateAudio"]);e!==void 0&&x!=null&&d(e,["parameters","generateAudio"],x);const N=f(t,["lastFrame"]);e!==void 0&&N!=null&&d(e,["instances[0]","lastFrame"],pn(N));const O=f(t,["referenceImages"]);if(e!==void 0&&O!=null){let Q=O;Array.isArray(Q)&&(Q=Q.map(W=>L1(W))),d(e,["instances[0]","referenceImages"],Q)}const B=f(t,["mask"]);e!==void 0&&B!=null&&d(e,["instances[0]","mask"],D1(B));const q=f(t,["compressionQuality"]);return e!==void 0&&q!=null&&d(e,["parameters","compressionQuality"],q),o}function UD(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["name"],o);const r=f(t,["metadata"]);r!=null&&d(n,["metadata"],r);const a=f(t,["done"]);a!=null&&d(n,["done"],a);const c=f(t,["error"]);c!=null&&d(n,["error"],c);const h=f(t,["response","generateVideoResponse"]);return h!=null&&d(n,["response"],OD(h)),n}function LD(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["name"],o);const r=f(t,["metadata"]);r!=null&&d(n,["metadata"],r);const a=f(t,["done"]);a!=null&&d(n,["done"],a);const c=f(t,["error"]);c!=null&&d(n,["error"],c);const h=f(t,["response"]);return h!=null&&d(n,["response"],HD(h)),n}function PD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["prompt"]);a!=null&&d(o,["instances[0]","prompt"],a);const c=f(e,["image"]);c!=null&&d(o,["instances[0]","image"],nu(c));const h=f(e,["video"]);h!=null&&d(o,["instances[0]","video"],RE(h));const g=f(e,["source"]);g!=null&&GD(g,o);const m=f(e,["config"]);return m!=null&&xD(m,o),o}function kD(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["prompt"]);a!=null&&d(o,["instances[0]","prompt"],a);const c=f(e,["image"]);c!=null&&d(o,["instances[0]","image"],pn(c));const h=f(e,["video"]);h!=null&&d(o,["instances[0]","video"],IE(h));const g=f(e,["source"]);g!=null&&VD(g,o);const m=f(e,["config"]);return m!=null&&DD(m,o),o}function OD(t,e){const n={},o=f(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>BD(h))),d(n,["generatedVideos"],c)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&d(n,["raiMediaFilteredReasons"],a),n}function HD(t,e){const n={},o=f(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>zD(h))),d(n,["generatedVideos"],c)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&d(n,["raiMediaFilteredReasons"],a),n}function GD(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&d(e,["instances[0]","image"],nu(a));const c=f(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],RE(c)),o}function VD(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&d(e,["instances[0]","image"],pn(a));const c=f(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],IE(c)),o}function FD(t,e){const n={},o=f(t,["_self"]);o!=null&&d(n,["image"],ZD(o));const r=f(t,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const a=f(t,["_self"]);return a!=null&&d(n,["safetyAttributes"],SE(a)),n}function tu(t,e){const n={},o=f(t,["_self"]);o!=null&&d(n,["image"],TE(o));const r=f(t,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const a=f(t,["_self"]);a!=null&&d(n,["safetyAttributes"],CE(a));const c=f(t,["prompt"]);return c!=null&&d(n,["enhancedPrompt"],c),n}function qD(t,e){const n={},o=f(t,["_self"]);o!=null&&d(n,["mask"],TE(o));const r=f(t,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(n,["labels"],a)}return n}function BD(t,e){const n={},o=f(t,["video"]);return o!=null&&d(n,["video"],M1(o)),n}function zD(t,e){const n={},o=f(t,["_self"]);return o!=null&&d(n,["video"],x1(o)),n}function YD(t,e){const n={},o=f(t,["modelSelectionConfig"]);o!=null&&d(n,["modelConfig"],o);const r=f(t,["responseJsonSchema"]);r!=null&&d(n,["responseJsonSchema"],r);const a=f(t,["audioTimestamp"]);a!=null&&d(n,["audioTimestamp"],a);const c=f(t,["candidateCount"]);c!=null&&d(n,["candidateCount"],c);const h=f(t,["enableAffectiveDialog"]);h!=null&&d(n,["enableAffectiveDialog"],h);const g=f(t,["frequencyPenalty"]);g!=null&&d(n,["frequencyPenalty"],g);const m=f(t,["logprobs"]);m!=null&&d(n,["logprobs"],m);const y=f(t,["maxOutputTokens"]);y!=null&&d(n,["maxOutputTokens"],y);const E=f(t,["mediaResolution"]);E!=null&&d(n,["mediaResolution"],E);const v=f(t,["presencePenalty"]);v!=null&&d(n,["presencePenalty"],v);const C=f(t,["responseLogprobs"]);C!=null&&d(n,["responseLogprobs"],C);const R=f(t,["responseMimeType"]);R!=null&&d(n,["responseMimeType"],R);const x=f(t,["responseModalities"]);x!=null&&d(n,["responseModalities"],x);const N=f(t,["responseSchema"]);N!=null&&d(n,["responseSchema"],N);const O=f(t,["routingConfig"]);O!=null&&d(n,["routingConfig"],O);const B=f(t,["seed"]);B!=null&&d(n,["seed"],B);const q=f(t,["speechConfig"]);q!=null&&d(n,["speechConfig"],q);const Q=f(t,["stopSequences"]);Q!=null&&d(n,["stopSequences"],Q);const W=f(t,["temperature"]);W!=null&&d(n,["temperature"],W);const G=f(t,["thinkingConfig"]);G!=null&&d(n,["thinkingConfig"],G);const ne=f(t,["topK"]);ne!=null&&d(n,["topK"],ne);const Ce=f(t,["topP"]);if(Ce!=null&&d(n,["topP"],Ce),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function JD(t,e,n){const o={},r=f(e,["model"]);return r!=null&&d(o,["_url","name"],Ne(t,r)),o}function KD(t,e,n){const o={},r=f(e,["model"]);return r!=null&&d(o,["_url","name"],Ne(t,r)),o}function QD(t,e){const n={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(t,["enableWidget"]);return o!=null&&d(n,["enableWidget"],o),n}function WD(t,e){const n={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(t,["timeRangeFilter"]);return o!=null&&d(n,["timeRangeFilter"],o),n}function XD(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&d(n,["aspectRatio"],o);const r=f(t,["imageSize"]);if(r!=null&&d(n,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function $D(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&d(n,["aspectRatio"],o);const r=f(t,["imageSize"]);r!=null&&d(n,["imageSize"],r);const a=f(t,["personGeneration"]);a!=null&&d(n,["personGeneration"],a);const c=f(t,["outputMimeType"]);c!=null&&d(n,["imageOutputOptions","mimeType"],c);const h=f(t,["outputCompressionQuality"]);return h!=null&&d(n,["imageOutputOptions","compressionQuality"],h),n}function ZD(t,e){const n={},o=f(t,["bytesBase64Encoded"]);o!=null&&d(n,["imageBytes"],Ii(o));const r=f(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function TE(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["gcsUri"],o);const r=f(t,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],Ii(r));const a=f(t,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function nu(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(t,["imageBytes"]);o!=null&&d(n,["bytesBase64Encoded"],Ii(o));const r=f(t,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function pn(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["gcsUri"],o);const r=f(t,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],Ii(r));const a=f(t,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function jD(t,e,n,o){const r={},a=f(e,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const c=f(e,["pageToken"]);n!==void 0&&c!=null&&d(n,["_query","pageToken"],c);const h=f(e,["filter"]);n!==void 0&&h!=null&&d(n,["_query","filter"],h);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&d(n,["_url","models_url"],pE(t,g)),r}function e1(t,e,n,o){const r={},a=f(e,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const c=f(e,["pageToken"]);n!==void 0&&c!=null&&d(n,["_query","pageToken"],c);const h=f(e,["filter"]);n!==void 0&&h!=null&&d(n,["_query","filter"],h);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&d(n,["_url","models_url"],pE(t,g)),r}function t1(t,e,n){const o={},r=f(e,["config"]);return r!=null&&jD(t,r,o),o}function n1(t,e,n){const o={},r=f(e,["config"]);return r!=null&&e1(t,r,o),o}function i1(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const a=f(t,["_self"]);if(a!=null){let c=mE(a);Array.isArray(c)&&(c=c.map(h=>dd(h))),d(n,["models"],c)}return n}function o1(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const a=f(t,["_self"]);if(a!=null){let c=mE(a);Array.isArray(c)&&(c=c.map(h=>hd(h))),d(n,["models"],c)}return n}function s1(t,e){const n={},o=f(t,["maskMode"]);o!=null&&d(n,["maskMode"],o);const r=f(t,["segmentationClasses"]);r!=null&&d(n,["maskClasses"],r);const a=f(t,["maskDilation"]);return a!=null&&d(n,["dilation"],a),n}function dd(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["name"],o);const r=f(t,["displayName"]);r!=null&&d(n,["displayName"],r);const a=f(t,["description"]);a!=null&&d(n,["description"],a);const c=f(t,["version"]);c!=null&&d(n,["version"],c);const h=f(t,["_self"]);h!=null&&d(n,["tunedModelInfo"],T1(h));const g=f(t,["inputTokenLimit"]);g!=null&&d(n,["inputTokenLimit"],g);const m=f(t,["outputTokenLimit"]);m!=null&&d(n,["outputTokenLimit"],m);const y=f(t,["supportedGenerationMethods"]);y!=null&&d(n,["supportedActions"],y);const E=f(t,["temperature"]);E!=null&&d(n,["temperature"],E);const v=f(t,["maxTemperature"]);v!=null&&d(n,["maxTemperature"],v);const C=f(t,["topP"]);C!=null&&d(n,["topP"],C);const R=f(t,["topK"]);R!=null&&d(n,["topK"],R);const x=f(t,["thinking"]);return x!=null&&d(n,["thinking"],x),n}function hd(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["name"],o);const r=f(t,["displayName"]);r!=null&&d(n,["displayName"],r);const a=f(t,["description"]);a!=null&&d(n,["description"],a);const c=f(t,["versionId"]);c!=null&&d(n,["version"],c);const h=f(t,["deployedModels"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(C=>yD(C))),d(n,["endpoints"],v)}const g=f(t,["labels"]);g!=null&&d(n,["labels"],g);const m=f(t,["_self"]);m!=null&&d(n,["tunedModelInfo"],S1(m));const y=f(t,["defaultCheckpointId"]);y!=null&&d(n,["defaultCheckpointId"],y);const E=f(t,["checkpoints"]);if(E!=null){let v=E;Array.isArray(v)&&(v=v.map(C=>C)),d(n,["checkpoints"],v)}return n}function r1(t,e){const n={},o=f(t,["mediaResolution"]);o!=null&&d(n,["mediaResolution"],o);const r=f(t,["codeExecutionResult"]);r!=null&&d(n,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&d(n,["executableCode"],a);const c=f(t,["fileData"]);c!=null&&d(n,["fileData"],vD(c));const h=f(t,["functionCall"]);h!=null&&d(n,["functionCall"],ED(h));const g=f(t,["functionResponse"]);g!=null&&d(n,["functionResponse"],g);const m=f(t,["inlineData"]);m!=null&&d(n,["inlineData"],Yx(m));const y=f(t,["text"]);y!=null&&d(n,["text"],y);const E=f(t,["thought"]);E!=null&&d(n,["thought"],E);const v=f(t,["thoughtSignature"]);v!=null&&d(n,["thoughtSignature"],v);const C=f(t,["videoMetadata"]);return C!=null&&d(n,["videoMetadata"],C),n}function l1(t,e){const n={},o=f(t,["productImage"]);return o!=null&&d(n,["image"],pn(o)),n}function a1(t,e,n){const o={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const a=f(t,["baseSteps"]);e!==void 0&&a!=null&&d(e,["parameters","baseSteps"],a);const c=f(t,["outputGcsUri"]);e!==void 0&&c!=null&&d(e,["parameters","storageUri"],c);const h=f(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=f(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const m=f(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const y=f(t,["addWatermark"]);e!==void 0&&y!=null&&d(e,["parameters","addWatermark"],y);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","mimeType"],E);const v=f(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","compressionQuality"],v);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&d(e,["parameters","enhancePrompt"],C);const R=f(t,["labels"]);return e!==void 0&&R!=null&&d(e,["labels"],R),o}function u1(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["source"]);a!=null&&f1(a,o);const c=f(e,["config"]);return c!=null&&a1(c,o),o}function c1(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>tu(a))),d(n,["generatedImages"],r)}return n}function f1(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const a=f(t,["personImage"]);e!==void 0&&a!=null&&d(e,["instances[0]","personImage","image"],pn(a));const c=f(t,["productImages"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>l1(g))),d(e,["instances[0]","productImages"],h)}return o}function d1(t,e){const n={},o=f(t,["referenceImage"]);o!=null&&d(n,["referenceImage"],pn(o));const r=f(t,["referenceId"]);r!=null&&d(n,["referenceId"],r);const a=f(t,["referenceType"]);a!=null&&d(n,["referenceType"],a);const c=f(t,["maskImageConfig"]);c!=null&&d(n,["maskImageConfig"],s1(c));const h=f(t,["controlImageConfig"]);h!=null&&d(n,["controlImageConfig"],Zx(h));const g=f(t,["styleImageConfig"]);g!=null&&d(n,["styleImageConfig"],g);const m=f(t,["subjectImageConfig"]);return m!=null&&d(n,["subjectImageConfig"],m),n}function SE(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&d(n,["categories"],o);const r=f(t,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const a=f(t,["contentType"]);return a!=null&&d(n,["contentType"],a),n}function CE(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&d(n,["categories"],o);const r=f(t,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const a=f(t,["contentType"]);return a!=null&&d(n,["contentType"],a),n}function h1(t,e){const n={},o=f(t,["category"]);if(o!=null&&d(n,["category"],o),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&d(n,["threshold"],r),n}function p1(t,e){const n={},o=f(t,["image"]);return o!=null&&d(n,["image"],pn(o)),n}function m1(t,e,n){const o={},r=f(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const a=f(t,["maxPredictions"]);e!==void 0&&a!=null&&d(e,["parameters","maxPredictions"],a);const c=f(t,["confidenceThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","confidenceThreshold"],c);const h=f(t,["maskDilation"]);e!==void 0&&h!=null&&d(e,["parameters","maskDilation"],h);const g=f(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&d(e,["parameters","binaryColorThreshold"],g);const m=f(t,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),o}function g1(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["source"]);a!=null&&y1(a,o);const c=f(e,["config"]);return c!=null&&m1(c,o),o}function _1(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>qD(a))),d(n,["generatedMasks"],r)}return n}function y1(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&d(e,["instances[0]","image"],pn(a));const c=f(t,["scribbleImage"]);return e!==void 0&&c!=null&&d(e,["instances[0]","scribble"],p1(c)),o}function v1(t,e){const n={},o=f(t,["retrievalConfig"]);o!=null&&d(n,["retrievalConfig"],o);const r=f(t,["functionCallingConfig"]);return r!=null&&d(n,["functionCallingConfig"],TD(r)),n}function E1(t,e){const n={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["computerUse"]);o!=null&&d(n,["computerUse"],o);const r=f(t,["fileSearch"]);r!=null&&d(n,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&d(n,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=f(t,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(v=>v)),d(n,["functionDeclarations"],E)}const h=f(t,["googleMaps"]);h!=null&&d(n,["googleMaps"],QD(h));const g=f(t,["googleSearch"]);g!=null&&d(n,["googleSearch"],WD(g));const m=f(t,["googleSearchRetrieval"]);m!=null&&d(n,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&d(n,["urlContext"],y),n}function AE(t,e){const n={},o=f(t,["retrieval"]);o!=null&&d(n,["retrieval"],o);const r=f(t,["computerUse"]);if(r!=null&&d(n,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&d(n,["codeExecution"],a);const c=f(t,["enterpriseWebSearch"]);c!=null&&d(n,["enterpriseWebSearch"],c);const h=f(t,["functionDeclarations"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(C=>SD(C))),d(n,["functionDeclarations"],v)}const g=f(t,["googleMaps"]);g!=null&&d(n,["googleMaps"],g);const m=f(t,["googleSearch"]);m!=null&&d(n,["googleSearch"],m);const y=f(t,["googleSearchRetrieval"]);y!=null&&d(n,["googleSearchRetrieval"],y);const E=f(t,["urlContext"]);return E!=null&&d(n,["urlContext"],E),n}function T1(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["createTime"]);r!=null&&d(n,["createTime"],r);const a=f(t,["updateTime"]);return a!=null&&d(n,["updateTime"],a),n}function S1(t,e){const n={},o=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["createTime"]);r!=null&&d(n,["createTime"],r);const a=f(t,["updateTime"]);return a!=null&&d(n,["updateTime"],a),n}function C1(t,e,n){const o={},r=f(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const a=f(t,["description"]);e!==void 0&&a!=null&&d(e,["description"],a);const c=f(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function A1(t,e,n){const o={},r=f(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const a=f(t,["description"]);e!==void 0&&a!=null&&d(e,["description"],a);const c=f(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function R1(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","name"],Ne(t,r));const a=f(e,["config"]);return a!=null&&C1(a,o),o}function I1(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["config"]);return a!=null&&A1(a,o),o}function w1(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&d(e,["parameters","includeRaiReason"],h);const g=f(t,["outputMimeType"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","mimeType"],g);const m=f(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const y=f(t,["enhanceInputImage"]);e!==void 0&&y!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],y);const E=f(t,["imagePreservationFactor"]);e!==void 0&&E!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const v=f(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const C=f(t,["numberOfImages"]);e!==void 0&&C!=null&&d(e,["parameters","sampleCount"],C);const R=f(t,["mode"]);return e!==void 0&&R!=null&&d(e,["parameters","mode"],R),o}function N1(t,e,n){const o={},r=f(e,["model"]);r!=null&&d(o,["_url","model"],Ne(t,r));const a=f(e,["image"]);a!=null&&d(o,["instances[0]","image"],pn(a));const c=f(e,["upscaleFactor"]);c!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],c);const h=f(e,["config"]);return h!=null&&w1(h,o),o}function b1(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>tu(c))),d(n,["generatedImages"],a)}return n}function M1(t,e){const n={},o=f(t,["uri"]);o!=null&&d(n,["uri"],o);const r=f(t,["encodedVideo"]);r!=null&&d(n,["videoBytes"],Ii(r));const a=f(t,["encoding"]);return a!=null&&d(n,["mimeType"],a),n}function x1(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["uri"],o);const r=f(t,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],Ii(r));const a=f(t,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function D1(t,e){const n={},o=f(t,["image"]);o!=null&&d(n,["_self"],pn(o));const r=f(t,["maskMode"]);return r!=null&&d(n,["maskMode"],r),n}function U1(t,e){const n={},o=f(t,["image"]);o!=null&&d(n,["image"],nu(o));const r=f(t,["referenceType"]);return r!=null&&d(n,["referenceType"],r),n}function L1(t,e){const n={},o=f(t,["image"]);o!=null&&d(n,["image"],pn(o));const r=f(t,["referenceType"]);return r!=null&&d(n,["referenceType"],r),n}function RE(t,e){const n={},o=f(t,["uri"]);o!=null&&d(n,["uri"],o);const r=f(t,["videoBytes"]);r!=null&&d(n,["encodedVideo"],Ii(r));const a=f(t,["mimeType"]);return a!=null&&d(n,["encoding"],a),n}function IE(t,e){const n={},o=f(t,["uri"]);o!=null&&d(n,["gcsUri"],o);const r=f(t,["videoBytes"]);r!=null&&d(n,["bytesBase64Encoded"],Ii(r));const a=f(t,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),n}function k1(t){const e={},n=f(t,["config"]);return n!=null&&P1(n,e),e}function O1(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function H1(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&O1(o,e),e}function G1(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function V1(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["customMetadata"],a)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),n}function F1(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(t,["done"]);r!=null&&d(e,["done"],r);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],B1(c)),e}function q1(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&d(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&V1(r,e),e}function B1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function z1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function Y1(t){const e={},n=f(t,["config"]);return n!=null&&z1(n,e),e}function J1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["fileSearchStores"],a)}return e}function wE(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),d(e,["customMetadata"],h)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),n}function K1(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&wE(o,e),e}function Q1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W1="Content-Type",X1="X-Server-Timeout",$1="User-Agent",pd="x-goog-api-client",Z1="1.41.0",j1=`google-genai-sdk/${Z1}`,eU="v1beta1",tU="v1beta",nU=5,iU=[408,429,500,502,503,504];class oU{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:eU}else{if(!this.clientOptions.apiKey)throw new Gr({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:tU,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===ad.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?o[r]=Object.assign(Object.assign({},o[r]),a):a!==void 0&&(o[r]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&sU(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Tv(r),new ud(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Tv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return fn(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:y}=yield ce(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(y,{stream:!0});try{const R=JSON.parse(E);if("error"in R){const x=JSON.parse(JSON.stringify(R.error)),N=x.status,O=x.code,B=`got status: ${N}. ${JSON.stringify(R)}`;if(O>=400&&O<600)throw new Gr({message:B,status:O})}}catch(R){if(R.name==="ApiError")throw R}c+=E;let v=-1,C=0;for(;;){v=-1,C=0;for(const N of g){const O=c.indexOf(N);O!==-1&&(v===-1||O<v)&&(v=O,C=N.length)}if(v===-1)break;const R=c.substring(0,v);c=c.substring(v+C);const x=R.trim();if(x.startsWith(h)){const N=x.substring(h.length).trim();try{const O=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ce(new ud(O))}catch(O){throw new Error(`exception parsing stream chunk ${N}. ${O}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const r=this.clientOptions.httpOptions.retryOptions;return QN(async()=>{const c=await fetch(e,n);if(c.ok)return c;throw iU.includes(c.status)?new Error(`Retryable HTTP Error: ${c.statusText}`):new sE(`Non-retryable exception ${c.statusText} sending request`)},{retries:((o=r.attempts)!==null&&o!==void 0?o:nU)-1})}getDefaultHeaders(){const e={},n=j1+" "+this.clientOptions.userAgentExtra;return e[$1]=n,e[pd]=n,e[W1]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))o.append(r,a);e.timeout&&e.timeout>0&&o.append(X1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},m=this.getFileName(e),y=X("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,m,g,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var r;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),E={};o!=null&&wE(o,E);const v=await this.fetchUploadUrl(m,h,g,y,E,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Tv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Gr({message:r,status:n}):new Error(r)}}function sU(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],y=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?h[g]=o(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rU="mcp_used/unknown";let lU=!1;function NE(t){for(const e of t)if(aU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lU}function bE(t){var e;const n=(e=t[pd])!==null&&e!==void 0?e:"";t[pd]=(n+` ${rU}`).trimStart()}function aU(t){return t!==null&&typeof t=="object"&&t instanceof dh}function uU(t){return fn(this,arguments,function*(n,o=100){let r,a=0;for(;a<o;){const c=yield ce(n.listTools({cursor:r}));for(const h of c.tools)yield yield ce(h),a++;if(!c.nextCursor)break;r=c.nextCursor}})}class dh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new dh(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const y of this.mcpClients)try{for(var h=!0,g=(n=void 0,dn(uU(y))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const E=r;c.push(E);const v=E.name;if(a[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);a[v]=y}}catch(E){n={error:E}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),kb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cU(t,e,n){const o=new Nb;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class fU{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=pU(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const y=new Promise(q=>{m=q}),E=e.callbacks,v=function(){m({})},C=this.apiClient,R={onopen:v,onmessage:q=>{cU(C,E.onmessage,q)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(q){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(q){}},x=this.webSocketFactory.create(g,hU(c),R);x.connect(),await y;const B={setup:{model:Ne(this.apiClient,e.model)}};return x.send(JSON.stringify(B)),new dU(x,this.apiClient)}}class dU{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Px(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Lx(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Jo.PLAY)}pause(){this.sendPlaybackControl(Jo.PAUSE)}stop(){this.sendPlaybackControl(Jo.STOP)}resetContext(){this.sendPlaybackControl(Jo.RESET_CONTEXT)}close(){this.conn.close()}}function hU(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function pU(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function gU(t,e,n){const o=new wb;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=Hx(a);Object.assign(o,c)}else Object.assign(o,a);e(o)}class _U{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new fU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&NE(e.config.tools)&&bE(E);const v=TU(E);if(this.apiClient.isVertexAI()){const V=this.apiClient.getProject(),$=this.apiClient.getLocation(),Ee=this.apiClient.getApiKey(),Pe=!!V&&!!$||!!Ee;this.apiClient.getCustomBaseUrl()&&!Pe?y=g:(y=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,y))}else{const V=this.apiClient.getApiKey();let $="BidiGenerateContent",Ee="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",Ee="access_token"),y=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${$}?${Ee}=${V}`}let C=()=>{};const R=new Promise(V=>{C=V}),x=e.callbacks,N=function(){var V;(V=x==null?void 0:x.onopen)===null||V===void 0||V.call(x),C({})},O=this.apiClient,B={onopen:N,onmessage:V=>{gU(O,x.onmessage,V)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(V){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(V){}},q=this.webSocketFactory.create(y,EU(v),B);q.connect(),await R;let Q=Ne(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const V=this.apiClient.getProject(),$=this.apiClient.getLocation();V&&$&&(Q=`projects/${V}/locations/${$}/`+Q)}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Pa.AUDIO]}:e.config.responseModalities=[Pa.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],ne=[];for(const V of G)if(this.isCallableTool(V)){const $=V;ne.push(await $.tool())}else ne.push(V);ne.length>0&&(e.config.tools=ne);const Ce={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=Ux(this.apiClient,Ce):W=Dx(this.apiClient,Ce),delete W.config,q.send(JSON.stringify(W)),new vU(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yU={turnComplete:!0};class vU{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=jt(n.turns),e.isVertexAI()||(o=o.map(r=>eu(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(mU)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},yU),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Ox(e)}:n={realtimeInput:kx(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function EU(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function TU(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sv=10;function Cv(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(jo(c)){r=!0;break}if(!r)return!0;const a=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function jo(t){return"callTool"in t&&typeof t.callTool=="function"}function SU(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>jo(r)))!==null&&o!==void 0?o:!1}function Av(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(jo(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function Rv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CU extends Jn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!SU(n)||Cv(n.config))return await this.generateContentInternal(g);const m=Av(n);if(m.length>0){const x=m.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let y,E;const v=jt(g.contents),C=(a=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:Sv;let R=0;for(;R<C&&(y=await this.generateContentInternal(g),!(!y.functionCalls||y.functionCalls.length===0));){const x=y.candidates[0].content,N=[];for(const O of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(jo(O)){const q=await O.callTool(y.functionCalls);N.push(...q)}R++,E={role:"user",parts:N},g.contents=jt(g.contents),g.contents.push(x),g.contents.push(E),Rv(g.config)&&(v.push(x),v.push(E))}return Rv(g.config)&&(y.automaticFunctionCallingHistory=v),y},this.generateContentStream=async n=>{var o,r,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),Cv(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const g=Av(n);if(g.length>0){const E=g.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let a;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new so(Yn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>jo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&NE(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),bE(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,o,r;const a=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(jo(c)){const h=c,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var n,o,r;const a=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Sv;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,y,E){return fn(this,arguments,function*(){for(var v,C,R,x,N,O;h<a;){c&&(h++,c=!1);const W=yield ce(m.processParamsMaybeAddMcpUsage(E)),G=yield ce(m.generateContentStreamInternal(W)),ne=[],Ce=[];try{for(var B=!0,q=(C=void 0,dn(G)),Q;Q=yield ce(q.next()),v=Q.done,!v;B=!0){x=Q.value,B=!1;const V=x;if(yield yield ce(V),V.candidates&&(!((N=V.candidates[0])===null||N===void 0)&&N.content)){Ce.push(V.candidates[0].content);for(const $ of(O=V.candidates[0].content.parts)!==null&&O!==void 0?O:[])if(h<a&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has($.functionCall.name)){const Ee=yield ce(y.get($.functionCall.name).callTool([$.functionCall]));ne.push(...Ee)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(V){C={error:V}}finally{try{!B&&!v&&(R=q.return)&&(yield ce(R.call(q)))}finally{if(C)throw C.error}}if(ne.length>0){c=!0;const V=new vr;V.candidates=[{content:{role:"user",parts:ne}}],yield yield ce(V);const $=[];$.push(...Ce),$.push({role:"user",parts:ne});const Ee=jt(E.contents).concat($);E.contents=Ee}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=yv(this.apiClient,e);return h=X("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=Ev(y),v=new vr;return Object.assign(v,E),v})}else{const m=_v(this.apiClient,e);return h=X("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=vv(y),v=new vr;return Object.assign(v,E),v})}}async generateContentStreamInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=yv(this.apiClient,e);return h=X("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(E){return fn(this,arguments,function*(){var v,C,R,x;try{for(var N=!0,O=dn(E),B;B=yield ce(O.next()),v=B.done,!v;N=!0){x=B.value,N=!1;const q=x,Q=Ev(yield ce(q.json()),e);Q.sdkHttpResponse={headers:q.headers};const W=new vr;Object.assign(W,Q),yield yield ce(W)}}catch(q){C={error:q}}finally{try{!N&&!v&&(R=O.return)&&(yield ce(R.call(O)))}finally{if(C)throw C.error}}})})}else{const m=_v(this.apiClient,e);return h=X("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return fn(this,arguments,function*(){var v,C,R,x;try{for(var N=!0,O=dn(E),B;B=yield ce(O.next()),v=B.done,!v;N=!0){x=B.value,N=!1;const q=x,Q=vv(yield ce(q.json()),e);Q.sdkHttpResponse={headers:q.headers};const W=new vr;Object.assign(W,Q),yield yield ce(W)}}catch(q){C={error:q}}finally{try{!N&&!v&&(R=O.return)&&(yield ce(R.call(O)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mD(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=_D(y),v=new ev;return Object.assign(v,E),v})}else{const m=pD(this.apiClient,e);return h=X("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=gD(y),v=new ev;return Object.assign(v,E),v})}}async generateImagesInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ND(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=MD(y),v=new tv;return Object.assign(v,E),v})}else{const m=wD(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=bD(y),v=new tv;return Object.assign(v,E),v})}}async editImageInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=cD(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=fD(g),y=new mb;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=N1(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=b1(g),y=new gb;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=u1(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=c1(g),y=new _b;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=g1(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=_1(g),y=new yb;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=KD(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>hd(y))}else{const m=JD(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>dd(y))}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=n1(this.apiClient,e);return h=X("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=o1(y),v=new nv;return Object.assign(v,E),v})}else{const m=t1(this.apiClient,e);return h=X("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=i1(y),v=new nv;return Object.assign(v,E),v})}}async update(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=I1(this.apiClient,e);return h=X("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>hd(y))}else{const m=R1(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>dd(y))}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=rD(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=aD(y),v=new iv;return Object.assign(v,E),v})}else{const m=sD(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=lD(y),v=new iv;return Object.assign(v,E),v})}}async countTokens(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=nD(this.apiClient,e);return h=X("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=oD(y),v=new ov;return Object.assign(v,E),v})}else{const m=tD(this.apiClient,e);return h=X("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=iD(y),v=new ov;return Object.assign(v,E),v})}}async computeTokens(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=Qx(this.apiClient,e);return a=X("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=Wx(g),y=new vb;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=kD(this.apiClient,e);return h=X("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const E=LD(y),v=new ka;return Object.assign(v,E),v})}else{const m=PD(this.apiClient,e);return h=X("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c.then(y=>{const E=UD(y),v=new ka;return Object.assign(v,E),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AU extends Jn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ub(e);return h=X("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const m=ab(e);return h=X("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=tb(e);return a=X("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RU(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function IU(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>PU(a))),d(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function wU(t,e,n){const o={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&d(n,["newSessionExpireTime"],a);const c=f(e,["uses"]);n!==void 0&&c!=null&&d(n,["uses"],c);const h=f(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&d(n,["bidiGenerateContentSetup"],LU(t,h));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&d(n,["fieldMask"],g),o}function NU(t,e){const n={},o=f(e,["config"]);return o!=null&&d(n,["config"],wU(t,o,n)),n}function bU(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function MU(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const r=f(t,["name"]);if(r!=null&&d(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function DU(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function UU(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],fh(E));const v=f(t,["thinkingConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","thinkingConfig"],v);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],C);const R=f(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],IU(Et(R)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let G=ps(x);Array.isArray(G)&&(G=G.map(ne=>OU(hs(ne)))),d(e,["setup","tools"],G)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],kU(N));const O=f(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","inputAudioTranscription"],O);const B=f(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&d(e,["setup","outputAudioTranscription"],B);const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&d(e,["setup","realtimeInputConfig"],q);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&d(e,["setup","contextWindowCompression"],Q);const W=f(t,["proactivity"]);if(e!==void 0&&W!=null&&d(e,["setup","proactivity"],W),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function LU(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&d(n,["config"],UU(r,n)),n}function PU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&d(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],bU(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],MU(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],RU(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const y=f(t,["thought"]);y!=null&&d(e,["thought"],y);const E=f(t,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const v=f(t,["videoMetadata"]);return v!=null&&d(e,["videoMetadata"],v),e}function kU(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function OU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),d(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],xU(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],DU(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HU(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function GU(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=HU(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class VU extends Jn{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=NU(this.apiClient,e);a=X("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=GU(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function qU(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&FU(o,e),e}function BU(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function zU(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),n}function YU(t){const e={},n=f(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&zU(o,e),e}function JU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KU extends Jn{constructor(e){super(),this.apiClient=e,this.list=async n=>new so(Yn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=BU(e);return a=X("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qU(e);r=X("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=YU(e);return a=X("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=JU(g),y=new Eb;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QU extends Jn{constructor(e,n=new KU(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new so(Yn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=k1(e);return a=X("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=G1(e);return a=X("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H1(e);r=X("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Y1(e);return a=X("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=J1(g),y=new Tb;return Object.assign(y,m),y})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=K1(e);return a=X("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Q1(g),y=new Sb;return Object.assign(y,m),y})}}async importFile(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q1(e);return a=X("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=F1(g),y=new rh;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ME=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ME=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const WU=()=>ME();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const gd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class en extends Error{}class It extends en{constructor(e,n,o,r){super(`${It.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new iu({message:o,cause:gd(n)});const a=n;return e===400?new DE(e,a,o,r):e===401?new UE(e,a,o,r):e===403?new LE(e,a,o,r):e===404?new PE(e,a,o,r):e===409?new kE(e,a,o,r):e===422?new OE(e,a,o,r):e===429?new HE(e,a,o,r):e>=500?new GE(e,a,o,r):new It(e,a,o,r)}}class _d extends It{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class iu extends It{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xE extends iu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DE extends It{}class UE extends It{}class LE extends It{}class PE extends It{}class kE extends It{}class OE extends It{}class HE extends It{}class GE extends It{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XU=/^[a-z][a-z0-9+.-]*:/i,$U=t=>XU.test(t);let yd=t=>(yd=Array.isArray,yd(t));const ZU=yd;let jU=ZU;const Iv=jU;function eL(t){if(!t)return!0;for(const e in t)return!1;return!0}function tL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const nL=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new en(`${t} must be an integer`);if(e<0)throw new en(`${t} must be a positive integer`);return e},iL=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oL=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const rL=()=>{var t,e,n,o,r;const a=sL();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zo,"X-Stainless-OS":Nv(Deno.build.os),"X-Stainless-Arch":wv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zo,"X-Stainless-OS":Nv((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":wv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=lL();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function lL(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,a=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${a}.${c}`}}}return null}const wv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Nv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ua;const aL=()=>ua??(ua=rL());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function cL(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return VE({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function FE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function fL(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dL=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Lf(t,e,n){return qE(),new File(t,e??"unknown_file",n)}function hL(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const pL=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",mL=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&BE(t),gL=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function _L(t,e,n){if(qE(),t=await t,mL(t))return t instanceof File?t:Lf([await t.arrayBuffer()],t.name);if(gL(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Lf(await vd(r),e,n)}const o=await vd(t);if(e||(e=hL(t)),!(n!=null&&n.type)){const r=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Lf(o,e,n)}async function vd(t){var e,n,o,r,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(BE(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(pL(t))try{for(var h=!0,g=dn(t),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const y=r;c.push(...await vd(y))}}catch(y){n={error:y}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const y=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${yL(t)}`)}return c}function yL(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zE{constructor(e){this._client=e}}zE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const bv=Object.freeze(Object.create(null)),vL=(t=YE)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const a=[],c=n.reduce((y,E,v)=>{var C,R,x;/[?#]/.test(E)&&(r=!0);const N=o[v];let O=(r?encodeURIComponent:t)(""+N);return v!==o.length&&(N==null||typeof N=="object"&&N.toString===((x=Object.getPrototypeOf((R=Object.getPrototypeOf((C=N.hasOwnProperty)!==null&&C!==void 0?C:bv))!==null&&R!==void 0?R:bv))===null||x===void 0?void 0:x.toString))&&(O=N+"",a.push({start:y.length+E.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),y+E+(v===o.length?"":O)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((y,E)=>y.start-E.start),a.length>0){let y=0;const E=a.reduce((v,C)=>{const R=" ".repeat(C.start-y),x="^".repeat(C.length);return y=C.start+C.length,v+R+x},"");throw new en(`Path parameters result in path with invalid segments:
${a.map(v=>v.error).join(`
`)}
${c}
${E}`)}return c}),ca=vL(YE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JE extends zE{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,a=Ha(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new en("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new en("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ca`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(ca`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(ca`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=Ha(a,["api_version"]);return this._client.get(ca`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}JE._key=Object.freeze(["interactions"]);class KE extends JE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EL(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let fa;function hh(t){let e;return(fa??(e=new globalThis.TextEncoder,fa=e.encode.bind(e)))(t)}let da;function Mv(t){let e;return(da??(e=new globalThis.TextDecoder,da=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ou{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?hh(e):e;this.buffer=EL([this.buffer,n]);const o=[];let r;for(;(r=TL(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Mv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Mv(this.buffer.subarray(0,a));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ou.NEWLINE_CHARS=new Set([`
`,"\r"]);ou.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function TL(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function SL(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ga={off:0,error:200,warn:300,info:400,debug:500},xv=(t,e,n)=>{if(t){if(tL(Ga,t))return t;At(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ga))}`)}};function Sr(){}function ha(t,e,n){return!e||Ga[t]>Ga[n]?Sr:e[t].bind(e)}const CL={error:Sr,warn:Sr,info:Sr,debug:Sr};let Dv=new WeakMap;function At(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return CL;const r=Dv.get(n);if(r&&r[0]===o)return r[1];const a={error:ha("error",n,o),warn:ha("warn",n,o),info:ha("info",n,o),debug:ha("debug",n,o)};return Dv.set(n,[o,a]),a}const $i=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ko{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const a=o?At(o):console;function c(){return fn(this,arguments,function*(){var g,m,y,E;if(r)throw new en("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var C=!0,R=dn(AL(e,n)),x;x=yield ce(R.next()),g=x.done,!g;C=!0){E=x.value,C=!1;const N=E;if(!v)if(N.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield ce(JSON.parse(N.data))}catch(O){throw a.error("Could not parse message into JSON:",N.data),a.error("From chunk:",N.raw),O}}}catch(N){m={error:N}}finally{try{!C&&!g&&(y=R.return)&&(yield ce(y.call(R)))}finally{if(m)throw m.error}}v=!0}catch(N){if(md(N))return yield ce(void 0);throw N}finally{v||n.abort()}})}return new Ko(c,n,o)}static fromReadableStream(e,n,o){let r=!1;function a(){return fn(this,arguments,function*(){var g,m,y,E;const v=new ou,C=FE(e);try{for(var R=!0,x=dn(C),N;N=yield ce(x.next()),g=N.done,!g;R=!0){E=N.value,R=!1;const O=E;for(const B of v.decode(O))yield yield ce(B)}}catch(O){m={error:O}}finally{try{!R&&!g&&(y=x.return)&&(yield ce(y.call(x)))}finally{if(m)throw m.error}}for(const O of v.flush())yield yield ce(O)})}function c(){return fn(this,arguments,function*(){var g,m,y,E;if(r)throw new en("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var C=!0,R=dn(a()),x;x=yield ce(R.next()),g=x.done,!g;C=!0){E=x.value,C=!1;const N=E;v||N&&(yield yield ce(JSON.parse(N)))}}catch(N){m={error:N}}finally{try{!C&&!g&&(y=R.return)&&(yield ce(y.call(R)))}finally{if(m)throw m.error}}v=!0}catch(N){if(md(N))return yield ce(void 0);throw N}finally{v||n.abort()}})}return new Ko(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=a=>({next:()=>{if(a.length===0){const c=o.next();e.push(c),n.push(c)}return a.shift()}});return[new Ko(()=>r(e),this.controller,this.client),new Ko(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return VE({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:a}=await n.next();if(a)return o.close();const c=hh(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function AL(t,e){return fn(this,arguments,function*(){var o,r,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new en("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new en("Attempted to iterate over a response with no body");const h=new IL,g=new ou,m=FE(t.body);try{for(var y=!0,E=dn(RL(m)),v;v=yield ce(E.next()),o=v.done,!o;y=!0){c=v.value,y=!1;const C=c;for(const R of g.decode(C)){const x=h.decode(R);x&&(yield yield ce(x))}}}catch(C){r={error:C}}finally{try{!y&&!o&&(a=E.return)&&(yield ce(a.call(E)))}finally{if(r)throw r.error}}for(const C of g.flush()){const R=h.decode(C);R&&(yield yield ce(R))}})}function RL(t){return fn(this,arguments,function*(){var n,o,r,a;let c=new Uint8Array;try{for(var h=!0,g=dn(t),m;m=yield ce(g.next()),n=m.done,!n;h=!0){a=m.value,h=!1;const y=a;if(y==null)continue;const E=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?hh(y):y;let v=new Uint8Array(c.length+E.length);v.set(c),v.set(E,c.length),c=v;let C;for(;(C=SL(c))!==-1;)yield yield ce(c.slice(0,C)),c=c.slice(C)}}catch(y){o={error:y}}finally{try{!h&&!n&&(r=g.return)&&(yield ce(r.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield ce(c))})}class IL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=wL(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function wL(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NL(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return At(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ko.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return At(t).debug(`[${o}] response parsed`,$i({retryOfRequestLogID:r,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ph extends Promise{constructor(e,n,o=NL){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new ph(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QE=Symbol("brand.privateNullableHeaders");function*bL(t){if(!t)return;if(QE in t){const{values:o,nulls:r}=t;yield*o.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Iv(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=Iv(o[1])?o[1]:[o[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const Er=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[a,c]of bL(o)){const h=a.toLowerCase();r.has(h)||(e.delete(a),r.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[QE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pf=t=>{var e,n,o,r,a,c;if(typeof globalThis.process<"u")return(o=(n=(e=WN)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WE;class su{constructor(e){var n,o,r,a,c,h,g,{baseURL:m=Pf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Pf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,v=Ha(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:E},v),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(o=C.timeout)!==null&&o!==void 0?o:su.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const R="warn";this.logLevel=R,this.logLevel=(c=(a=xv(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:xv(Pf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:R,this.fetchOptions=C.fetchOptions,this.maxRetries=(h=C.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=C.fetch)!==null&&g!==void 0?g:uL(),this.encoder=dL,this._options=C,this.apiKey=y,this.apiVersion=E,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Er([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Er([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Er([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new en(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${zo}`}defaultIdempotencyKey(){return`stainless-node-retry-${WU()}`}makeStatusError(e,n,o,r){return It.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,a=$U(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return eL(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new ph(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,a,c;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:m,url:y,timeout:E}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(m,{url:y,options:h});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=o===void 0?"":`, retryOf: ${o}`,R=Date.now();if(At(this).debug(`[${v}] sending request`,$i({retryOfRequestLogID:o,method:h.method,url:y,options:h,headers:m.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new _d;const x=new AbortController,N=await this.fetchWithTimeout(y,m,E,x).catch(gd),O=Date.now();if(N instanceof globalThis.Error){const q=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new _d;const Q=md(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(n)return At(this).info(`[${v}] connection ${Q?"timed out":"failed"} - ${q}`),At(this).debug(`[${v}] connection ${Q?"timed out":"failed"} (${q})`,$i({retryOfRequestLogID:o,url:y,durationMs:O-R,message:N.message})),this.retryRequest(h,n,o??v);throw At(this).info(`[${v}] connection ${Q?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${v}] connection ${Q?"timed out":"failed"} (error; no more retries left)`,$i({retryOfRequestLogID:o,url:y,durationMs:O-R,message:N.message})),Q?new xE:new iu({cause:N})}const B=`[${v}${C}] ${m.method} ${y} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${O-R}ms`;if(!N.ok){const q=await this.shouldRetry(N);if(n&&q){const V=`retrying, ${n} attempts remaining`;return await fL(N.body),At(this).info(`${B} - ${V}`),At(this).debug(`[${v}] response error (${V})`,$i({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,durationMs:O-R})),this.retryRequest(h,n,o??v,N.headers)}const Q=q?"error; no more retries left":"error; not retryable";At(this).info(`${B} - ${Q}`);const W=await N.text().catch(V=>gd(V).message),G=iL(W),ne=G?void 0:W;throw At(this).debug(`[${v}] response error (${Q})`,$i({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,message:ne,durationMs:Date.now()-R})),this.makeStatusError(N.status,G,ne,N.headers)}return At(this).info(B),At(this).debug(`[${v}] response start`,$i({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,durationMs:O-R})),{response:N,options:h,controller:x,requestLogID:v,retryOfRequestLogID:o,startTime:R}}async fetchWithTimeout(e,n,o,r){const a=n||{},{signal:c,method:h}=a,g=Ha(a,["signal","method"]),m=this._makeAbort(r);c&&c.addEventListener("abort",m,{once:!0});const y=setTimeout(m,o),E=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,v=Object.assign(Object.assign(Object.assign({signal:r.signal},E?{duplex:"half"}:{}),{method:"GET"}),g);h&&(v.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(y)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var a;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,m)}return await oL(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,a;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:y}=c,E=this.buildURL(g,m,y);"timeout"in c&&nL("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:v,body:C}=this.buildBody({options:c}),R=await this.buildHeaders({options:e,method:h,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:R},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Er([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),aL()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Er([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cL(e)}:this.encoder({body:e,headers:o})}}su.DEFAULT_TIMEOUT=6e4;class ht extends su{constructor(){super(...arguments),this.interactions=new KE(this)}}WE=ht;ht.GeminiNextGenAPIClient=WE;ht.GeminiNextGenAPIClientError=en;ht.APIError=It;ht.APIConnectionError=iu;ht.APIConnectionTimeoutError=xE;ht.APIUserAbortError=_d;ht.NotFoundError=PE;ht.ConflictError=kE;ht.RateLimitError=HE;ht.BadRequestError=DE;ht.AuthenticationError=UE;ht.InternalServerError=GE;ht.PermissionDeniedError=LE;ht.UnprocessableEntityError=OE;ht.toFile=_L;ht.Interactions=KE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ML(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function xL(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function DL(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function UL(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function LL(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","epochCount"],a);const c=f(t,["learningRateMultiplier"]);if(c!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&d(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function PL(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const G=f(t,["validationDataset"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec"],kf(G))}else if(r==="PREFERENCE_TUNING"){const G=f(t,["validationDataset"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec"],kf(G))}else if(r==="DISTILLATION"){const G=f(t,["validationDataset"]);e!==void 0&&G!=null&&d(e,["distillationSpec"],kf(G))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&d(e,["tunedModelDisplayName"],a);const c=f(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const G=f(t,["epochCount"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],G)}else if(h==="PREFERENCE_TUNING"){const G=f(t,["epochCount"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],G)}else if(h==="DISTILLATION"){const G=f(t,["epochCount"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],G)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const G=f(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],G)}else if(g==="PREFERENCE_TUNING"){const G=f(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],G)}else if(g==="DISTILLATION"){const G=f(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],G)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const G=f(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],G)}else if(m==="PREFERENCE_TUNING"){const G=f(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],G)}else if(m==="DISTILLATION"){const G=f(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],G)}let y=f(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const G=f(t,["adapterSize"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],G)}else if(y==="PREFERENCE_TUNING"){const G=f(t,["adapterSize"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],G)}else if(y==="DISTILLATION"){const G=f(t,["adapterSize"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],G)}let E=f(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const G=f(t,["tuningMode"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","tuningMode"],G)}const v=f(t,["customBaseModel"]);e!==void 0&&v!=null&&d(e,["customBaseModel"],v);let C=f(n,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const G=f(t,["batchSize"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],G)}let R=f(n,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const G=f(t,["learningRate"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],G)}const x=f(t,["labels"]);e!==void 0&&x!=null&&d(e,["labels"],x);const N=f(t,["beta"]);e!==void 0&&N!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const O=f(t,["baseTeacherModel"]);e!==void 0&&O!=null&&d(e,["distillationSpec","baseTeacherModel"],O);const B=f(t,["tunedTeacherModelSource"]);e!==void 0&&B!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],B);const q=f(t,["sftLossWeightMultiplier"]);e!==void 0&&q!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],q);const Q=f(t,["outputUri"]);e!==void 0&&Q!=null&&d(e,["outputUri"],Q);const W=f(t,["encryptionSpec"]);return e!==void 0&&W!=null&&d(e,["encryptionSpec"],W),o}function kL(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&KL(a);const c=f(t,["config"]);return c!=null&&LL(c,n),n}function OL(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&QL(a,n,e);const c=f(t,["config"]);return c!=null&&PL(c,n,e),n}function HL(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function GL(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function VL(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function FL(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function qL(t,e){const n={},o=f(t,["config"]);return o!=null&&VL(o,n),n}function BL(t,e){const n={},o=f(t,["config"]);return o!=null&&FL(o,n),n}function zL(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const a=f(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>XE(h))),d(n,["tuningJobs"],c)}return n}function YL(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const a=f(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Ed(h))),d(n,["tuningJobs"],c)}return n}function JL(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["model"],o);const r=f(t,["name"]);return r!=null&&d(n,["endpoint"],r),n}function KL(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),d(n,["examples","examples"],r)}return n}function QL(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(r==="DISTILLATION"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(a==="DISTILLATION"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function XE(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const a=f(t,["state"]);a!=null&&d(n,["state"],dE(a));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["tuningTask","startTime"]);h!=null&&d(n,["startTime"],h);const g=f(t,["tuningTask","completeTime"]);g!=null&&d(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const y=f(t,["description"]);y!=null&&d(n,["description"],y);const E=f(t,["baseModel"]);E!=null&&d(n,["baseModel"],E);const v=f(t,["_self"]);return v!=null&&d(n,["tunedModel"],JL(v)),n}function Ed(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const a=f(t,["state"]);a!=null&&d(n,["state"],dE(a));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(n,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const y=f(t,["error"]);y!=null&&d(n,["error"],y);const E=f(t,["description"]);E!=null&&d(n,["description"],E);const v=f(t,["baseModel"]);v!=null&&d(n,["baseModel"],v);const C=f(t,["tunedModel"]);C!=null&&d(n,["tunedModel"],C);const R=f(t,["preTunedModel"]);R!=null&&d(n,["preTunedModel"],R);const x=f(t,["supervisedTuningSpec"]);x!=null&&d(n,["supervisedTuningSpec"],x);const N=f(t,["preferenceOptimizationSpec"]);N!=null&&d(n,["preferenceOptimizationSpec"],N);const O=f(t,["distillationSpec"]);O!=null&&d(n,["distillationSpec"],O);const B=f(t,["tuningDataStats"]);B!=null&&d(n,["tuningDataStats"],B);const q=f(t,["encryptionSpec"]);q!=null&&d(n,["encryptionSpec"],q);const Q=f(t,["partnerModelTuningSpec"]);Q!=null&&d(n,["partnerModelTuningSpec"],Q);const W=f(t,["customBaseModel"]);W!=null&&d(n,["customBaseModel"],W);const G=f(t,["experiment"]);G!=null&&d(n,["experiment"],G);const ne=f(t,["labels"]);ne!=null&&d(n,["labels"],ne);const Ce=f(t,["outputUri"]);Ce!=null&&d(n,["outputUri"],Ce);const V=f(t,["pipelineJob"]);V!=null&&d(n,["pipelineJob"],V);const $=f(t,["serviceAccount"]);$!=null&&d(n,["serviceAccount"],$);const Ee=f(t,["tunedModelDisplayName"]);Ee!=null&&d(n,["tunedModelDisplayName"],Ee);const Pe=f(t,["veoTuningSpec"]);return Pe!=null&&d(n,["veoTuningSpec"],Pe),n}function WL(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&d(n,["name"],r);const a=f(t,["metadata"]);a!=null&&d(n,["metadata"],a);const c=f(t,["done"]);c!=null&&d(n,["done"],c);const h=f(t,["error"]);return h!=null&&d(n,["error"],h),n}function kf(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends Jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(Yn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:ld.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=GL(e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>Ed(y))}else{const m=HL(e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>XE(y))}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=BL(e);return h=X("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=YL(y),v=new sv;return Object.assign(v,E),v})}else{const m=qL(e);return h=X("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=zL(y),v=new sv;return Object.assign(v,E),v})}}async cancel(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=xL(e);return h=X("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=UL(y),v=new rv;return Object.assign(v,E),v})}else{const m=ML(e);return h=X("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const v=E;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const E=DL(y),v=new rv;return Object.assign(v,E),v})}}async tuneInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=OL(e,e);return a=X("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>Ed(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kL(e);return a=X("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>WL(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $L{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ZL=1024*1024*8,jL=3,eP=1e3,tP=2,Va="x-goog-upload-status";async function nP(t,e,n){var o;const r=await $E(t,e,n),a=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Va])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function iP(t,e,n){var o;const r=await $E(t,e,n),a=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Va])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=rE(a),h=new lh;return Object.assign(h,c),h}async function $E(t,e,n){var o,r;let a=0,c=0,h=new ud(new Response),g="upload";for(a=t.size;c<a;){const m=Math.min(ZL,a-c),y=t.slice(c,c+m);c+m>=a&&(g+=", finalize");let E=0,v=eP;for(;E<jL&&(h=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Va]));)E++,await sP(v),v=v*tP;if(c+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[Va])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function oP(t){return{size:t.size,type:t.type}}function sP(t){return new Promise(e=>setTimeout(e,t))}class rP{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nP(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iP(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lP{create(e,n,o){return new aP(e,n,o)}}class aP{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uv="x-goog-api-key";class uP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Uv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Uv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cP="gl-node/";class fP{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=jN(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new uP(this.apiKey);this.apiClient=new oU({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cP+"web",uploader:new rP,downloader:new $L}),this.models=new CU(this.apiClient),this.live=new _U(this.apiClient,r,new lP),this.batches=new bM(this.apiClient),this.chats=new cx(this.models,this.apiClient),this.caches=new lx(this.apiClient),this.files=new Sx(this.apiClient),this.operations=new AU(this.apiClient),this.authTokens=new VU(this.apiClient),this.tunings=new XL(this.apiClient),this.fileSearchStores=new QU(this.apiClient)}}async function dP(t,e){const n=new fP({apiKey:"PLACEHOLDER_API_KEY"}),o=rn.map(a=>`${a.emoji} ${a.name} (Value: ${a.value}): ${a.description}`).join(`
`),r=`As a Scrum Master expert in the "Fruit Salad Estimation" technique, analyze this user story and suggest the most appropriate fruit.
  
  Story Title: ${t}
  Story Description: ${e}
  
  Fruit Scale Definitions:
  ${o}
  
  Note: Use 'Tomato' if information is missing or it needs a breakdown. Use 'Avocado' if it's unpredictable or a fixed chore.
  
  Provide your recommendation in JSON format.`;try{const a=await n.models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:un.OBJECT,properties:{suggestedFruit:{type:un.STRING,description:"Name of the suggested fruit"},reasoning:{type:un.STRING,description:"Short explanation for the choice"}},required:["suggestedFruit","reasoning"]}}}),c=JSON.parse(a.text||"{}");return{suggestedFruit:c.suggestedFruit||"Apple",reasoning:c.reasoning||"Based on the complexity, this fruit fits the profile."}}catch(a){return console.error("Gemini Error:",a),{suggestedFruit:"Apple",reasoning:"I'm having trouble connecting to the fruit vine, but standard stories are often Apples (2)!"}}}const hP={apiKey:"AIzaSyBffCarx-yPEoJwCEOxV63CR4tlKYVWEOI",authDomain:"fruit-planning-poker.firebaseapp.com",databaseURL:"https://fruit-planning-poker-default-rtdb.europe-west1.firebasedatabase.app",projectId:"fruit-planning-poker",storageBucket:"fruit-planning-poker.firebasestorage.app",messagingSenderId:"1076015123381",appId:"1:1076015123381:web:7ca4f64115645add0ce7fc"},pP=uR().length===0?Kv(hP):Qv(),pa=kN(pP),mP=()=>{const[t]=Gt.useState(()=>{let J=localStorage.getItem("fruit-poker-user-id");return J||(J="user-"+Math.random().toString(36).substr(2,9),localStorage.setItem("fruit-poker-user-id",J)),J}),[e,n]=Gt.useState(localStorage.getItem("fruit-poker-name")),[o,r]=Gt.useState(!e),[a,c]=Gt.useState(!1),[h,g]=Gt.useState(null),[m,y]=Gt.useState(!1),[E,v]=Gt.useState(!1),C=Gt.useMemo(()=>new URLSearchParams(window.location.search),[]),R=C.get("room")||"fresh-harvest",x=Gt.useMemo(()=>{const J=C.get("s");if(!J)return null;try{return JSON.parse(atob(J))}catch{return null}},[C]),[N,O]=Gt.useState({roomId:R,storyTitle:(x==null?void 0:x.title)||"Main Course",storyDescription:(x==null?void 0:x.desc)||"What are we cooking up today?",isRevealed:!1,participants:[]}),B=la(pa,`rooms/${N.roomId}`);Gt.useEffect(()=>{const J=NN(B,fe=>{const z=fe.val();if(!z){Uf(B,{storyTitle:N.storyTitle,storyDescription:N.storyDescription,isRevealed:!1,votes:{},participants:{}});return}const se=z.participants||{},ee=z.votes||{},oe=Object.keys(se).map(I=>({...se[I],vote:ee[I]||null}));O(I=>({...I,storyTitle:z.storyTitle||I.storyTitle,storyDescription:z.storyDescription||I.storyDescription,isRevealed:!!z.isRevealed,participants:oe}))});return()=>J()},[N.roomId]),Gt.useEffect(()=>{if(e){const J=la(pa,`rooms/${N.roomId}/participants/${t}`),fe=la(pa,`rooms/${N.roomId}/votes/${t}`),z={id:t,name:e,isAI:!1,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`};Uf(J,z),j_(J).remove(),j_(fe).remove()}},[e,t,N.roomId]);const q=J=>{N.isRevealed||Uf(la(pa,`rooms/${N.roomId}/votes/${t}`),J)},Q=()=>{ey(B,{isRevealed:!0})},W=()=>{ey(B,{isRevealed:!1,votes:{}}),g(null)},G=(J,fe)=>{const z=btoa(JSON.stringify({title:J,desc:fe})),se=Math.random().toString(36).substr(2,6);window.location.href=`?room=${se}&s=${z}`},ne=()=>{const J=window.location.href;navigator.clipboard.writeText(J),c(!0),setTimeout(()=>c(!1),2e3)},Ce=async()=>{y(!0);const J=await dP(N.storyTitle,N.storyDescription);g(J),y(!1)},V=()=>{const J=N.participants.filter(oe=>oe.vote).map(oe=>rn.find(I=>I.id===oe.vote));if(J.length===0)return rn.find(oe=>oe.id==="tomato")||rn[0];if(J.some(oe=>oe.id==="tomato"))return rn.find(oe=>oe.id==="tomato");if(J.filter(oe=>oe.id==="avocado").length>J.length/2)return rn.find(oe=>oe.id==="avocado");const z=J.filter(oe=>oe.value>0);if(z.length===0)return J[0];const se=z.reduce((oe,I)=>oe+I.value,0)/z.length;return rn.filter(oe=>oe.value>0).reduce((oe,I)=>Math.abs(I.value-se)<Math.abs(oe.value-se)?I:oe)},$=N.participants.find(J=>J.id===t),Ee=$==null?void 0:$.vote,Pe=V(),De=()=>{localStorage.removeItem("fruit-poker-name"),window.location.reload()};return o?k.jsx("div",{className:"fixed inset-0 bg-yellow-400 flex items-center justify-center p-4 z-50",children:k.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-2xl max-w-md w-full text-center",children:[k.jsx("div",{className:"text-6xl mb-4",children:""}),k.jsx("h2",{className:"text-3xl font-black text-gray-800 mb-2",children:"Ready for the Salad?"}),k.jsx("p",{className:"text-gray-500 mb-6 font-medium",children:"Join the remote harvest. What's your name?"}),k.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Avocado Addict",className:"w-full p-4 bg-gray-50 rounded-2xl border-2 border-gray-100 focus:border-indigo-500 focus:outline-none font-bold text-center text-xl mb-4 text-gray-700",onKeyDown:J=>{if(J.key==="Enter"){const fe=J.target.value;fe&&(localStorage.setItem("fruit-poker-name",fe),n(fe),r(!1))}}}),k.jsx("button",{onClick:()=>{const J=document.querySelector("input");J!=null&&J.value&&(localStorage.setItem("fruit-poker-name",J.value),n(J.value),r(!1))},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition-all",children:"Start Estimating"})]})}):k.jsxs("div",{className:"min-h-screen p-4 md:p-8 max-w-7xl mx-auto",children:[k.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-center mb-12 gap-6",children:[k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-3xl flex items-center justify-center text-3xl shadow-lg transform -rotate-6 transition-transform hover:rotate-0",children:""}),k.jsxs("div",{children:[k.jsx("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Fruit Poker"}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("span",{className:"text-gray-500 font-medium italic text-sm",children:["Room: ",N.roomId]}),k.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[$&&k.jsxs("div",{className:"flex items-center gap-3 bg-white px-4 py-2 rounded-2xl border border-gray-100 shadow-sm mr-2",children:[k.jsx("img",{src:$.avatar,alt:$.name,className:"w-10 h-10 rounded-full border-2 border-indigo-100"}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-tighter",children:"Profile"}),k.jsx("span",{className:"text-sm font-bold text-gray-800 leading-none",children:$.name})]}),k.jsx("button",{onClick:De,className:"ml-2 text-gray-300 hover:text-red-400 transition-colors",children:k.jsx("i",{className:"fas fa-sign-out-alt"})})]}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("button",{onClick:ne,className:"px-6 py-3 rounded-full bg-white border-2 border-gray-100 font-bold text-indigo-600 hover:bg-gray-50 transition-colors shadow-sm",children:a?k.jsxs("span",{className:"text-green-600",children:[k.jsx("i",{className:"fas fa-check mr-2"}),"Link Copied"]}):k.jsxs("span",{children:[k.jsx("i",{className:"fas fa-share-alt mr-2"}),"Share Link"]})}),k.jsxs("button",{onClick:()=>v(!0),className:"px-6 py-3 rounded-full bg-indigo-50 border-2 border-indigo-100 font-bold text-indigo-700 hover:bg-indigo-100 transition-colors shadow-sm",children:[k.jsx("i",{className:"fas fa-plus mr-2"}),"New Round"]}),N.isRevealed?k.jsxs("button",{onClick:W,className:"px-8 py-3 rounded-full bg-orange-500 text-white font-bold shadow-lg hover:bg-orange-600 transition-all flex items-center gap-2",children:[k.jsx("i",{className:"fas fa-redo"}),"Reset Board"]}):k.jsxs("button",{onClick:Q,disabled:!Ee,className:`px-8 py-3 rounded-full font-bold text-white transition-all shadow-lg ${Ee?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-300 cursor-not-allowed"}`,children:[k.jsx("i",{className:"fas fa-eye mr-2"}),"Reveal Cards"]})]})]})]}),k.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[k.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[k.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100",children:[k.jsx("h2",{className:"text-xs uppercase font-bold text-indigo-500 mb-2 tracking-widest",children:"Active Task"}),k.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:N.storyTitle}),k.jsx("p",{className:"text-gray-500 text-sm leading-relaxed mb-4",children:N.storyDescription}),k.jsxs("button",{onClick:Ce,disabled:m,className:"w-full py-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:from-yellow-500 hover:to-orange-500 transition-all shadow-md",children:[m?k.jsx("i",{className:"fas fa-spinner animate-spin"}):k.jsx("i",{className:"fas fa-wand-sparkles"}),"Fruit Coach Insight"]})]}),h&&k.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border border-orange-100 relative overflow-hidden animate-fade-in",children:[k.jsx("h3",{className:"text-sm font-bold text-orange-600 mb-2 uppercase tracking-tighter",children:"Coach's Pick"}),k.jsxs("p",{className:"text-gray-700 font-medium mb-2",children:['"This feels like a ',k.jsx("span",{className:"text-orange-700 font-bold",children:h.suggestedFruit}),'"']}),k.jsx("p",{className:"text-sm text-gray-600 leading-relaxed italic border-l-4 border-orange-200 pl-3",children:h.reasoning})]}),k.jsx(VN,{participants:N.participants,isRevealed:N.isRevealed})]}),k.jsxs("div",{className:"lg:col-span-8 flex flex-col",children:[N.isRevealed?k.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 bg-indigo-50 rounded-[40px] border-4 border-white shadow-inner mb-8 min-h-[400px] animate-fade-in",children:[k.jsx("h2",{className:"text-2xl font-bold text-indigo-900 mb-8 tracking-tight",children:"The Team's Fruit Salad"}),k.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:N.participants.filter(J=>J.vote).map(J=>{const fe=rn.find(z=>z.id===J.vote);return k.jsxs("div",{className:"flex flex-col items-center animate-bounce",children:[k.jsxs("div",{className:`w-24 h-32 rounded-2xl flex flex-col items-center justify-center shadow-xl border-2 bg-white ${fe==null?void 0:fe.color}`,children:[k.jsx("span",{className:"text-5xl mb-1",children:fe==null?void 0:fe.emoji}),k.jsx("span",{className:"font-bold text-xs text-gray-500 mt-2 uppercase tracking-widest",children:fe==null?void 0:fe.name})]}),k.jsx("span",{className:"mt-2 text-[10px] font-bold text-indigo-700 uppercase tracking-tighter bg-white px-2 rounded-full shadow-sm",children:J.name.split(" ")[0]})]},J.id)})}),k.jsxs("div",{className:"mt-12 p-10 bg-white rounded-[40px] shadow-2xl flex flex-col items-center text-center max-w-sm border-2 border-indigo-100 relative",children:[k.jsx("div",{className:"absolute -top-4 bg-indigo-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest",children:"Consensus"}),k.jsx("div",{className:"text-8xl mb-4 drop-shadow-lg",children:Pe.emoji}),k.jsx("div",{className:"text-4xl font-black text-gray-800 tracking-tighter",children:Pe.name}),k.jsxs("p",{className:"mt-4 text-gray-500 text-sm italic font-medium",children:['"',Pe.description,'"']})]})]}):k.jsxs("div",{className:"flex-1 p-8 bg-gray-50 rounded-[40px] border-4 border-white shadow-inner mb-8",children:[k.jsxs("div",{className:"flex items-center justify-between mb-8",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cast Your Vote"}),k.jsxs("div",{className:"text-sm bg-white px-4 py-1 rounded-full shadow-sm text-gray-500 font-bold border border-gray-100",children:[N.participants.filter(J=>J.vote).length," / ",N.participants.length," Ready"]})]}),k.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 justify-items-center",children:rn.map(J=>k.jsx(GN,{fruit:J,isSelected:Ee===J.id,onSelect:q},J.id))})]}),k.jsxs("div",{className:"bg-white p-8 rounded-[30px] shadow-sm border border-gray-100",children:[k.jsx("h3",{className:"text-xs font-black text-gray-400 uppercase mb-6 tracking-[0.2em]",children:"Fruit Lexicon"}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:rn.map(J=>k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx("span",{className:"text-3xl",children:J.emoji}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-sm font-bold text-gray-800",children:J.name}),k.jsx("span",{className:"text-xs text-gray-500 leading-snug",children:J.description})]})]},J.id))})]})]})]}),E&&k.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:k.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-2xl max-w-lg w-full",children:[k.jsxs("h2",{className:"text-2xl font-black text-gray-800 mb-6 flex items-center gap-2",children:[k.jsx("i",{className:"fas fa-magic text-indigo-500"})," Start a New Round"]}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Story Title"}),k.jsx("input",{id:"new-title",type:"text",defaultValue:"Next Big Thing",className:"w-full p-4 bg-gray-50 rounded-2xl border-2 border-gray-100 focus:border-indigo-500 focus:outline-none font-bold text-gray-700"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Description"}),k.jsx("textarea",{id:"new-desc",rows:3,placeholder:"Add context for the team...",className:"w-full p-4 bg-gray-50 rounded-2xl border-2 border-gray-100 focus:border-indigo-500 focus:outline-none text-gray-700"})]})]}),k.jsxs("div",{className:"flex gap-3 mt-8",children:[k.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-4 bg-gray-100 text-gray-600 rounded-2xl font-bold hover:bg-gray-200 transition-colors",children:"Cancel"}),k.jsx("button",{onClick:()=>{const J=document.getElementById("new-title").value,fe=document.getElementById("new-desc").value;J&&G(J,fe)},className:"flex-[2] py-4 px-8 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition-all",children:"Create Round"})]})]})}),k.jsx("footer",{className:"mt-16 mb-8 text-center text-gray-400 text-xs font-bold uppercase tracking-[0.3em]",children:"Stay Fresh  Estimate Better  Fruit Poker"})]})},ZE=document.getElementById("root");if(!ZE)throw new Error("Could not find root element to mount to");const gP=DC.createRoot(ZE);gP.render(k.jsx(AC.StrictMode,{children:k.jsx(mP,{})}));
